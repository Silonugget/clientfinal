function Nb(){import("data:text/javascript,")}const B1=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const g of l)if(g.type==="childList")for(const p of g.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function e(l){const g={};return l.integrity&&(g.integrity=l.integrity),l.referrerpolicy&&(g.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?g.credentials="include":l.crossorigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function a(l){if(l.ep)return;l.ep=!0;const g=e(l);fetch(l.href,g)}};B1();class z1{constructor(t){this.level=t}info(...t){(this.level==="debug"||this.level==="info")&&console.info(...t)}debug(...t){this.level==="debug"&&console.debug(...t)}error(...t){console.error(...t)}}var se=new z1("info");try{self["workbox:window:6.5.1"]&&_()}catch{}function Cu(n,t){return new Promise(function(e){var a=new MessageChannel;a.port1.onmessage=function(l){e(l.data)},n.postMessage(t,[a.port2])})}function F1(n,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}function Iu(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,a=new Array(t);e<t;e++)a[e]=n[e];return a}function q1(n,t){var e;if(typeof Symbol=="undefined"||n[Symbol.iterator]==null){if(Array.isArray(n)||(e=function(l,g){if(l){if(typeof l=="string")return Iu(l,g);var p=Object.prototype.toString.call(l).slice(8,-1);return p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set"?Array.from(l):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?Iu(l,g):void 0}}(n))||t&&n&&typeof n.length=="number"){e&&(n=e);var a=0;return function(){return a>=n.length?{done:!0}:{done:!1,value:n[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(e=n[Symbol.iterator]()).next.bind(e)}try{self["workbox:core:6.5.1"]&&_()}catch{}var Uh=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})};function Wh(n,t){var e=location.href;return new URL(n,e).href===new URL(t,e).href}var la=function(n,t){this.type=n,Object.assign(this,t)};function Bs(n,t,e){return e?t?t(n):n:(n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n)}function H1(){}var U1={type:"SKIP_WAITING"};function Eu(n,t){if(!t)return n&&n.then?n.then(H1):Promise.resolve()}var W1=function(n){var t,e;function a(x,N){var b,I;return N===void 0&&(N={}),(b=n.call(this)||this).nn={},b.tn=0,b.rn=new Uh,b.en=new Uh,b.on=new Uh,b.un=0,b.an=new Set,b.cn=function(){var U=b.fn,z=U.installing;b.tn>0||!Wh(z.scriptURL,b.sn.toString())||performance.now()>b.un+6e4?(b.vn=z,U.removeEventListener("updatefound",b.cn)):(b.hn=z,b.an.add(z),b.rn.resolve(z)),++b.tn,z.addEventListener("statechange",b.ln)},b.ln=function(U){var z=b.fn,q=U.target,G=q.state,et=q===b.vn,lt={sw:q,isExternal:et,originalEvent:U};!et&&b.mn&&(lt.isUpdate=!0),b.dispatchEvent(new la(G,lt)),G==="installed"?b.wn=self.setTimeout(function(){G==="installed"&&z.waiting===q&&b.dispatchEvent(new la("waiting",lt))},200):G==="activating"&&(clearTimeout(b.wn),et||b.en.resolve(q))},b.dn=function(U){var z=b.hn,q=z!==navigator.serviceWorker.controller;b.dispatchEvent(new la("controlling",{isExternal:q,originalEvent:U,sw:z,isUpdate:b.mn})),q||b.on.resolve(z)},b.gn=(I=function(U){var z=U.data,q=U.ports,G=U.source;return Bs(b.getSW(),function(){b.an.has(G)&&b.dispatchEvent(new la("message",{data:z,originalEvent:U,ports:q,sw:G}))})},function(){for(var U=[],z=0;z<arguments.length;z++)U[z]=arguments[z];try{return Promise.resolve(I.apply(this,U))}catch(q){return Promise.reject(q)}}),b.sn=x,b.nn=N,navigator.serviceWorker.addEventListener("message",b.gn),b}e=n,(t=a).prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e;var l,g,p=a.prototype;return p.register=function(x){var N=(x===void 0?{}:x).immediate,b=N!==void 0&&N;try{var I=this;return function(U,z){var q=U();return q&&q.then?q.then(z):z(q)}(function(){if(!b&&document.readyState!=="complete")return Eu(new Promise(function(U){return window.addEventListener("load",U)}))},function(){return I.mn=Boolean(navigator.serviceWorker.controller),I.yn=I.pn(),Bs(I.bn(),function(U){I.fn=U,I.yn&&(I.hn=I.yn,I.en.resolve(I.yn),I.on.resolve(I.yn),I.yn.addEventListener("statechange",I.ln,{once:!0}));var z=I.fn.waiting;return z&&Wh(z.scriptURL,I.sn.toString())&&(I.hn=z,Promise.resolve().then(function(){I.dispatchEvent(new la("waiting",{sw:z,wasWaitingBeforeRegister:!0}))}).then(function(){})),I.hn&&(I.rn.resolve(I.hn),I.an.add(I.hn)),I.fn.addEventListener("updatefound",I.cn),navigator.serviceWorker.addEventListener("controllerchange",I.dn),I.fn})})}catch(U){return Promise.reject(U)}},p.update=function(){try{return this.fn?Eu(this.fn.update()):void 0}catch(x){return Promise.reject(x)}},p.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},p.messageSW=function(x){try{return Bs(this.getSW(),function(N){return Cu(N,x)})}catch(N){return Promise.reject(N)}},p.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Cu(this.fn.waiting,U1)},p.pn=function(){var x=navigator.serviceWorker.controller;return x&&Wh(x.scriptURL,this.sn.toString())?x:void 0},p.bn=function(){try{var x=this;return function(N,b){try{var I=N()}catch(U){return b(U)}return I&&I.then?I.then(void 0,b):I}(function(){return Bs(navigator.serviceWorker.register(x.sn,x.nn),function(N){return x.un=performance.now(),N})},function(N){throw N})}catch(N){return Promise.reject(N)}},l=a,(g=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&F1(l.prototype,g),a}(function(){function n(){this.Pn=new Map}var t=n.prototype;return t.addEventListener=function(e,a){this.Sn(e).add(a)},t.removeEventListener=function(e,a){this.Sn(e).delete(a)},t.dispatchEvent=function(e){e.target=this;for(var a,l=q1(this.Sn(e.type));!(a=l()).done;)(0,a.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},n}());function $1(n={}){const{immediate:t=!1,onNeedRefresh:e,onOfflineReady:a,onRegistered:l,onRegisterError:g}=n;let p;const x=async(N=!0)=>{};return"serviceWorker"in navigator&&(p=new W1("/sw.js",{scope:"/",type:"classic"}),p.addEventListener("activated",N=>{N.isUpdate?window.location.reload():a==null||a()}),p.register({immediate:t}).then(N=>{l==null||l(N)}).catch(N=>{g==null||g(N)})),x}let ua;async function G1(){!ua||(localStorage.getItem("prompted")!=="true"&&await ua.prompt().catch(n=>se.error("[SW ERROR]",n)),await ua.userChoice,localStorage.setItem("prompted","true"),ua=null)}function Z1(){window.addEventListener("beforeinstallprompt",n=>{n.preventDefault(),ua=n}),$1({immediate:!0})}"serviceWorker"in navigator&&Z1();var dt=(n=>(n[n.Handshake=0]="Handshake",n[n.Login=1]="Login",n[n.Welcome=2]="Welcome",n[n.Map=3]="Map",n[n.Spawn=4]="Spawn",n[n.List=5]="List",n[n.Who=6]="Who",n[n.Equipment=7]="Equipment",n[n.Ready=8]="Ready",n[n.Sync=9]="Sync",n[n.Movement=10]="Movement",n[n.Teleport=11]="Teleport",n[n.Despawn=12]="Despawn",n[n.Target=13]="Target",n[n.Combat=14]="Combat",n[n.Animation=15]="Animation",n[n.Projectile=16]="Projectile",n[n.Points=17]="Points",n[n.Network=18]="Network",n[n.Chat=19]="Chat",n[n.Command=20]="Command",n[n.Container=21]="Container",n[n.Ability=22]="Ability",n[n.Quest=23]="Quest",n[n.Achievement=24]="Achievement",n[n.Notification=25]="Notification",n[n.Blink=26]="Blink",n[n.Heal=27]="Heal",n[n.Experience=28]="Experience",n[n.Death=29]="Death",n[n.Audio=30]="Audio",n[n.NPC=31]="NPC",n[n.Respawn=32]="Respawn",n[n.Trade=33]="Trade",n[n.Enchant=34]="Enchant",n[n.Guild=35]="Guild",n[n.Pointer=36]="Pointer",n[n.PVP=37]="PVP",n[n.Click=38]="Click",n[n.Warp=39]="Warp",n[n.Store=40]="Store",n[n.Overlay=41]="Overlay",n[n.Camera=42]="Camera",n[n.Bubble=43]="Bubble",n[n.Skill=44]="Skill",n[n.BuildUp=45]="BuildUp",n[n.Update=46]="Update",n))(dt||{}),Gs=(n=>(n[n.Login=0]="Login",n[n.Register=1]="Register",n[n.Guest=2]="Guest",n))(Gs||{}),_a=(n=>(n[n.Batch=0]="Batch",n[n.Equip=1]="Equip",n[n.Unequip=2]="Unequip",n))(_a||{}),gi=(n=>(n[n.Request=0]="Request",n[n.Started=1]="Started",n[n.Step=2]="Step",n[n.Stop=3]="Stop",n[n.Move=4]="Move",n[n.Orientate=5]="Orientate",n[n.Follow=6]="Follow",n[n.Entity=7]="Entity",n[n.Freeze=8]="Freeze",n[n.Stunned=9]="Stunned",n[n.Zone=10]="Zone",n))(gi||{}),xr=(n=>(n[n.Talk=0]="Talk",n[n.Attack=1]="Attack",n[n.None=2]="None",n[n.Object=3]="Object",n))(xr||{}),Rg=(n=>(n[n.Initiate=0]="Initiate",n[n.Hit=1]="Hit",n[n.Finish=2]="Finish",n[n.Sync=3]="Sync",n))(Rg||{}),Dg=(n=>(n[n.Static=0]="Static",n[n.Dynamic=1]="Dynamic",n[n.Create=2]="Create",n[n.Update=3]="Update",n[n.Impact=4]="Impact",n))(Dg||{}),Og=(n=>(n[n.Ping=0]="Ping",n[n.Pong=1]="Pong",n))(Og||{}),Cn=(n=>(n[n.Batch=0]="Batch",n[n.Add=1]="Add",n[n.Remove=2]="Remove",n[n.Select=3]="Select",n[n.Swap=4]="Swap",n))(Cn||{}),fd=(n=>(n[n.Batch=0]="Batch",n[n.Progress=1]="Progress",n[n.Finish=2]="Finish",n))(fd||{}),ud=(n=>(n[n.Batch=0]="Batch",n[n.Progress=1]="Progress",n))(ud||{}),gd=(n=>(n[n.Ok=0]="Ok",n[n.YesNo=1]="YesNo",n[n.Text=2]="Text",n[n.Popup=3]="Popup",n))(gd||{}),wd=(n=>(n[n.Combat=0]="Combat",n[n.Skill=1]="Skill",n))(wd||{}),Zs=(n=>(n[n.Talk=0]="Talk",n[n.Store=1]="Store",n[n.Bank=2]="Bank",n[n.Enchant=3]="Enchant",n[n.Countdown=4]="Countdown",n))(Zs||{}),cd=(n=>(n[n.Select=0]="Select",n[n.Remove=1]="Remove",n[n.Enchant=2]="Enchant",n[n.Update=3]="Update",n))(cd||{}),ri=(n=>(n[n.Location=0]="Location",n[n.Relative=1]="Relative",n[n.Entity=2]="Entity",n[n.Remove=3]="Remove",n[n.Button=4]="Button",n))(ri||{}),Ir=(n=>(n[n.Open=0]="Open",n[n.Close=1]="Close",n[n.Buy=2]="Buy",n[n.Sell=3]="Sell",n[n.Update=4]="Update",n[n.Select=5]="Select",n))(Ir||{}),Vs=(n=>(n[n.Set=0]="Set",n[n.Remove=1]="Remove",n[n.Lamp=2]="Lamp",n[n.RemoveLamps=3]="RemoveLamps",n[n.Darkness=4]="Darkness",n))(Vs||{}),Ng=(n=>(n[n.CtrlClick=0]="CtrlClick",n))(Ng||{}),pd=(n=>(n[n.Batch=0]="Batch",n[n.Update=1]="Update",n))(pd||{});ri.Remove;var Er=(n=>(n[n.Bank=0]="Bank",n[n.Inventory=1]="Inventory",n))(Er||{}),Gt=(n=>(n[n.Up=0]="Up",n[n.Down=1]="Down",n[n.Left=2]="Left",n[n.Right=3]="Right",n))(Gt||{}),ne=(n=>(n[n.Player=0]="Player",n[n.NPC=1]="NPC",n[n.Item=2]="Item",n[n.Mob=3]="Mob",n[n.Chest=4]="Chest",n[n.Projectile=5]="Projectile",n[n.Object=6]="Object",n))(ne||{}),ni=(n=>(n[n.Idle=0]="Idle",n[n.Attack=1]="Attack",n[n.Walk=2]="Walk",n[n.Orientate=3]="Orientate",n))(ni||{}),Oi=(n=>(n.Use="Use",n.Drop="Drop",n.Equip="Equip",n.Eat="Eat",n.Move="Move",n))(Oi||{}),Xe=(n=>(n[n.Damage=0]="Damage",n[n.Poison=1]="Poison",n[n.Heal=2]="Heal",n[n.Mana=3]="Mana",n[n.Experience=4]="Experience",n[n.LevelUp=5]="LevelUp",n[n.Critical=6]="Critical",n[n.Stun=7]="Stun",n[n.Explosive=8]="Explosive",n[n.Profession=9]="Profession",n))(Xe||{}),be=(n=>(n[n.Armour=0]="Armour",n[n.Boots=1]="Boots",n[n.Pendant=2]="Pendant",n[n.Ring=3]="Ring",n[n.Weapon=4]="Weapon",n))(be||{}),wo=(n=>(n[n.Colliding=0]="Colliding",n[n.Mob=1]="Mob",n[n.Player=2]="Player",n[n.Item=3]="Item",n[n.NPC=4]="NPC",n[n.Chest=5]="Chest",n[n.Object=6]="Object",n))(wo||{}),Zi=(n=>(n[n.Music=0]="Music",n[n.SFX=1]="SFX",n))(Zi||{}),po=(n=>(n[n.Lumberjacking=0]="Lumberjacking",n[n.Mining=1]="Mining",n))(po||{});let V1=["Bloodsucking","Critical","Evasion","Spike","Explosive","Stun","AntiStun","Splash"],j1={[0]:{fill:"rgb(255, 50, 50)",stroke:"rgb(255, 180, 180)",inflicted:{fill:"white",stroke:"#373737"}},[6]:{fill:"rgb(204, 0, 204)",stroke:"rgb(255, 180, 180)",inflicted:{fill:"rgb(255, 153, 204)",stroke:"#373737"}},[1]:{fill:"rgb(66, 183, 77)",stroke:"rgb(50, 120 , 50)"},[2]:{fill:"rgb(80, 255, 80)",stroke:"rgb(50, 120, 50)"},[3]:{fill:"rgb(73, 94, 228)",stroke:"rgb(56, 63, 133)"},[4]:{fill:"rgb(80, 180, 255)",stroke:"rgb(15, 85, 138)"},[5]:{fill:"rgb(80, 180, 255)",stroke:"rgb(15, 85, 138)"},[9]:{fill:"rgb(204, 0, 153)",stroke:"rgb(112, 17, 112)"}};var ba=(n=>(n[n.MAX_STACK=2147483647]="MAX_STACK",n[n.MAX_LEVEL=135]="MAX_LEVEL",n[n.INVENTORY_SIZE=20]="INVENTORY_SIZE",n[n.BANK_SIZE=69]="BANK_SIZE",n[n.DROP_PROBABILITY=1e3]="DROP_PROBABILITY",n[n.MAX_PROFESSION_LEVEL=99]="MAX_PROFESSION_LEVEL",n[n.HEAL_RATE=5e3]="HEAL_RATE",n[n.STORE_UPDATE_FREQUENCY=2e4]="STORE_UPDATE_FREQUENCY",n[n.MAP_DIVISION_SIZE=64]="MAP_DIVISION_SIZE",n.SPAWN_POINT="325,86",n.TUTORIAL_QUEST_KEY="tutorial",n.TUTORIAL_SPAWN_POINT="375,40",n[n.TREE_REGROW=3e4]="TREE_REGROW",n[n.SKILL_LOOP=1e3]="SKILL_LOOP",n))(ba||{});let Tu=n=>n%1===0;var ye={createId(n,t=0,e=0){return`${n}${t}${e}`},randomInt(n,t){return n+Math.floor(Math.random()*(t-n+1))},createSlot(n,t,e){let a=document.createElement("li"),l=document.createElement("div"),g=document.createElement("div"),p=document.createElement("div");return l.classList.add("bank-slot"),g.classList.add("bank-image"),p.classList.add("item-count"),l.append(g),l.append(p),e&&l.addEventListener("click",()=>e(n,t)),a.append(l),a},getImageURL(n=""){return n===""?"":`url("/img/sprites/item-${n}.png")`},getCount(n){let t=n.toString();return n>999999?`${t.slice(0,Math.max(0,t.length-6))}M`:n>9999?`${t.slice(0,2)}K`:n>1?t:""},getContainerAction(n){switch(n){case Oi.Use:case Oi.Equip:case Oi.Eat:return Cn.Select;case Oi.Drop:return Cn.Remove;case Oi.Move:return Cn.Swap;default:return-1}},isEmail(n){return/^(([^\s"(),.:;<>@[\\\]]+(\.[^\s"(),.:;<>@[\\\]]+)*)|(".+"))@((\[(?:\d{1,3}\.){3}\d{1,3}])|(([\dA-Za-z-]+\.)+[A-Za-z]{2,}))$/.test(n)}};let zs=window.localStorage,$h="data";class K1{constructor(){this.data=zs.data?JSON.parse(zs.getItem($h)):this.create(),this.isNewVersion()&&this.set(this.create())}create(){return{new:!0,world:1,clientVersion:1,errorMessage:"",player:{username:"",password:"",autoLogin:!1,rememberMe:!1,orientation:Gt.Down},settings:{music:100,sfx:100,brightness:100,soundEnabled:!0,centerCamera:!0,debug:!1,showNames:!0,showLevels:!0},map:{regionData:[],grid:[],objects:[],cursorTiles:{}}}}save(){this.data&&zs.setItem($h,JSON.stringify(this.data))}clear(){zs.removeItem($h),this.set(this.create()),this.save()}set(t){this.data=t,this.save()}setError(t){return this.data.errorMessage=t,this.save(),!0}setRemember(t){this.data.player.rememberMe=t,this.save()}setCredentials(t="",e=""){this.data.player.username=t,this.data.player.password=e,this.save()}setVolume(t=100){this.data.settings.music=t,this.save()}setSFX(t=100){this.data.settings.sfx=t,this.save()}setBrightness(t=100){this.data.settings.brightness=t,this.save()}setSoundEnabled(t){this.data.settings.soundEnabled=t,this.save()}setCenterCamera(t){this.data.settings.centerCamera=t,this.save()}setDebug(t){this.data.settings.debug=t,this.save()}setShowNames(t){this.data.settings.showNames=t,this.save()}setShowLevels(t){this.data.settings.showLevels=t,this.save()}isNewVersion(){return this.data.clientVersion!==1}setOrientation(t){this.data.player.orientation=t,this.save()}setRegionData(t,e,a,l){this.data.map.regionData=t,this.data.map.grid=e,this.data.map.objects=a,this.data.map.cursorTiles=l,this.save()}getError(){let{errorMessage:t}=this.data;return this.data.errorMessage="",this.save(),t}getUsername(){return this.data.player.username}getPassword(){return this.data.player.password}hasRemember(){return this.data.player.rememberMe}getRegionData(){return{regionData:this.data.map.regionData,grid:this.data.map.grid,objects:this.data.map.objects,cursorTiles:this.data.map.cursorTiles}}getSettings(){return this.data.settings}getDebug(){return this.data.settings.debug}}let ya=navigator.userAgent.toLowerCase(),J1=()=>/safari/.test(ya)&&!/chrome/.test(ya);function Q1(){let n=/ipad/.test(ya),t=/android/.test(ya);return(n||t)&&window.innerWidth>=640}let mo=()=>window.innerWidth<1e3;class t2{constructor(){this.config={name:"Kaetram",host:"dolphin-app-b3sjn.ondigitalocean.app",ssl:!0,worldSwitch:!1,serverId:1,debug:!1,version:1,port:9001,hub:!1},this.storage=new K1,this.body=document.querySelector("body"),this.parchment=document.querySelector("#parchment"),this.canvas=document.querySelector("#canvas"),this.loginForm=document.querySelector("#load-character form"),this.registerForm=document.querySelector("#create-character form"),this.passwordConfirmation=document.querySelector("#register-password-confirmation-input"),this.emailField=document.querySelector("#register-email-input"),this.loginButton=document.querySelector("#login"),this.registerButton=document.querySelector("#new-account"),this.cancelButton=document.querySelector("#cancel-button"),this.respawn=document.querySelector("#respawn"),this.rememberMe=document.querySelector("#remember-me input"),this.guest=document.querySelector("#guest input"),this.about=document.querySelector("#toggle-about"),this.credits=document.querySelector("#toggle-credits"),this.discord=document.querySelector("#toggle-discord"),this.validation=document.querySelectorAll(".validation-summary"),this.loading=document.querySelector(".loader"),this.footer=document.querySelector("footer"),this.currentScroll="load-character",this.parchmentAnimating=!1,this.loggingIn=!1,this.menuHidden=!1,this.statusMessage="",this.sendStatus("Initializing the game client..."),this.load()}load(){this.loginForm.addEventListener("submit",this.login.bind(this)),this.registerForm.addEventListener("submit",this.login.bind(this)),this.registerButton.addEventListener("click",()=>this.openScroll("create-character")),this.cancelButton.addEventListener("click",()=>this.openScroll("load-character")),this.about.addEventListener("click",()=>this.openScroll("about")),this.credits.addEventListener("click",()=>this.openScroll("credits")),this.discord.addEventListener("click",()=>window.open("https://discord.gg/MmbGAaw")),this.respawn.addEventListener("click",()=>{var t;return(t=this.respawnCallback)==null?void 0:t.call(this)}),this.parchment.addEventListener("click",()=>{this.hasFooterOpen()&&this.openScroll("load-character")}),document.addEventListener("keydown",t=>t.key!=="Enter"),document.addEventListener("keydown",this.handleKeyDown.bind(this)),document.addEventListener("keyup",t=>{var e;return(e=this.keyUpCallback)==null?void 0:e.call(this,t)}),document.addEventListener("mousemove",t=>{var e;return(e=this.mouseMoveCallback)==null?void 0:e.call(this,t)}),this.canvas.addEventListener("click",t=>{var e;return(e=this.leftClickCallback)==null?void 0:e.call(this,t)}),window.addEventListener("resize",()=>{var t;return(t=this.resizeCallback)==null?void 0:t.call(this)}),document.querySelector("#canvas").addEventListener("contextmenu",this.handleRightClick.bind(this))}loadLogin(){let t=this.storage.getError();t&&this.sendError(t),this.storage.hasRemember()&&(this.getUsernameField().value=this.storage.getUsername(),this.getPasswordField().value=this.storage.getPassword(),this.rememberMe.checked=!0)}handleKeyDown(t){var e;if(this.isMenuHidden())return(e=this.keyDownCallback)==null?void 0:e.call(this,t);t.key==="Enter"&&this.login()}handleRightClick(t){var e;return(e=this.rightClickCallback)==null||e.call(this,t),t.preventDefault(),!1}ready(){this.sendStatus(),this.loginButton.disabled=!1,this.loadLogin()}login(){var t;this.loggingIn||this.statusMessage||!this.verifyForm()||(this.clearErrors(),this.toggleLogin(!0),(t=this.loginCallback)==null||t.call(this),G1())}saveLogin(){this.storage.setRemember(this.isRememberMe()),this.storage.setCredentials(),this.isRememberMe()&&this.storage.setCredentials(this.getUsername(),this.getPassword())}showMenu(){this.body.classList.remove("game"),this.body.classList.remove("started"),this.body.classList.add("intro"),this.footer.style.display="block",this.menuHidden=!1}fadeMenu(){this.updateLoader(),window.setTimeout(()=>{this.body.classList.add("game"),this.body.classList.add("started"),this.body.classList.remove("intro"),this.footer.style.display="none",this.menuHidden=!0,this.saveLogin()},500)}openScroll(t){this.loggingIn||this.parchmentAnimating||(this.clearErrors(),this.changeScroll(t,!mo()))}changeScroll(t,e=!1){e?(this.parchmentAnimating=!0,this.parchment.classList.toggle("animate"),this.parchment.classList.remove(this.currentScroll),window.setTimeout(()=>{var a;this.parchmentAnimating=!1,this.parchment.classList.toggle("animate"),this.parchment.classList.add(t),(a=document.querySelector(`#${t} input`))==null||a.focus()},1e3)):(this.parchment.classList.remove(this.currentScroll),this.parchment.classList.add(t)),this.currentScroll=t}verifyForm(){if(this.isGuest())return!0;if(!this.getUsername())return this.sendError("Please enter a username.",this.getUsernameField());if(!this.getPassword())return this.sendError("Please enter a password.",this.getPasswordField());if(this.isRegistering()){if(this.getPassword().length<3)return this.sendError("Password must be at least 3 characters long.",this.getPasswordField());if(this.getPassword()!==this.getPasswordConfirmation())return this.sendError("Passwords do not match.",this.passwordConfirmation);if(!ye.isEmail(this.getEmail()))return this.sendError("The email you've entered is not valid.",this.emailField)}return!0}sendStatus(t=""){if(this.clearErrors(),this.statusMessage=t,!t)return;this.setValidation("status",t);let e=document.querySelector(".status");e&&(e.innerHTML=t+this.getLoaderDots())}updateLoader(t=""){this.loading.innerHTML=t?t+this.getLoaderDots():""}sendError(t,e){if(this.isMenuHidden())return this.storage.setError(t);if(this.clearErrors(),this.setValidation("validation-error",t),!e)return!1;e.classList.add("field-error"),e.focus();let a=()=>{var l;e.removeEventListener("keypress",a,!1),e.classList.remove("field-error"),(l=document.querySelector(".validation-error"))==null||l.remove()};return e.addEventListener("keypress",a),!1}clearErrors(){var t;(t=document.querySelector(".status"))==null||t.remove(),this.clearValidation(),this.getUsernameField().classList.remove("field-error"),this.getPasswordField().classList.remove("field-error"),this.passwordConfirmation.classList.remove("field-error"),this.emailField.classList.remove("field-error")}toggleLogin(t){this.updateLoader("Connecting"),this.toggleTyping(t),this.loggingIn=t,this.loading.hidden=!t,this.loginButton.disabled=t,this.registerButton.disabled=t}toggleTyping(t){this.getUsernameField().readOnly=t,this.getPasswordField().readOnly=t,this.passwordConfirmation.readOnly=t,this.emailField.readOnly=t}hasFooterOpen(){return this.parchment.classList.contains("about")||this.parchment.classList.contains("credits")}isGuest(){return this.guest.checked}isRememberMe(){return this.rememberMe.checked}isRegistering(){return this.currentScroll==="create-character"}isMenuHidden(){return this.menuHidden}getUsernameField(){return document.querySelector(this.isRegistering()?"#register-name-input":"#login-name-input")}getUsername(){return this.getUsernameField().value}getPasswordField(){return document.querySelector(this.isRegistering()?"#register-password-input":"#login-password-input")}getPassword(){return this.getPasswordField().value}getPasswordConfirmation(){return this.passwordConfirmation.value}getEmail(){return this.isRegistering()?this.emailField.value:""}getLoaderDots(){return'<span class="loader-dot">.</span><span class="loader-dot">.</span><span class="loader-dot">.</span>'}clearValidation(){for(let t of this.validation)t.innerHTML=""}setValidation(t,e=""){this.clearValidation();for(let a of this.validation)a.append(this.createValidation(t,e))}createValidation(t,e=""){let a=document.createElement("span");return a.classList.add(t),a.classList.add("blink"),a.textContent=e,a}onKeyDown(t){this.keyDownCallback=t}onKeyUp(t){this.keyUpCallback=t}onLogin(t){this.loginCallback=t}onLeftClick(t){this.leftClickCallback=t}onRightClick(t){this.rightClickCallback=t}onMouseMove(t){this.mouseMoveCallback=t}onResize(t){this.resizeCallback=t}onRespawn(t){this.respawnCallback=t}}var co=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},_d={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,t){(function(){var e,a="4.17.21",l=200,g="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",p="Expected a function",x="Invalid `variable` option passed into `_.template`",N="__lodash_hash_undefined__",b=500,I="__lodash_placeholder__",U=1,z=2,q=4,G=1,et=2,lt=1,it=2,Nt=4,ft=8,nt=16,gt=32,w=64,ht=128,Xt=256,Lt=512,Et=30,Tt="...",ue=800,Qi=16,tn=1,Qn=2,En=3,Ve=1/0,Pi=9007199254740991,pl=17976931348623157e292,tr=0/0,ce=4294967295,_l=ce-1,Tn=ce>>>1,Lr=[["ary",ht],["bind",lt],["bindKey",it],["curry",ft],["curryRight",nt],["flip",Lt],["partial",gt],["partialRight",w],["rearg",Xt]],en="[object Arguments]",Rr="[object Array]",So="[object AsyncFunction]",Mi="[object Boolean]",Fe="[object Date]",ml="[object DOMException]",Dr="[object Error]",Or="[object Function]",ai="[object GeneratorFunction]",Le="[object Map]",xi="[object Number]",bt="[object Null]",oe="[object Object]",Ma="[object Promise]",kl="[object Proxy]",er="[object RegExp]",je="[object Set]",An="[object String]",Bi="[object Symbol]",Si="[object Undefined]",si="[object WeakMap]",Xn="[object WeakSet]",ir="[object ArrayBuffer]",Ci="[object DataView]",Nr="[object Float32Array]",Pr="[object Float64Array]",Co="[object Int8Array]",zi="[object Int16Array]",nn="[object Int32Array]",Mr="[object Uint8Array]",Br="[object Uint8ClampedArray]",Pe="[object Uint16Array]",Se="[object Uint32Array]",Io=/\b__p \+= '';/g,vl=/\b(__p \+=) '' \+/g,Ba=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Eo=/&(?:amp|lt|gt|quot|#39);/g,rn=/[&<>"']/g,Yn=RegExp(Eo.source),bl=RegExp(rn.source),yl=/<%-([\s\S]+?)%>/g,To=/<%([\s\S]+?)%>/g,nr=/<%=([\s\S]+?)%>/g,xl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sl=/^\w*$/,Cl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zr=/[\\^$.*+?()[\]{}|]/g,Il=RegExp(zr.source),Ao=/^\s+/,za=/\s/,El=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ln=/\{\n\/\* \[wrapped with (.+)\] \*/,Fa=/,? & /,Xo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fr=/[()=,{}\[\]\/\s]/,qa=/\\(\\)?/g,Tl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Rn=/\w*$/,Ha=/^[-+]0x[0-9a-f]+$/i,Ua=/^0b[01]+$/i,Wa=/^\[object .+?Constructor\]$/,$a=/^0o[0-7]+$/i,Al=/^(?:0|[1-9]\d*)$/,Yo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qr=/($^)/,Ga=/['\n\r\u2028\u2029\\]/g,Hr="\\ud800-\\udfff",Za="\\u0300-\\u036f",Va="\\ufe20-\\ufe2f",Lo="\\u20d0-\\u20ff",Ro=Za+Va+Lo,Re="\\u2700-\\u27bf",on="a-z\\xdf-\\xf6\\xf8-\\xff",Ur="\\xac\\xb1\\xd7\\xf7",Xl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Yl="\\u2000-\\u206f",Do=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oo="A-Z\\xc0-\\xd6\\xd8-\\xde",rr="\\ufe0e\\ufe0f",No=Ur+Xl+Yl+Do,Po="['\u2019]",Ll="["+Hr+"]",Ke="["+No+"]",or="["+Ro+"]",Dn="\\d+",Rl="["+Re+"]",ja="["+on+"]",Fi="[^"+Hr+No+Dn+Re+on+Oo+"]",Ii="\\ud83c[\\udffb-\\udfff]",Mo="(?:"+or+"|"+Ii+")",Ka="[^"+Hr+"]",Wr="(?:\\ud83c[\\udde6-\\uddff]){2}",$r="[\\ud800-\\udbff][\\udc00-\\udfff]",wi="["+Oo+"]",Bo="\\u200d",Gr="(?:"+ja+"|"+Fi+")",Dl="(?:"+wi+"|"+Fi+")",zo="(?:"+Po+"(?:d|ll|m|re|s|t|ve))?",Ja="(?:"+Po+"(?:D|LL|M|RE|S|T|VE))?",Qa=Mo+"?",Zr="["+rr+"]?",Ol="(?:"+Bo+"(?:"+[Ka,Wr,$r].join("|")+")"+Zr+Qa+")*",Nl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ts=Zr+Qa+Ol,Ml="(?:"+[Rl,Wr,$r].join("|")+")"+ts,Bl="(?:"+[Ka+or+"?",or,Wr,$r,Ll].join("|")+")",zl=RegExp(Po,"g"),es=RegExp(or,"g"),ar=RegExp(Ii+"(?="+Ii+")|"+Bl+ts,"g"),is=RegExp([wi+"?"+ja+"+"+zo+"(?="+[Ke,wi,"$"].join("|")+")",Dl+"+"+Ja+"(?="+[Ke,wi+Gr,"$"].join("|")+")",wi+"?"+Gr+"+"+zo,wi+"+"+Ja,Pl,Nl,Dn,Ml].join("|"),"g"),Fo=RegExp("["+Bo+Hr+Ro+rr+"]"),ns=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qo=-1,ie={};ie[Nr]=ie[Pr]=ie[Co]=ie[zi]=ie[nn]=ie[Mr]=ie[Br]=ie[Pe]=ie[Se]=!0,ie[en]=ie[Rr]=ie[ir]=ie[Mi]=ie[Ci]=ie[Fe]=ie[Dr]=ie[Or]=ie[Le]=ie[xi]=ie[oe]=ie[er]=ie[je]=ie[An]=ie[si]=!1;var te={};te[en]=te[Rr]=te[ir]=te[Ci]=te[Mi]=te[Fe]=te[Nr]=te[Pr]=te[Co]=te[zi]=te[nn]=te[Le]=te[xi]=te[oe]=te[er]=te[je]=te[An]=te[Bi]=te[Mr]=te[Br]=te[Pe]=te[Se]=!0,te[Dr]=te[Or]=te[si]=!1;var Fl={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},sr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},os={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ho={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ql=parseFloat,Hl=parseInt,as=typeof co=="object"&&co&&co.Object===Object&&co,o=typeof self=="object"&&self&&self.Object===Object&&self,h=as||o||Function("return this")(),d=t&&!t.nodeType&&t,f=d&&!0&&n&&!n.nodeType&&n,c=f&&f.exports===d,m=c&&as.process,v=function(){try{var R=f&&f.require&&f.require("util").types;return R||m&&m.binding&&m.binding("util")}catch{}}(),A=v&&v.isArrayBuffer,X=v&&v.isDate,O=v&&v.isMap,F=v&&v.isRegExp,Q=v&&v.isSet,M=v&&v.isTypedArray;function H(R,W,B){switch(B.length){case 0:return R.call(W);case 1:return R.call(W,B[0]);case 2:return R.call(W,B[0],B[1]);case 3:return R.call(W,B[0],B[1],B[2])}return R.apply(W,B)}function wt(R,W,B,at){for(var It=-1,Bt=R==null?0:R.length;++It<Bt;){var de=R[It];W(at,de,B(de),R)}return at}function _t(R,W){for(var B=-1,at=R==null?0:R.length;++B<at&&W(R[B],B,R)!==!1;);return R}function ct(R,W){for(var B=R==null?0:R.length;B--&&W(R[B],B,R)!==!1;);return R}function ge(R,W){for(var B=-1,at=R==null?0:R.length;++B<at;)if(!W(R[B],B,R))return!1;return!0}function jt(R,W){for(var B=-1,at=R==null?0:R.length,It=0,Bt=[];++B<at;){var de=R[B];W(de,B,R)&&(Bt[It++]=de)}return Bt}function Ce(R,W){var B=R==null?0:R.length;return!!B&&He(R,W,0)>-1}function Wt(R,W,B){for(var at=-1,It=R==null?0:R.length;++at<It;)if(B(W,R[at]))return!0;return!1}function st(R,W){for(var B=-1,at=R==null?0:R.length,It=Array(at);++B<at;)It[B]=W(R[B],B,R);return It}function le(R,W){for(var B=-1,at=W.length,It=R.length;++B<at;)R[It+B]=W[B];return R}function Pt(R,W,B,at){var It=-1,Bt=R==null?0:R.length;for(at&&Bt&&(B=R[++It]);++It<Bt;)B=W(B,R[It],It,R);return B}function re(R,W,B,at){var It=R==null?0:R.length;for(at&&It&&(B=R[--It]);It--;)B=W(B,R[It],It,R);return B}function an(R,W){for(var B=-1,at=R==null?0:R.length;++B<at;)if(W(R[B],B,R))return!0;return!1}var Vr=Ti("length");function qe(R){return R.split("")}function sn(R){return R.match(Xo)||[]}function qi(R,W,B){var at;return B(R,function(It,Bt,de){if(W(It,Bt,de))return at=Bt,!1}),at}function ke(R,W,B,at){for(var It=R.length,Bt=B+(at?1:-1);at?Bt--:++Bt<It;)if(W(R[Bt],Bt,R))return Bt;return-1}function He(R,W,B){return W===W?Kt(R,W,B):ke(R,Ei,B)}function Je(R,W,B,at){for(var It=B-1,Bt=R.length;++It<Bt;)if(at(R[It],W))return It;return-1}function Ei(R){return R!==R}function Uo(R,W){var B=R==null?0:R.length;return B?jr(R,W)/B:tr}function Ti(R){return function(W){return W==null?e:W[R]}}function lr(R){return function(W){return R==null?e:R[W]}}function Ut(R,W,B,at,It){return It(R,function(Bt,de,Zt){B=at?(at=!1,Bt):W(B,Bt,de,Zt)}),B}function ln(R,W){var B=R.length;for(R.sort(W);B--;)R[B]=R[B].value;return R}function jr(R,W){for(var B,at=-1,It=R.length;++at<It;){var Bt=W(R[at]);Bt!==e&&(B=B===e?Bt:B+Bt)}return B}function hr(R,W){for(var B=-1,at=Array(R);++B<R;)at[B]=W(B);return at}function Ul(R,W){return st(W,function(B){return[B,R[B]]})}function dr(R){return R&&R.slice(0,to(R)+1).replace(Ao,"")}function Ue(R){return function(W){return R(W)}}function Kr(R,W){return st(W,function(B){return R[B]})}function fr(R,W){return R.has(W)}function ss(R,W){for(var B=-1,at=R.length;++B<at&&He(W,R[B],0)>-1;);return B}function ls(R,W){for(var B=R.length;B--&&He(W,R[B],0)>-1;);return B}function Jr(R,W){for(var B=R.length,at=0;B--;)R[B]===W&&++at;return at}var Wl=lr(Fl),$l=lr(sr);function Gl(R){return"\\"+Ho[R]}function ur(R,W){return R==null?e:R[W]}function On(R){return Fo.test(R)}function Wo(R){return ns.test(R)}function Ai(R){for(var W,B=[];!(W=R.next()).done;)B.push(W.value);return B}function li(R){var W=-1,B=Array(R.size);return R.forEach(function(at,It){B[++W]=[It,at]}),B}function $o(R,W){return function(B){return R(W(B))}}function Xi(R,W){for(var B=-1,at=R.length,It=0,Bt=[];++B<at;){var de=R[B];(de===W||de===I)&&(R[B]=I,Bt[It++]=B)}return Bt}function gr(R){var W=-1,B=Array(R.size);return R.forEach(function(at){B[++W]=at}),B}function Zl(R){var W=-1,B=Array(R.size);return R.forEach(function(at){B[++W]=[at,at]}),B}function Kt(R,W,B){for(var at=B-1,It=R.length;++at<It;)if(R[at]===W)return at;return-1}function Qr(R,W,B){for(var at=B+1;at--;)if(R[at]===W)return at;return at}function Ie(R){return On(R)?Vl(R):Vr(R)}function he(R){return On(R)?jl(R):qe(R)}function to(R){for(var W=R.length;W--&&za.test(R.charAt(W)););return W}var hs=lr(os);function Vl(R){for(var W=ar.lastIndex=0;ar.test(R);)++W;return W}function jl(R){return R.match(ar)||[]}function ds(R){return R.match(is)||[]}var hn=function R(W){W=W==null?h:Hi.defaults(h.Object(),W,Hi.pick(h,rs));var B=W.Array,at=W.Date,It=W.Error,Bt=W.Function,de=W.Math,Zt=W.Object,Go=W.RegExp,S=W.String,E=W.TypeError,L=B.prototype,$=Bt.prototype,D=Zt.prototype,Z=W["__core-js_shared__"],J=$.toString,K=D.hasOwnProperty,rt=0,kt=function(){var i=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),pt=D.toString,yt=J.call(Zt),Rt=h._,Jt=Go("^"+J.call(K).replace(zr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mt=c?W.Buffer:e,ee=W.Symbol,pe=W.Uint8Array,Me=mt?mt.allocUnsafe:e,Qt=$o(Zt.getPrototypeOf,Zt),Nn=Zt.create,Pn=D.propertyIsEnumerable,Ee=L.splice,Bd=ee?ee.isConcatSpreadable:e,Zo=ee?ee.iterator:e,wr=ee?ee.toStringTag:e,fs=function(){try{var i=kr(Zt,"defineProperty");return i({},"",{}),i}catch{}}(),Mw=W.clearTimeout!==h.clearTimeout&&W.clearTimeout,Bw=at&&at.now!==h.Date.now&&at.now,zw=W.setTimeout!==h.setTimeout&&W.setTimeout,us=de.ceil,gs=de.floor,Kl=Zt.getOwnPropertySymbols,Fw=mt?mt.isBuffer:e,zd=W.isFinite,qw=L.join,Hw=$o(Zt.keys,Zt),ve=de.max,Be=de.min,Uw=at.now,Ww=W.parseInt,Fd=de.random,$w=L.reverse,Jl=kr(W,"DataView"),Vo=kr(W,"Map"),Ql=kr(W,"Promise"),eo=kr(W,"Set"),jo=kr(W,"WeakMap"),Ko=kr(Zt,"create"),ws=jo&&new jo,io={},Gw=vr(Jl),Zw=vr(Vo),Vw=vr(Ql),jw=vr(eo),Kw=vr(jo),cs=ee?ee.prototype:e,Jo=cs?cs.valueOf:e,qd=cs?cs.toString:e;function y(i){if(we(i)&&!At(i)&&!(i instanceof zt)){if(i instanceof ci)return i;if(K.call(i,"__wrapped__"))return Uf(i)}return new ci(i)}var no=function(){function i(){}return function(r){if(!fe(r))return{};if(Nn)return Nn(r);i.prototype=r;var s=new i;return i.prototype=e,s}}();function ps(){}function ci(i,r){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=e}y.templateSettings={escape:yl,evaluate:To,interpolate:nr,variable:"",imports:{_:y}},y.prototype=ps.prototype,y.prototype.constructor=y,ci.prototype=no(ps.prototype),ci.prototype.constructor=ci;function zt(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ce,this.__views__=[]}function Jw(){var i=new zt(this.__wrapped__);return i.__actions__=Qe(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=Qe(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=Qe(this.__views__),i}function Qw(){if(this.__filtered__){var i=new zt(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function tc(){var i=this.__wrapped__.value(),r=this.__dir__,s=At(i),u=r<0,k=s?i.length:0,C=up(0,k,this.__views__),T=C.start,Y=C.end,P=Y-T,V=u?Y:T-1,j=this.__iteratees__,tt=j.length,ot=0,ut=Be(P,this.__takeCount__);if(!s||!u&&k==P&&ut==P)return gf(i,this.__actions__);var St=[];t:for(;P--&&ot<ut;){V+=r;for(var Dt=-1,Ct=i[V];++Dt<tt;){var Mt=j[Dt],Ft=Mt.iteratee,fi=Mt.type,Ge=Ft(Ct);if(fi==Qn)Ct=Ge;else if(!Ge){if(fi==tn)continue t;break t}}St[ot++]=Ct}return St}zt.prototype=no(ps.prototype),zt.prototype.constructor=zt;function cr(i){var r=-1,s=i==null?0:i.length;for(this.clear();++r<s;){var u=i[r];this.set(u[0],u[1])}}function ec(){this.__data__=Ko?Ko(null):{},this.size=0}function ic(i){var r=this.has(i)&&delete this.__data__[i];return this.size-=r?1:0,r}function nc(i){var r=this.__data__;if(Ko){var s=r[i];return s===N?e:s}return K.call(r,i)?r[i]:e}function rc(i){var r=this.__data__;return Ko?r[i]!==e:K.call(r,i)}function oc(i,r){var s=this.__data__;return this.size+=this.has(i)?0:1,s[i]=Ko&&r===e?N:r,this}cr.prototype.clear=ec,cr.prototype.delete=ic,cr.prototype.get=nc,cr.prototype.has=rc,cr.prototype.set=oc;function dn(i){var r=-1,s=i==null?0:i.length;for(this.clear();++r<s;){var u=i[r];this.set(u[0],u[1])}}function ac(){this.__data__=[],this.size=0}function sc(i){var r=this.__data__,s=_s(r,i);if(s<0)return!1;var u=r.length-1;return s==u?r.pop():Ee.call(r,s,1),--this.size,!0}function lc(i){var r=this.__data__,s=_s(r,i);return s<0?e:r[s][1]}function hc(i){return _s(this.__data__,i)>-1}function dc(i,r){var s=this.__data__,u=_s(s,i);return u<0?(++this.size,s.push([i,r])):s[u][1]=r,this}dn.prototype.clear=ac,dn.prototype.delete=sc,dn.prototype.get=lc,dn.prototype.has=hc,dn.prototype.set=dc;function fn(i){var r=-1,s=i==null?0:i.length;for(this.clear();++r<s;){var u=i[r];this.set(u[0],u[1])}}function fc(){this.size=0,this.__data__={hash:new cr,map:new(Vo||dn),string:new cr}}function uc(i){var r=As(this,i).delete(i);return this.size-=r?1:0,r}function gc(i){return As(this,i).get(i)}function wc(i){return As(this,i).has(i)}function cc(i,r){var s=As(this,i),u=s.size;return s.set(i,r),this.size+=s.size==u?0:1,this}fn.prototype.clear=fc,fn.prototype.delete=uc,fn.prototype.get=gc,fn.prototype.has=wc,fn.prototype.set=cc;function pr(i){var r=-1,s=i==null?0:i.length;for(this.__data__=new fn;++r<s;)this.add(i[r])}function pc(i){return this.__data__.set(i,N),this}function _c(i){return this.__data__.has(i)}pr.prototype.add=pr.prototype.push=pc,pr.prototype.has=_c;function Yi(i){var r=this.__data__=new dn(i);this.size=r.size}function mc(){this.__data__=new dn,this.size=0}function kc(i){var r=this.__data__,s=r.delete(i);return this.size=r.size,s}function vc(i){return this.__data__.get(i)}function bc(i){return this.__data__.has(i)}function yc(i,r){var s=this.__data__;if(s instanceof dn){var u=s.__data__;if(!Vo||u.length<l-1)return u.push([i,r]),this.size=++s.size,this;s=this.__data__=new fn(u)}return s.set(i,r),this.size=s.size,this}Yi.prototype.clear=mc,Yi.prototype.delete=kc,Yi.prototype.get=vc,Yi.prototype.has=bc,Yi.prototype.set=yc;function Hd(i,r){var s=At(i),u=!s&&br(i),k=!s&&!u&&qn(i),C=!s&&!u&&!k&&so(i),T=s||u||k||C,Y=T?hr(i.length,S):[],P=Y.length;for(var V in i)(r||K.call(i,V))&&!(T&&(V=="length"||k&&(V=="offset"||V=="parent")||C&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||cn(V,P)))&&Y.push(V);return Y}function Ud(i){var r=i.length;return r?i[dh(0,r-1)]:e}function xc(i,r){return Xs(Qe(i),_r(r,0,i.length))}function Sc(i){return Xs(Qe(i))}function th(i,r,s){(s!==e&&!Li(i[r],s)||s===e&&!(r in i))&&un(i,r,s)}function Qo(i,r,s){var u=i[r];(!(K.call(i,r)&&Li(u,s))||s===e&&!(r in i))&&un(i,r,s)}function _s(i,r){for(var s=i.length;s--;)if(Li(i[s][0],r))return s;return-1}function Cc(i,r,s,u){return Mn(i,function(k,C,T){r(u,k,s(k),T)}),u}function Wd(i,r){return i&&Wi(r,Te(r),i)}function Ic(i,r){return i&&Wi(r,ei(r),i)}function un(i,r,s){r=="__proto__"&&fs?fs(i,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):i[r]=s}function eh(i,r){for(var s=-1,u=r.length,k=B(u),C=i==null;++s<u;)k[s]=C?e:Oh(i,r[s]);return k}function _r(i,r,s){return i===i&&(s!==e&&(i=i<=s?i:s),r!==e&&(i=i>=r?i:r)),i}function pi(i,r,s,u,k,C){var T,Y=r&U,P=r&z,V=r&q;if(s&&(T=k?s(i,u,k,C):s(i)),T!==e)return T;if(!fe(i))return i;var j=At(i);if(j){if(T=wp(i),!Y)return Qe(i,T)}else{var tt=ze(i),ot=tt==Or||tt==ai;if(qn(i))return pf(i,Y);if(tt==oe||tt==en||ot&&!k){if(T=P||ot?{}:Of(i),!Y)return P?np(i,Ic(T,i)):ip(i,Wd(T,i))}else{if(!te[tt])return k?i:{};T=cp(i,tt,Y)}}C||(C=new Yi);var ut=C.get(i);if(ut)return ut;C.set(i,T),du(i)?i.forEach(function(Ct){T.add(pi(Ct,r,s,Ct,i,C))}):lu(i)&&i.forEach(function(Ct,Mt){T.set(Mt,pi(Ct,r,s,Mt,i,C))});var St=V?P?bh:vh:P?ei:Te,Dt=j?e:St(i);return _t(Dt||i,function(Ct,Mt){Dt&&(Mt=Ct,Ct=i[Mt]),Qo(T,Mt,pi(Ct,r,s,Mt,i,C))}),T}function Ec(i){var r=Te(i);return function(s){return $d(s,i,r)}}function $d(i,r,s){var u=s.length;if(i==null)return!u;for(i=Zt(i);u--;){var k=s[u],C=r[k],T=i[k];if(T===e&&!(k in i)||!C(T))return!1}return!0}function Gd(i,r,s){if(typeof i!="function")throw new E(p);return aa(function(){i.apply(e,s)},r)}function ta(i,r,s,u){var k=-1,C=Ce,T=!0,Y=i.length,P=[],V=r.length;if(!Y)return P;s&&(r=st(r,Ue(s))),u?(C=Wt,T=!1):r.length>=l&&(C=fr,T=!1,r=new pr(r));t:for(;++k<Y;){var j=i[k],tt=s==null?j:s(j);if(j=u||j!==0?j:0,T&&tt===tt){for(var ot=V;ot--;)if(r[ot]===tt)continue t;P.push(j)}else C(r,tt,u)||P.push(j)}return P}var Mn=bf(Ui),Zd=bf(nh,!0);function Tc(i,r){var s=!0;return Mn(i,function(u,k,C){return s=!!r(u,k,C),s}),s}function ms(i,r,s){for(var u=-1,k=i.length;++u<k;){var C=i[u],T=r(C);if(T!=null&&(Y===e?T===T&&!di(T):s(T,Y)))var Y=T,P=C}return P}function Ac(i,r,s,u){var k=i.length;for(s=Yt(s),s<0&&(s=-s>k?0:k+s),u=u===e||u>k?k:Yt(u),u<0&&(u+=k),u=s>u?0:uu(u);s<u;)i[s++]=r;return i}function Vd(i,r){var s=[];return Mn(i,function(u,k,C){r(u,k,C)&&s.push(u)}),s}function De(i,r,s,u,k){var C=-1,T=i.length;for(s||(s=_p),k||(k=[]);++C<T;){var Y=i[C];r>0&&s(Y)?r>1?De(Y,r-1,s,u,k):le(k,Y):u||(k[k.length]=Y)}return k}var ih=yf(),jd=yf(!0);function Ui(i,r){return i&&ih(i,r,Te)}function nh(i,r){return i&&jd(i,r,Te)}function ks(i,r){return jt(r,function(s){return pn(i[s])})}function mr(i,r){r=zn(r,i);for(var s=0,u=r.length;i!=null&&s<u;)i=i[$i(r[s++])];return s&&s==u?i:e}function Kd(i,r,s){var u=r(i);return At(i)?u:le(u,s(i))}function We(i){return i==null?i===e?Si:bt:wr&&wr in Zt(i)?fp(i):Sp(i)}function rh(i,r){return i>r}function Xc(i,r){return i!=null&&K.call(i,r)}function Yc(i,r){return i!=null&&r in Zt(i)}function Lc(i,r,s){return i>=Be(r,s)&&i<ve(r,s)}function oh(i,r,s){for(var u=s?Wt:Ce,k=i[0].length,C=i.length,T=C,Y=B(C),P=1/0,V=[];T--;){var j=i[T];T&&r&&(j=st(j,Ue(r))),P=Be(j.length,P),Y[T]=!s&&(r||k>=120&&j.length>=120)?new pr(T&&j):e}j=i[0];var tt=-1,ot=Y[0];t:for(;++tt<k&&V.length<P;){var ut=j[tt],St=r?r(ut):ut;if(ut=s||ut!==0?ut:0,!(ot?fr(ot,St):u(V,St,s))){for(T=C;--T;){var Dt=Y[T];if(!(Dt?fr(Dt,St):u(i[T],St,s)))continue t}ot&&ot.push(St),V.push(ut)}}return V}function Rc(i,r,s,u){return Ui(i,function(k,C,T){r(u,s(k),C,T)}),u}function ea(i,r,s){r=zn(r,i),i=Bf(i,r);var u=i==null?i:i[$i(mi(r))];return u==null?e:H(u,i,s)}function Jd(i){return we(i)&&We(i)==en}function Dc(i){return we(i)&&We(i)==ir}function Oc(i){return we(i)&&We(i)==Fe}function ia(i,r,s,u,k){return i===r?!0:i==null||r==null||!we(i)&&!we(r)?i!==i&&r!==r:Nc(i,r,s,u,ia,k)}function Nc(i,r,s,u,k,C){var T=At(i),Y=At(r),P=T?Rr:ze(i),V=Y?Rr:ze(r);P=P==en?oe:P,V=V==en?oe:V;var j=P==oe,tt=V==oe,ot=P==V;if(ot&&qn(i)){if(!qn(r))return!1;T=!0,j=!1}if(ot&&!j)return C||(C=new Yi),T||so(i)?Lf(i,r,s,u,k,C):hp(i,r,P,s,u,k,C);if(!(s&G)){var ut=j&&K.call(i,"__wrapped__"),St=tt&&K.call(r,"__wrapped__");if(ut||St){var Dt=ut?i.value():i,Ct=St?r.value():r;return C||(C=new Yi),k(Dt,Ct,s,u,C)}}return ot?(C||(C=new Yi),dp(i,r,s,u,k,C)):!1}function Pc(i){return we(i)&&ze(i)==Le}function ah(i,r,s,u){var k=s.length,C=k,T=!u;if(i==null)return!C;for(i=Zt(i);k--;){var Y=s[k];if(T&&Y[2]?Y[1]!==i[Y[0]]:!(Y[0]in i))return!1}for(;++k<C;){Y=s[k];var P=Y[0],V=i[P],j=Y[1];if(T&&Y[2]){if(V===e&&!(P in i))return!1}else{var tt=new Yi;if(u)var ot=u(V,j,P,i,r,tt);if(!(ot===e?ia(j,V,G|et,u,tt):ot))return!1}}return!0}function Qd(i){if(!fe(i)||kp(i))return!1;var r=pn(i)?Jt:Wa;return r.test(vr(i))}function Mc(i){return we(i)&&We(i)==er}function Bc(i){return we(i)&&ze(i)==je}function zc(i){return we(i)&&Ns(i.length)&&!!ie[We(i)]}function tf(i){return typeof i=="function"?i:i==null?ii:typeof i=="object"?At(i)?rf(i[0],i[1]):nf(i):xu(i)}function sh(i){if(!oa(i))return Hw(i);var r=[];for(var s in Zt(i))K.call(i,s)&&s!="constructor"&&r.push(s);return r}function Fc(i){if(!fe(i))return xp(i);var r=oa(i),s=[];for(var u in i)u=="constructor"&&(r||!K.call(i,u))||s.push(u);return s}function lh(i,r){return i<r}function ef(i,r){var s=-1,u=ti(i)?B(i.length):[];return Mn(i,function(k,C,T){u[++s]=r(k,C,T)}),u}function nf(i){var r=xh(i);return r.length==1&&r[0][2]?Pf(r[0][0],r[0][1]):function(s){return s===i||ah(s,i,r)}}function rf(i,r){return Ch(i)&&Nf(r)?Pf($i(i),r):function(s){var u=Oh(s,i);return u===e&&u===r?Nh(s,i):ia(r,u,G|et)}}function vs(i,r,s,u,k){i!==r&&ih(r,function(C,T){if(k||(k=new Yi),fe(C))qc(i,r,T,s,vs,u,k);else{var Y=u?u(Eh(i,T),C,T+"",i,r,k):e;Y===e&&(Y=C),th(i,T,Y)}},ei)}function qc(i,r,s,u,k,C,T){var Y=Eh(i,s),P=Eh(r,s),V=T.get(P);if(V){th(i,s,V);return}var j=C?C(Y,P,s+"",i,r,T):e,tt=j===e;if(tt){var ot=At(P),ut=!ot&&qn(P),St=!ot&&!ut&&so(P);j=P,ot||ut||St?At(Y)?j=Y:_e(Y)?j=Qe(Y):ut?(tt=!1,j=pf(P,!0)):St?(tt=!1,j=_f(P,!0)):j=[]:sa(P)||br(P)?(j=Y,br(Y)?j=gu(Y):(!fe(Y)||pn(Y))&&(j=Of(P))):tt=!1}tt&&(T.set(P,j),k(j,P,u,C,T),T.delete(P)),th(i,s,j)}function of(i,r){var s=i.length;if(!!s)return r+=r<0?s:0,cn(r,s)?i[r]:e}function af(i,r,s){r.length?r=st(r,function(C){return At(C)?function(T){return mr(T,C.length===1?C[0]:C)}:C}):r=[ii];var u=-1;r=st(r,Ue(xt()));var k=ef(i,function(C,T,Y){var P=st(r,function(V){return V(C)});return{criteria:P,index:++u,value:C}});return ln(k,function(C,T){return ep(C,T,s)})}function Hc(i,r){return sf(i,r,function(s,u){return Nh(i,u)})}function sf(i,r,s){for(var u=-1,k=r.length,C={};++u<k;){var T=r[u],Y=mr(i,T);s(Y,T)&&na(C,zn(T,i),Y)}return C}function Uc(i){return function(r){return mr(r,i)}}function hh(i,r,s,u){var k=u?Je:He,C=-1,T=r.length,Y=i;for(i===r&&(r=Qe(r)),s&&(Y=st(i,Ue(s)));++C<T;)for(var P=0,V=r[C],j=s?s(V):V;(P=k(Y,j,P,u))>-1;)Y!==i&&Ee.call(Y,P,1),Ee.call(i,P,1);return i}function lf(i,r){for(var s=i?r.length:0,u=s-1;s--;){var k=r[s];if(s==u||k!==C){var C=k;cn(k)?Ee.call(i,k,1):gh(i,k)}}return i}function dh(i,r){return i+gs(Fd()*(r-i+1))}function Wc(i,r,s,u){for(var k=-1,C=ve(us((r-i)/(s||1)),0),T=B(C);C--;)T[u?C:++k]=i,i+=s;return T}function fh(i,r){var s="";if(!i||r<1||r>Pi)return s;do r%2&&(s+=i),r=gs(r/2),r&&(i+=i);while(r);return s}function Ot(i,r){return Th(Mf(i,r,ii),i+"")}function $c(i){return Ud(lo(i))}function Gc(i,r){var s=lo(i);return Xs(s,_r(r,0,s.length))}function na(i,r,s,u){if(!fe(i))return i;r=zn(r,i);for(var k=-1,C=r.length,T=C-1,Y=i;Y!=null&&++k<C;){var P=$i(r[k]),V=s;if(P==="__proto__"||P==="constructor"||P==="prototype")return i;if(k!=T){var j=Y[P];V=u?u(j,P,Y):e,V===e&&(V=fe(j)?j:cn(r[k+1])?[]:{})}Qo(Y,P,V),Y=Y[P]}return i}var hf=ws?function(i,r){return ws.set(i,r),i}:ii,Zc=fs?function(i,r){return fs(i,"toString",{configurable:!0,enumerable:!1,value:Mh(r),writable:!0})}:ii;function Vc(i){return Xs(lo(i))}function _i(i,r,s){var u=-1,k=i.length;r<0&&(r=-r>k?0:k+r),s=s>k?k:s,s<0&&(s+=k),k=r>s?0:s-r>>>0,r>>>=0;for(var C=B(k);++u<k;)C[u]=i[u+r];return C}function jc(i,r){var s;return Mn(i,function(u,k,C){return s=r(u,k,C),!s}),!!s}function bs(i,r,s){var u=0,k=i==null?u:i.length;if(typeof r=="number"&&r===r&&k<=Tn){for(;u<k;){var C=u+k>>>1,T=i[C];T!==null&&!di(T)&&(s?T<=r:T<r)?u=C+1:k=C}return k}return uh(i,r,ii,s)}function uh(i,r,s,u){var k=0,C=i==null?0:i.length;if(C===0)return 0;r=s(r);for(var T=r!==r,Y=r===null,P=di(r),V=r===e;k<C;){var j=gs((k+C)/2),tt=s(i[j]),ot=tt!==e,ut=tt===null,St=tt===tt,Dt=di(tt);if(T)var Ct=u||St;else V?Ct=St&&(u||ot):Y?Ct=St&&ot&&(u||!ut):P?Ct=St&&ot&&!ut&&(u||!Dt):ut||Dt?Ct=!1:Ct=u?tt<=r:tt<r;Ct?k=j+1:C=j}return Be(C,_l)}function df(i,r){for(var s=-1,u=i.length,k=0,C=[];++s<u;){var T=i[s],Y=r?r(T):T;if(!s||!Li(Y,P)){var P=Y;C[k++]=T===0?0:T}}return C}function ff(i){return typeof i=="number"?i:di(i)?tr:+i}function hi(i){if(typeof i=="string")return i;if(At(i))return st(i,hi)+"";if(di(i))return qd?qd.call(i):"";var r=i+"";return r=="0"&&1/i==-Ve?"-0":r}function Bn(i,r,s){var u=-1,k=Ce,C=i.length,T=!0,Y=[],P=Y;if(s)T=!1,k=Wt;else if(C>=l){var V=r?null:sp(i);if(V)return gr(V);T=!1,k=fr,P=new pr}else P=r?[]:Y;t:for(;++u<C;){var j=i[u],tt=r?r(j):j;if(j=s||j!==0?j:0,T&&tt===tt){for(var ot=P.length;ot--;)if(P[ot]===tt)continue t;r&&P.push(tt),Y.push(j)}else k(P,tt,s)||(P!==Y&&P.push(tt),Y.push(j))}return Y}function gh(i,r){return r=zn(r,i),i=Bf(i,r),i==null||delete i[$i(mi(r))]}function uf(i,r,s,u){return na(i,r,s(mr(i,r)),u)}function ys(i,r,s,u){for(var k=i.length,C=u?k:-1;(u?C--:++C<k)&&r(i[C],C,i););return s?_i(i,u?0:C,u?C+1:k):_i(i,u?C+1:0,u?k:C)}function gf(i,r){var s=i;return s instanceof zt&&(s=s.value()),Pt(r,function(u,k){return k.func.apply(k.thisArg,le([u],k.args))},s)}function wh(i,r,s){var u=i.length;if(u<2)return u?Bn(i[0]):[];for(var k=-1,C=B(u);++k<u;)for(var T=i[k],Y=-1;++Y<u;)Y!=k&&(C[k]=ta(C[k]||T,i[Y],r,s));return Bn(De(C,1),r,s)}function wf(i,r,s){for(var u=-1,k=i.length,C=r.length,T={};++u<k;){var Y=u<C?r[u]:e;s(T,i[u],Y)}return T}function ch(i){return _e(i)?i:[]}function ph(i){return typeof i=="function"?i:ii}function zn(i,r){return At(i)?i:Ch(i,r)?[i]:Hf(Vt(i))}var Kc=Ot;function Fn(i,r,s){var u=i.length;return s=s===e?u:s,!r&&s>=u?i:_i(i,r,s)}var cf=Mw||function(i){return h.clearTimeout(i)};function pf(i,r){if(r)return i.slice();var s=i.length,u=Me?Me(s):new i.constructor(s);return i.copy(u),u}function _h(i){var r=new i.constructor(i.byteLength);return new pe(r).set(new pe(i)),r}function Jc(i,r){var s=r?_h(i.buffer):i.buffer;return new i.constructor(s,i.byteOffset,i.byteLength)}function Qc(i){var r=new i.constructor(i.source,Rn.exec(i));return r.lastIndex=i.lastIndex,r}function tp(i){return Jo?Zt(Jo.call(i)):{}}function _f(i,r){var s=r?_h(i.buffer):i.buffer;return new i.constructor(s,i.byteOffset,i.length)}function mf(i,r){if(i!==r){var s=i!==e,u=i===null,k=i===i,C=di(i),T=r!==e,Y=r===null,P=r===r,V=di(r);if(!Y&&!V&&!C&&i>r||C&&T&&P&&!Y&&!V||u&&T&&P||!s&&P||!k)return 1;if(!u&&!C&&!V&&i<r||V&&s&&k&&!u&&!C||Y&&s&&k||!T&&k||!P)return-1}return 0}function ep(i,r,s){for(var u=-1,k=i.criteria,C=r.criteria,T=k.length,Y=s.length;++u<T;){var P=mf(k[u],C[u]);if(P){if(u>=Y)return P;var V=s[u];return P*(V=="desc"?-1:1)}}return i.index-r.index}function kf(i,r,s,u){for(var k=-1,C=i.length,T=s.length,Y=-1,P=r.length,V=ve(C-T,0),j=B(P+V),tt=!u;++Y<P;)j[Y]=r[Y];for(;++k<T;)(tt||k<C)&&(j[s[k]]=i[k]);for(;V--;)j[Y++]=i[k++];return j}function vf(i,r,s,u){for(var k=-1,C=i.length,T=-1,Y=s.length,P=-1,V=r.length,j=ve(C-Y,0),tt=B(j+V),ot=!u;++k<j;)tt[k]=i[k];for(var ut=k;++P<V;)tt[ut+P]=r[P];for(;++T<Y;)(ot||k<C)&&(tt[ut+s[T]]=i[k++]);return tt}function Qe(i,r){var s=-1,u=i.length;for(r||(r=B(u));++s<u;)r[s]=i[s];return r}function Wi(i,r,s,u){var k=!s;s||(s={});for(var C=-1,T=r.length;++C<T;){var Y=r[C],P=u?u(s[Y],i[Y],Y,s,i):e;P===e&&(P=i[Y]),k?un(s,Y,P):Qo(s,Y,P)}return s}function ip(i,r){return Wi(i,Sh(i),r)}function np(i,r){return Wi(i,Rf(i),r)}function xs(i,r){return function(s,u){var k=At(s)?wt:Cc,C=r?r():{};return k(s,i,xt(u,2),C)}}function ro(i){return Ot(function(r,s){var u=-1,k=s.length,C=k>1?s[k-1]:e,T=k>2?s[2]:e;for(C=i.length>3&&typeof C=="function"?(k--,C):e,T&&$e(s[0],s[1],T)&&(C=k<3?e:C,k=1),r=Zt(r);++u<k;){var Y=s[u];Y&&i(r,Y,u,C)}return r})}function bf(i,r){return function(s,u){if(s==null)return s;if(!ti(s))return i(s,u);for(var k=s.length,C=r?k:-1,T=Zt(s);(r?C--:++C<k)&&u(T[C],C,T)!==!1;);return s}}function yf(i){return function(r,s,u){for(var k=-1,C=Zt(r),T=u(r),Y=T.length;Y--;){var P=T[i?Y:++k];if(s(C[P],P,C)===!1)break}return r}}function rp(i,r,s){var u=r&lt,k=ra(i);function C(){var T=this&&this!==h&&this instanceof C?k:i;return T.apply(u?s:this,arguments)}return C}function xf(i){return function(r){r=Vt(r);var s=On(r)?he(r):e,u=s?s[0]:r.charAt(0),k=s?Fn(s,1).join(""):r.slice(1);return u[i]()+k}}function oo(i){return function(r){return Pt(bu(vu(r).replace(zl,"")),i,"")}}function ra(i){return function(){var r=arguments;switch(r.length){case 0:return new i;case 1:return new i(r[0]);case 2:return new i(r[0],r[1]);case 3:return new i(r[0],r[1],r[2]);case 4:return new i(r[0],r[1],r[2],r[3]);case 5:return new i(r[0],r[1],r[2],r[3],r[4]);case 6:return new i(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new i(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var s=no(i.prototype),u=i.apply(s,r);return fe(u)?u:s}}function op(i,r,s){var u=ra(i);function k(){for(var C=arguments.length,T=B(C),Y=C,P=ao(k);Y--;)T[Y]=arguments[Y];var V=C<3&&T[0]!==P&&T[C-1]!==P?[]:Xi(T,P);if(C-=V.length,C<s)return Tf(i,r,Ss,k.placeholder,e,T,V,e,e,s-C);var j=this&&this!==h&&this instanceof k?u:i;return H(j,this,T)}return k}function Sf(i){return function(r,s,u){var k=Zt(r);if(!ti(r)){var C=xt(s,3);r=Te(r),s=function(Y){return C(k[Y],Y,k)}}var T=i(r,s,u);return T>-1?k[C?r[T]:T]:e}}function Cf(i){return wn(function(r){var s=r.length,u=s,k=ci.prototype.thru;for(i&&r.reverse();u--;){var C=r[u];if(typeof C!="function")throw new E(p);if(k&&!T&&Ts(C)=="wrapper")var T=new ci([],!0)}for(u=T?u:s;++u<s;){C=r[u];var Y=Ts(C),P=Y=="wrapper"?yh(C):e;P&&Ih(P[0])&&P[1]==(ht|ft|gt|Xt)&&!P[4].length&&P[9]==1?T=T[Ts(P[0])].apply(T,P[3]):T=C.length==1&&Ih(C)?T[Y]():T.thru(C)}return function(){var V=arguments,j=V[0];if(T&&V.length==1&&At(j))return T.plant(j).value();for(var tt=0,ot=s?r[tt].apply(this,V):j;++tt<s;)ot=r[tt].call(this,ot);return ot}})}function Ss(i,r,s,u,k,C,T,Y,P,V){var j=r&ht,tt=r&lt,ot=r&it,ut=r&(ft|nt),St=r&Lt,Dt=ot?e:ra(i);function Ct(){for(var Mt=arguments.length,Ft=B(Mt),fi=Mt;fi--;)Ft[fi]=arguments[fi];if(ut)var Ge=ao(Ct),ui=Jr(Ft,Ge);if(u&&(Ft=kf(Ft,u,k,ut)),C&&(Ft=vf(Ft,C,T,ut)),Mt-=ui,ut&&Mt<V){var me=Xi(Ft,Ge);return Tf(i,r,Ss,Ct.placeholder,s,Ft,me,Y,P,V-Mt)}var Ri=tt?s:this,mn=ot?Ri[i]:i;return Mt=Ft.length,Y?Ft=Cp(Ft,Y):St&&Mt>1&&Ft.reverse(),j&&P<Mt&&(Ft.length=P),this&&this!==h&&this instanceof Ct&&(mn=Dt||ra(mn)),mn.apply(Ri,Ft)}return Ct}function If(i,r){return function(s,u){return Rc(s,i,r(u),{})}}function Cs(i,r){return function(s,u){var k;if(s===e&&u===e)return r;if(s!==e&&(k=s),u!==e){if(k===e)return u;typeof s=="string"||typeof u=="string"?(s=hi(s),u=hi(u)):(s=ff(s),u=ff(u)),k=i(s,u)}return k}}function mh(i){return wn(function(r){return r=st(r,Ue(xt())),Ot(function(s){var u=this;return i(r,function(k){return H(k,u,s)})})})}function Is(i,r){r=r===e?" ":hi(r);var s=r.length;if(s<2)return s?fh(r,i):r;var u=fh(r,us(i/Ie(r)));return On(r)?Fn(he(u),0,i).join(""):u.slice(0,i)}function ap(i,r,s,u){var k=r&lt,C=ra(i);function T(){for(var Y=-1,P=arguments.length,V=-1,j=u.length,tt=B(j+P),ot=this&&this!==h&&this instanceof T?C:i;++V<j;)tt[V]=u[V];for(;P--;)tt[V++]=arguments[++Y];return H(ot,k?s:this,tt)}return T}function Ef(i){return function(r,s,u){return u&&typeof u!="number"&&$e(r,s,u)&&(s=u=e),r=_n(r),s===e?(s=r,r=0):s=_n(s),u=u===e?r<s?1:-1:_n(u),Wc(r,s,u,i)}}function Es(i){return function(r,s){return typeof r=="string"&&typeof s=="string"||(r=ki(r),s=ki(s)),i(r,s)}}function Tf(i,r,s,u,k,C,T,Y,P,V){var j=r&ft,tt=j?T:e,ot=j?e:T,ut=j?C:e,St=j?e:C;r|=j?gt:w,r&=~(j?w:gt),r&Nt||(r&=~(lt|it));var Dt=[i,r,k,ut,tt,St,ot,Y,P,V],Ct=s.apply(e,Dt);return Ih(i)&&zf(Ct,Dt),Ct.placeholder=u,Ff(Ct,i,r)}function kh(i){var r=de[i];return function(s,u){if(s=ki(s),u=u==null?0:Be(Yt(u),292),u&&zd(s)){var k=(Vt(s)+"e").split("e"),C=r(k[0]+"e"+(+k[1]+u));return k=(Vt(C)+"e").split("e"),+(k[0]+"e"+(+k[1]-u))}return r(s)}}var sp=eo&&1/gr(new eo([,-0]))[1]==Ve?function(i){return new eo(i)}:Fh;function Af(i){return function(r){var s=ze(r);return s==Le?li(r):s==je?Zl(r):Ul(r,i(r))}}function gn(i,r,s,u,k,C,T,Y){var P=r&it;if(!P&&typeof i!="function")throw new E(p);var V=u?u.length:0;if(V||(r&=~(gt|w),u=k=e),T=T===e?T:ve(Yt(T),0),Y=Y===e?Y:Yt(Y),V-=k?k.length:0,r&w){var j=u,tt=k;u=k=e}var ot=P?e:yh(i),ut=[i,r,s,u,k,j,tt,C,T,Y];if(ot&&yp(ut,ot),i=ut[0],r=ut[1],s=ut[2],u=ut[3],k=ut[4],Y=ut[9]=ut[9]===e?P?0:i.length:ve(ut[9]-V,0),!Y&&r&(ft|nt)&&(r&=~(ft|nt)),!r||r==lt)var St=rp(i,r,s);else r==ft||r==nt?St=op(i,r,Y):(r==gt||r==(lt|gt))&&!k.length?St=ap(i,r,s,u):St=Ss.apply(e,ut);var Dt=ot?hf:zf;return Ff(Dt(St,ut),i,r)}function Xf(i,r,s,u){return i===e||Li(i,D[s])&&!K.call(u,s)?r:i}function Yf(i,r,s,u,k,C){return fe(i)&&fe(r)&&(C.set(r,i),vs(i,r,e,Yf,C),C.delete(r)),i}function lp(i){return sa(i)?e:i}function Lf(i,r,s,u,k,C){var T=s&G,Y=i.length,P=r.length;if(Y!=P&&!(T&&P>Y))return!1;var V=C.get(i),j=C.get(r);if(V&&j)return V==r&&j==i;var tt=-1,ot=!0,ut=s&et?new pr:e;for(C.set(i,r),C.set(r,i);++tt<Y;){var St=i[tt],Dt=r[tt];if(u)var Ct=T?u(Dt,St,tt,r,i,C):u(St,Dt,tt,i,r,C);if(Ct!==e){if(Ct)continue;ot=!1;break}if(ut){if(!an(r,function(Mt,Ft){if(!fr(ut,Ft)&&(St===Mt||k(St,Mt,s,u,C)))return ut.push(Ft)})){ot=!1;break}}else if(!(St===Dt||k(St,Dt,s,u,C))){ot=!1;break}}return C.delete(i),C.delete(r),ot}function hp(i,r,s,u,k,C,T){switch(s){case Ci:if(i.byteLength!=r.byteLength||i.byteOffset!=r.byteOffset)return!1;i=i.buffer,r=r.buffer;case ir:return!(i.byteLength!=r.byteLength||!C(new pe(i),new pe(r)));case Mi:case Fe:case xi:return Li(+i,+r);case Dr:return i.name==r.name&&i.message==r.message;case er:case An:return i==r+"";case Le:var Y=li;case je:var P=u&G;if(Y||(Y=gr),i.size!=r.size&&!P)return!1;var V=T.get(i);if(V)return V==r;u|=et,T.set(i,r);var j=Lf(Y(i),Y(r),u,k,C,T);return T.delete(i),j;case Bi:if(Jo)return Jo.call(i)==Jo.call(r)}return!1}function dp(i,r,s,u,k,C){var T=s&G,Y=vh(i),P=Y.length,V=vh(r),j=V.length;if(P!=j&&!T)return!1;for(var tt=P;tt--;){var ot=Y[tt];if(!(T?ot in r:K.call(r,ot)))return!1}var ut=C.get(i),St=C.get(r);if(ut&&St)return ut==r&&St==i;var Dt=!0;C.set(i,r),C.set(r,i);for(var Ct=T;++tt<P;){ot=Y[tt];var Mt=i[ot],Ft=r[ot];if(u)var fi=T?u(Ft,Mt,ot,r,i,C):u(Mt,Ft,ot,i,r,C);if(!(fi===e?Mt===Ft||k(Mt,Ft,s,u,C):fi)){Dt=!1;break}Ct||(Ct=ot=="constructor")}if(Dt&&!Ct){var Ge=i.constructor,ui=r.constructor;Ge!=ui&&"constructor"in i&&"constructor"in r&&!(typeof Ge=="function"&&Ge instanceof Ge&&typeof ui=="function"&&ui instanceof ui)&&(Dt=!1)}return C.delete(i),C.delete(r),Dt}function wn(i){return Th(Mf(i,e,Gf),i+"")}function vh(i){return Kd(i,Te,Sh)}function bh(i){return Kd(i,ei,Rf)}var yh=ws?function(i){return ws.get(i)}:Fh;function Ts(i){for(var r=i.name+"",s=io[r],u=K.call(io,r)?s.length:0;u--;){var k=s[u],C=k.func;if(C==null||C==i)return k.name}return r}function ao(i){var r=K.call(y,"placeholder")?y:i;return r.placeholder}function xt(){var i=y.iteratee||Bh;return i=i===Bh?tf:i,arguments.length?i(arguments[0],arguments[1]):i}function As(i,r){var s=i.__data__;return mp(r)?s[typeof r=="string"?"string":"hash"]:s.map}function xh(i){for(var r=Te(i),s=r.length;s--;){var u=r[s],k=i[u];r[s]=[u,k,Nf(k)]}return r}function kr(i,r){var s=ur(i,r);return Qd(s)?s:e}function fp(i){var r=K.call(i,wr),s=i[wr];try{i[wr]=e;var u=!0}catch{}var k=pt.call(i);return u&&(r?i[wr]=s:delete i[wr]),k}var Sh=Kl?function(i){return i==null?[]:(i=Zt(i),jt(Kl(i),function(r){return Pn.call(i,r)}))}:qh,Rf=Kl?function(i){for(var r=[];i;)le(r,Sh(i)),i=Qt(i);return r}:qh,ze=We;(Jl&&ze(new Jl(new ArrayBuffer(1)))!=Ci||Vo&&ze(new Vo)!=Le||Ql&&ze(Ql.resolve())!=Ma||eo&&ze(new eo)!=je||jo&&ze(new jo)!=si)&&(ze=function(i){var r=We(i),s=r==oe?i.constructor:e,u=s?vr(s):"";if(u)switch(u){case Gw:return Ci;case Zw:return Le;case Vw:return Ma;case jw:return je;case Kw:return si}return r});function up(i,r,s){for(var u=-1,k=s.length;++u<k;){var C=s[u],T=C.size;switch(C.type){case"drop":i+=T;break;case"dropRight":r-=T;break;case"take":r=Be(r,i+T);break;case"takeRight":i=ve(i,r-T);break}}return{start:i,end:r}}function gp(i){var r=i.match(Ln);return r?r[1].split(Fa):[]}function Df(i,r,s){r=zn(r,i);for(var u=-1,k=r.length,C=!1;++u<k;){var T=$i(r[u]);if(!(C=i!=null&&s(i,T)))break;i=i[T]}return C||++u!=k?C:(k=i==null?0:i.length,!!k&&Ns(k)&&cn(T,k)&&(At(i)||br(i)))}function wp(i){var r=i.length,s=new i.constructor(r);return r&&typeof i[0]=="string"&&K.call(i,"index")&&(s.index=i.index,s.input=i.input),s}function Of(i){return typeof i.constructor=="function"&&!oa(i)?no(Qt(i)):{}}function cp(i,r,s){var u=i.constructor;switch(r){case ir:return _h(i);case Mi:case Fe:return new u(+i);case Ci:return Jc(i,s);case Nr:case Pr:case Co:case zi:case nn:case Mr:case Br:case Pe:case Se:return _f(i,s);case Le:return new u;case xi:case An:return new u(i);case er:return Qc(i);case je:return new u;case Bi:return tp(i)}}function pp(i,r){var s=r.length;if(!s)return i;var u=s-1;return r[u]=(s>1?"& ":"")+r[u],r=r.join(s>2?", ":" "),i.replace(El,`{
/* [wrapped with `+r+`] */
`)}function _p(i){return At(i)||br(i)||!!(Bd&&i&&i[Bd])}function cn(i,r){var s=typeof i;return r=r==null?Pi:r,!!r&&(s=="number"||s!="symbol"&&Al.test(i))&&i>-1&&i%1==0&&i<r}function $e(i,r,s){if(!fe(s))return!1;var u=typeof r;return(u=="number"?ti(s)&&cn(r,s.length):u=="string"&&r in s)?Li(s[r],i):!1}function Ch(i,r){if(At(i))return!1;var s=typeof i;return s=="number"||s=="symbol"||s=="boolean"||i==null||di(i)?!0:Sl.test(i)||!xl.test(i)||r!=null&&i in Zt(r)}function mp(i){var r=typeof i;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?i!=="__proto__":i===null}function Ih(i){var r=Ts(i),s=y[r];if(typeof s!="function"||!(r in zt.prototype))return!1;if(i===s)return!0;var u=yh(s);return!!u&&i===u[0]}function kp(i){return!!kt&&kt in i}var vp=Z?pn:Hh;function oa(i){var r=i&&i.constructor,s=typeof r=="function"&&r.prototype||D;return i===s}function Nf(i){return i===i&&!fe(i)}function Pf(i,r){return function(s){return s==null?!1:s[i]===r&&(r!==e||i in Zt(s))}}function bp(i){var r=Ds(i,function(u){return s.size===b&&s.clear(),u}),s=r.cache;return r}function yp(i,r){var s=i[1],u=r[1],k=s|u,C=k<(lt|it|ht),T=u==ht&&s==ft||u==ht&&s==Xt&&i[7].length<=r[8]||u==(ht|Xt)&&r[7].length<=r[8]&&s==ft;if(!(C||T))return i;u&lt&&(i[2]=r[2],k|=s&lt?0:Nt);var Y=r[3];if(Y){var P=i[3];i[3]=P?kf(P,Y,r[4]):Y,i[4]=P?Xi(i[3],I):r[4]}return Y=r[5],Y&&(P=i[5],i[5]=P?vf(P,Y,r[6]):Y,i[6]=P?Xi(i[5],I):r[6]),Y=r[7],Y&&(i[7]=Y),u&ht&&(i[8]=i[8]==null?r[8]:Be(i[8],r[8])),i[9]==null&&(i[9]=r[9]),i[0]=r[0],i[1]=k,i}function xp(i){var r=[];if(i!=null)for(var s in Zt(i))r.push(s);return r}function Sp(i){return pt.call(i)}function Mf(i,r,s){return r=ve(r===e?i.length-1:r,0),function(){for(var u=arguments,k=-1,C=ve(u.length-r,0),T=B(C);++k<C;)T[k]=u[r+k];k=-1;for(var Y=B(r+1);++k<r;)Y[k]=u[k];return Y[r]=s(T),H(i,this,Y)}}function Bf(i,r){return r.length<2?i:mr(i,_i(r,0,-1))}function Cp(i,r){for(var s=i.length,u=Be(r.length,s),k=Qe(i);u--;){var C=r[u];i[u]=cn(C,s)?k[C]:e}return i}function Eh(i,r){if(!(r==="constructor"&&typeof i[r]=="function")&&r!="__proto__")return i[r]}var zf=qf(hf),aa=zw||function(i,r){return h.setTimeout(i,r)},Th=qf(Zc);function Ff(i,r,s){var u=r+"";return Th(i,pp(u,Ip(gp(u),s)))}function qf(i){var r=0,s=0;return function(){var u=Uw(),k=Qi-(u-s);if(s=u,k>0){if(++r>=ue)return arguments[0]}else r=0;return i.apply(e,arguments)}}function Xs(i,r){var s=-1,u=i.length,k=u-1;for(r=r===e?u:r;++s<r;){var C=dh(s,k),T=i[C];i[C]=i[s],i[s]=T}return i.length=r,i}var Hf=bp(function(i){var r=[];return i.charCodeAt(0)===46&&r.push(""),i.replace(Cl,function(s,u,k,C){r.push(k?C.replace(qa,"$1"):u||s)}),r});function $i(i){if(typeof i=="string"||di(i))return i;var r=i+"";return r=="0"&&1/i==-Ve?"-0":r}function vr(i){if(i!=null){try{return J.call(i)}catch{}try{return i+""}catch{}}return""}function Ip(i,r){return _t(Lr,function(s){var u="_."+s[0];r&s[1]&&!Ce(i,u)&&i.push(u)}),i.sort()}function Uf(i){if(i instanceof zt)return i.clone();var r=new ci(i.__wrapped__,i.__chain__);return r.__actions__=Qe(i.__actions__),r.__index__=i.__index__,r.__values__=i.__values__,r}function Ep(i,r,s){(s?$e(i,r,s):r===e)?r=1:r=ve(Yt(r),0);var u=i==null?0:i.length;if(!u||r<1)return[];for(var k=0,C=0,T=B(us(u/r));k<u;)T[C++]=_i(i,k,k+=r);return T}function Tp(i){for(var r=-1,s=i==null?0:i.length,u=0,k=[];++r<s;){var C=i[r];C&&(k[u++]=C)}return k}function Ap(){var i=arguments.length;if(!i)return[];for(var r=B(i-1),s=arguments[0],u=i;u--;)r[u-1]=arguments[u];return le(At(s)?Qe(s):[s],De(r,1))}var Xp=Ot(function(i,r){return _e(i)?ta(i,De(r,1,_e,!0)):[]}),Yp=Ot(function(i,r){var s=mi(r);return _e(s)&&(s=e),_e(i)?ta(i,De(r,1,_e,!0),xt(s,2)):[]}),Lp=Ot(function(i,r){var s=mi(r);return _e(s)&&(s=e),_e(i)?ta(i,De(r,1,_e,!0),e,s):[]});function Rp(i,r,s){var u=i==null?0:i.length;return u?(r=s||r===e?1:Yt(r),_i(i,r<0?0:r,u)):[]}function Dp(i,r,s){var u=i==null?0:i.length;return u?(r=s||r===e?1:Yt(r),r=u-r,_i(i,0,r<0?0:r)):[]}function Op(i,r){return i&&i.length?ys(i,xt(r,3),!0,!0):[]}function Np(i,r){return i&&i.length?ys(i,xt(r,3),!0):[]}function Pp(i,r,s,u){var k=i==null?0:i.length;return k?(s&&typeof s!="number"&&$e(i,r,s)&&(s=0,u=k),Ac(i,r,s,u)):[]}function Wf(i,r,s){var u=i==null?0:i.length;if(!u)return-1;var k=s==null?0:Yt(s);return k<0&&(k=ve(u+k,0)),ke(i,xt(r,3),k)}function $f(i,r,s){var u=i==null?0:i.length;if(!u)return-1;var k=u-1;return s!==e&&(k=Yt(s),k=s<0?ve(u+k,0):Be(k,u-1)),ke(i,xt(r,3),k,!0)}function Gf(i){var r=i==null?0:i.length;return r?De(i,1):[]}function Mp(i){var r=i==null?0:i.length;return r?De(i,Ve):[]}function Bp(i,r){var s=i==null?0:i.length;return s?(r=r===e?1:Yt(r),De(i,r)):[]}function zp(i){for(var r=-1,s=i==null?0:i.length,u={};++r<s;){var k=i[r];u[k[0]]=k[1]}return u}function Zf(i){return i&&i.length?i[0]:e}function Fp(i,r,s){var u=i==null?0:i.length;if(!u)return-1;var k=s==null?0:Yt(s);return k<0&&(k=ve(u+k,0)),He(i,r,k)}function qp(i){var r=i==null?0:i.length;return r?_i(i,0,-1):[]}var Hp=Ot(function(i){var r=st(i,ch);return r.length&&r[0]===i[0]?oh(r):[]}),Up=Ot(function(i){var r=mi(i),s=st(i,ch);return r===mi(s)?r=e:s.pop(),s.length&&s[0]===i[0]?oh(s,xt(r,2)):[]}),Wp=Ot(function(i){var r=mi(i),s=st(i,ch);return r=typeof r=="function"?r:e,r&&s.pop(),s.length&&s[0]===i[0]?oh(s,e,r):[]});function $p(i,r){return i==null?"":qw.call(i,r)}function mi(i){var r=i==null?0:i.length;return r?i[r-1]:e}function Gp(i,r,s){var u=i==null?0:i.length;if(!u)return-1;var k=u;return s!==e&&(k=Yt(s),k=k<0?ve(u+k,0):Be(k,u-1)),r===r?Qr(i,r,k):ke(i,Ei,k,!0)}function Zp(i,r){return i&&i.length?of(i,Yt(r)):e}var Vp=Ot(Vf);function Vf(i,r){return i&&i.length&&r&&r.length?hh(i,r):i}function jp(i,r,s){return i&&i.length&&r&&r.length?hh(i,r,xt(s,2)):i}function Kp(i,r,s){return i&&i.length&&r&&r.length?hh(i,r,e,s):i}var Jp=wn(function(i,r){var s=i==null?0:i.length,u=eh(i,r);return lf(i,st(r,function(k){return cn(k,s)?+k:k}).sort(mf)),u});function Qp(i,r){var s=[];if(!(i&&i.length))return s;var u=-1,k=[],C=i.length;for(r=xt(r,3);++u<C;){var T=i[u];r(T,u,i)&&(s.push(T),k.push(u))}return lf(i,k),s}function Ah(i){return i==null?i:$w.call(i)}function t0(i,r,s){var u=i==null?0:i.length;return u?(s&&typeof s!="number"&&$e(i,r,s)?(r=0,s=u):(r=r==null?0:Yt(r),s=s===e?u:Yt(s)),_i(i,r,s)):[]}function e0(i,r){return bs(i,r)}function i0(i,r,s){return uh(i,r,xt(s,2))}function n0(i,r){var s=i==null?0:i.length;if(s){var u=bs(i,r);if(u<s&&Li(i[u],r))return u}return-1}function r0(i,r){return bs(i,r,!0)}function o0(i,r,s){return uh(i,r,xt(s,2),!0)}function a0(i,r){var s=i==null?0:i.length;if(s){var u=bs(i,r,!0)-1;if(Li(i[u],r))return u}return-1}function s0(i){return i&&i.length?df(i):[]}function l0(i,r){return i&&i.length?df(i,xt(r,2)):[]}function h0(i){var r=i==null?0:i.length;return r?_i(i,1,r):[]}function d0(i,r,s){return i&&i.length?(r=s||r===e?1:Yt(r),_i(i,0,r<0?0:r)):[]}function f0(i,r,s){var u=i==null?0:i.length;return u?(r=s||r===e?1:Yt(r),r=u-r,_i(i,r<0?0:r,u)):[]}function u0(i,r){return i&&i.length?ys(i,xt(r,3),!1,!0):[]}function g0(i,r){return i&&i.length?ys(i,xt(r,3)):[]}var w0=Ot(function(i){return Bn(De(i,1,_e,!0))}),c0=Ot(function(i){var r=mi(i);return _e(r)&&(r=e),Bn(De(i,1,_e,!0),xt(r,2))}),p0=Ot(function(i){var r=mi(i);return r=typeof r=="function"?r:e,Bn(De(i,1,_e,!0),e,r)});function _0(i){return i&&i.length?Bn(i):[]}function m0(i,r){return i&&i.length?Bn(i,xt(r,2)):[]}function k0(i,r){return r=typeof r=="function"?r:e,i&&i.length?Bn(i,e,r):[]}function Xh(i){if(!(i&&i.length))return[];var r=0;return i=jt(i,function(s){if(_e(s))return r=ve(s.length,r),!0}),hr(r,function(s){return st(i,Ti(s))})}function jf(i,r){if(!(i&&i.length))return[];var s=Xh(i);return r==null?s:st(s,function(u){return H(r,e,u)})}var v0=Ot(function(i,r){return _e(i)?ta(i,r):[]}),b0=Ot(function(i){return wh(jt(i,_e))}),y0=Ot(function(i){var r=mi(i);return _e(r)&&(r=e),wh(jt(i,_e),xt(r,2))}),x0=Ot(function(i){var r=mi(i);return r=typeof r=="function"?r:e,wh(jt(i,_e),e,r)}),S0=Ot(Xh);function C0(i,r){return wf(i||[],r||[],Qo)}function I0(i,r){return wf(i||[],r||[],na)}var E0=Ot(function(i){var r=i.length,s=r>1?i[r-1]:e;return s=typeof s=="function"?(i.pop(),s):e,jf(i,s)});function Kf(i){var r=y(i);return r.__chain__=!0,r}function T0(i,r){return r(i),i}function Ys(i,r){return r(i)}var A0=wn(function(i){var r=i.length,s=r?i[0]:0,u=this.__wrapped__,k=function(C){return eh(C,i)};return r>1||this.__actions__.length||!(u instanceof zt)||!cn(s)?this.thru(k):(u=u.slice(s,+s+(r?1:0)),u.__actions__.push({func:Ys,args:[k],thisArg:e}),new ci(u,this.__chain__).thru(function(C){return r&&!C.length&&C.push(e),C}))});function X0(){return Kf(this)}function Y0(){return new ci(this.value(),this.__chain__)}function L0(){this.__values__===e&&(this.__values__=fu(this.value()));var i=this.__index__>=this.__values__.length,r=i?e:this.__values__[this.__index__++];return{done:i,value:r}}function R0(){return this}function D0(i){for(var r,s=this;s instanceof ps;){var u=Uf(s);u.__index__=0,u.__values__=e,r?k.__wrapped__=u:r=u;var k=u;s=s.__wrapped__}return k.__wrapped__=i,r}function O0(){var i=this.__wrapped__;if(i instanceof zt){var r=i;return this.__actions__.length&&(r=new zt(this)),r=r.reverse(),r.__actions__.push({func:Ys,args:[Ah],thisArg:e}),new ci(r,this.__chain__)}return this.thru(Ah)}function N0(){return gf(this.__wrapped__,this.__actions__)}var P0=xs(function(i,r,s){K.call(i,s)?++i[s]:un(i,s,1)});function M0(i,r,s){var u=At(i)?ge:Tc;return s&&$e(i,r,s)&&(r=e),u(i,xt(r,3))}function B0(i,r){var s=At(i)?jt:Vd;return s(i,xt(r,3))}var z0=Sf(Wf),F0=Sf($f);function q0(i,r){return De(Ls(i,r),1)}function H0(i,r){return De(Ls(i,r),Ve)}function U0(i,r,s){return s=s===e?1:Yt(s),De(Ls(i,r),s)}function Jf(i,r){var s=At(i)?_t:Mn;return s(i,xt(r,3))}function Qf(i,r){var s=At(i)?ct:Zd;return s(i,xt(r,3))}var W0=xs(function(i,r,s){K.call(i,s)?i[s].push(r):un(i,s,[r])});function $0(i,r,s,u){i=ti(i)?i:lo(i),s=s&&!u?Yt(s):0;var k=i.length;return s<0&&(s=ve(k+s,0)),Ps(i)?s<=k&&i.indexOf(r,s)>-1:!!k&&He(i,r,s)>-1}var G0=Ot(function(i,r,s){var u=-1,k=typeof r=="function",C=ti(i)?B(i.length):[];return Mn(i,function(T){C[++u]=k?H(r,T,s):ea(T,r,s)}),C}),Z0=xs(function(i,r,s){un(i,s,r)});function Ls(i,r){var s=At(i)?st:ef;return s(i,xt(r,3))}function V0(i,r,s,u){return i==null?[]:(At(r)||(r=r==null?[]:[r]),s=u?e:s,At(s)||(s=s==null?[]:[s]),af(i,r,s))}var j0=xs(function(i,r,s){i[s?0:1].push(r)},function(){return[[],[]]});function K0(i,r,s){var u=At(i)?Pt:Ut,k=arguments.length<3;return u(i,xt(r,4),s,k,Mn)}function J0(i,r,s){var u=At(i)?re:Ut,k=arguments.length<3;return u(i,xt(r,4),s,k,Zd)}function Q0(i,r){var s=At(i)?jt:Vd;return s(i,Os(xt(r,3)))}function t_(i){var r=At(i)?Ud:$c;return r(i)}function e_(i,r,s){(s?$e(i,r,s):r===e)?r=1:r=Yt(r);var u=At(i)?xc:Gc;return u(i,r)}function i_(i){var r=At(i)?Sc:Vc;return r(i)}function n_(i){if(i==null)return 0;if(ti(i))return Ps(i)?Ie(i):i.length;var r=ze(i);return r==Le||r==je?i.size:sh(i).length}function r_(i,r,s){var u=At(i)?an:jc;return s&&$e(i,r,s)&&(r=e),u(i,xt(r,3))}var o_=Ot(function(i,r){if(i==null)return[];var s=r.length;return s>1&&$e(i,r[0],r[1])?r=[]:s>2&&$e(r[0],r[1],r[2])&&(r=[r[0]]),af(i,De(r,1),[])}),Rs=Bw||function(){return h.Date.now()};function a_(i,r){if(typeof r!="function")throw new E(p);return i=Yt(i),function(){if(--i<1)return r.apply(this,arguments)}}function tu(i,r,s){return r=s?e:r,r=i&&r==null?i.length:r,gn(i,ht,e,e,e,e,r)}function eu(i,r){var s;if(typeof r!="function")throw new E(p);return i=Yt(i),function(){return--i>0&&(s=r.apply(this,arguments)),i<=1&&(r=e),s}}var Yh=Ot(function(i,r,s){var u=lt;if(s.length){var k=Xi(s,ao(Yh));u|=gt}return gn(i,u,r,s,k)}),iu=Ot(function(i,r,s){var u=lt|it;if(s.length){var k=Xi(s,ao(iu));u|=gt}return gn(r,u,i,s,k)});function nu(i,r,s){r=s?e:r;var u=gn(i,ft,e,e,e,e,e,r);return u.placeholder=nu.placeholder,u}function ru(i,r,s){r=s?e:r;var u=gn(i,nt,e,e,e,e,e,r);return u.placeholder=ru.placeholder,u}function ou(i,r,s){var u,k,C,T,Y,P,V=0,j=!1,tt=!1,ot=!0;if(typeof i!="function")throw new E(p);r=ki(r)||0,fe(s)&&(j=!!s.leading,tt="maxWait"in s,C=tt?ve(ki(s.maxWait)||0,r):C,ot="trailing"in s?!!s.trailing:ot);function ut(me){var Ri=u,mn=k;return u=k=e,V=me,T=i.apply(mn,Ri),T}function St(me){return V=me,Y=aa(Mt,r),j?ut(me):T}function Dt(me){var Ri=me-P,mn=me-V,Su=r-Ri;return tt?Be(Su,C-mn):Su}function Ct(me){var Ri=me-P,mn=me-V;return P===e||Ri>=r||Ri<0||tt&&mn>=C}function Mt(){var me=Rs();if(Ct(me))return Ft(me);Y=aa(Mt,Dt(me))}function Ft(me){return Y=e,ot&&u?ut(me):(u=k=e,T)}function fi(){Y!==e&&cf(Y),V=0,u=P=k=Y=e}function Ge(){return Y===e?T:Ft(Rs())}function ui(){var me=Rs(),Ri=Ct(me);if(u=arguments,k=this,P=me,Ri){if(Y===e)return St(P);if(tt)return cf(Y),Y=aa(Mt,r),ut(P)}return Y===e&&(Y=aa(Mt,r)),T}return ui.cancel=fi,ui.flush=Ge,ui}var s_=Ot(function(i,r){return Gd(i,1,r)}),l_=Ot(function(i,r,s){return Gd(i,ki(r)||0,s)});function h_(i){return gn(i,Lt)}function Ds(i,r){if(typeof i!="function"||r!=null&&typeof r!="function")throw new E(p);var s=function(){var u=arguments,k=r?r.apply(this,u):u[0],C=s.cache;if(C.has(k))return C.get(k);var T=i.apply(this,u);return s.cache=C.set(k,T)||C,T};return s.cache=new(Ds.Cache||fn),s}Ds.Cache=fn;function Os(i){if(typeof i!="function")throw new E(p);return function(){var r=arguments;switch(r.length){case 0:return!i.call(this);case 1:return!i.call(this,r[0]);case 2:return!i.call(this,r[0],r[1]);case 3:return!i.call(this,r[0],r[1],r[2])}return!i.apply(this,r)}}function d_(i){return eu(2,i)}var f_=Kc(function(i,r){r=r.length==1&&At(r[0])?st(r[0],Ue(xt())):st(De(r,1),Ue(xt()));var s=r.length;return Ot(function(u){for(var k=-1,C=Be(u.length,s);++k<C;)u[k]=r[k].call(this,u[k]);return H(i,this,u)})}),Lh=Ot(function(i,r){var s=Xi(r,ao(Lh));return gn(i,gt,e,r,s)}),au=Ot(function(i,r){var s=Xi(r,ao(au));return gn(i,w,e,r,s)}),u_=wn(function(i,r){return gn(i,Xt,e,e,e,r)});function g_(i,r){if(typeof i!="function")throw new E(p);return r=r===e?r:Yt(r),Ot(i,r)}function w_(i,r){if(typeof i!="function")throw new E(p);return r=r==null?0:ve(Yt(r),0),Ot(function(s){var u=s[r],k=Fn(s,0,r);return u&&le(k,u),H(i,this,k)})}function c_(i,r,s){var u=!0,k=!0;if(typeof i!="function")throw new E(p);return fe(s)&&(u="leading"in s?!!s.leading:u,k="trailing"in s?!!s.trailing:k),ou(i,r,{leading:u,maxWait:r,trailing:k})}function p_(i){return tu(i,1)}function __(i,r){return Lh(ph(r),i)}function m_(){if(!arguments.length)return[];var i=arguments[0];return At(i)?i:[i]}function k_(i){return pi(i,q)}function v_(i,r){return r=typeof r=="function"?r:e,pi(i,q,r)}function b_(i){return pi(i,U|q)}function y_(i,r){return r=typeof r=="function"?r:e,pi(i,U|q,r)}function x_(i,r){return r==null||$d(i,r,Te(r))}function Li(i,r){return i===r||i!==i&&r!==r}var S_=Es(rh),C_=Es(function(i,r){return i>=r}),br=Jd(function(){return arguments}())?Jd:function(i){return we(i)&&K.call(i,"callee")&&!Pn.call(i,"callee")},At=B.isArray,I_=A?Ue(A):Dc;function ti(i){return i!=null&&Ns(i.length)&&!pn(i)}function _e(i){return we(i)&&ti(i)}function E_(i){return i===!0||i===!1||we(i)&&We(i)==Mi}var qn=Fw||Hh,T_=X?Ue(X):Oc;function A_(i){return we(i)&&i.nodeType===1&&!sa(i)}function X_(i){if(i==null)return!0;if(ti(i)&&(At(i)||typeof i=="string"||typeof i.splice=="function"||qn(i)||so(i)||br(i)))return!i.length;var r=ze(i);if(r==Le||r==je)return!i.size;if(oa(i))return!sh(i).length;for(var s in i)if(K.call(i,s))return!1;return!0}function Y_(i,r){return ia(i,r)}function L_(i,r,s){s=typeof s=="function"?s:e;var u=s?s(i,r):e;return u===e?ia(i,r,e,s):!!u}function Rh(i){if(!we(i))return!1;var r=We(i);return r==Dr||r==ml||typeof i.message=="string"&&typeof i.name=="string"&&!sa(i)}function R_(i){return typeof i=="number"&&zd(i)}function pn(i){if(!fe(i))return!1;var r=We(i);return r==Or||r==ai||r==So||r==kl}function su(i){return typeof i=="number"&&i==Yt(i)}function Ns(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=Pi}function fe(i){var r=typeof i;return i!=null&&(r=="object"||r=="function")}function we(i){return i!=null&&typeof i=="object"}var lu=O?Ue(O):Pc;function D_(i,r){return i===r||ah(i,r,xh(r))}function O_(i,r,s){return s=typeof s=="function"?s:e,ah(i,r,xh(r),s)}function N_(i){return hu(i)&&i!=+i}function P_(i){if(vp(i))throw new It(g);return Qd(i)}function M_(i){return i===null}function B_(i){return i==null}function hu(i){return typeof i=="number"||we(i)&&We(i)==xi}function sa(i){if(!we(i)||We(i)!=oe)return!1;var r=Qt(i);if(r===null)return!0;var s=K.call(r,"constructor")&&r.constructor;return typeof s=="function"&&s instanceof s&&J.call(s)==yt}var Dh=F?Ue(F):Mc;function z_(i){return su(i)&&i>=-Pi&&i<=Pi}var du=Q?Ue(Q):Bc;function Ps(i){return typeof i=="string"||!At(i)&&we(i)&&We(i)==An}function di(i){return typeof i=="symbol"||we(i)&&We(i)==Bi}var so=M?Ue(M):zc;function F_(i){return i===e}function q_(i){return we(i)&&ze(i)==si}function H_(i){return we(i)&&We(i)==Xn}var U_=Es(lh),W_=Es(function(i,r){return i<=r});function fu(i){if(!i)return[];if(ti(i))return Ps(i)?he(i):Qe(i);if(Zo&&i[Zo])return Ai(i[Zo]());var r=ze(i),s=r==Le?li:r==je?gr:lo;return s(i)}function _n(i){if(!i)return i===0?i:0;if(i=ki(i),i===Ve||i===-Ve){var r=i<0?-1:1;return r*pl}return i===i?i:0}function Yt(i){var r=_n(i),s=r%1;return r===r?s?r-s:r:0}function uu(i){return i?_r(Yt(i),0,ce):0}function ki(i){if(typeof i=="number")return i;if(di(i))return tr;if(fe(i)){var r=typeof i.valueOf=="function"?i.valueOf():i;i=fe(r)?r+"":r}if(typeof i!="string")return i===0?i:+i;i=dr(i);var s=Ua.test(i);return s||$a.test(i)?Hl(i.slice(2),s?2:8):Ha.test(i)?tr:+i}function gu(i){return Wi(i,ei(i))}function $_(i){return i?_r(Yt(i),-Pi,Pi):i===0?i:0}function Vt(i){return i==null?"":hi(i)}var G_=ro(function(i,r){if(oa(r)||ti(r)){Wi(r,Te(r),i);return}for(var s in r)K.call(r,s)&&Qo(i,s,r[s])}),wu=ro(function(i,r){Wi(r,ei(r),i)}),Ms=ro(function(i,r,s,u){Wi(r,ei(r),i,u)}),Z_=ro(function(i,r,s,u){Wi(r,Te(r),i,u)}),V_=wn(eh);function j_(i,r){var s=no(i);return r==null?s:Wd(s,r)}var K_=Ot(function(i,r){i=Zt(i);var s=-1,u=r.length,k=u>2?r[2]:e;for(k&&$e(r[0],r[1],k)&&(u=1);++s<u;)for(var C=r[s],T=ei(C),Y=-1,P=T.length;++Y<P;){var V=T[Y],j=i[V];(j===e||Li(j,D[V])&&!K.call(i,V))&&(i[V]=C[V])}return i}),J_=Ot(function(i){return i.push(e,Yf),H(cu,e,i)});function Q_(i,r){return qi(i,xt(r,3),Ui)}function tm(i,r){return qi(i,xt(r,3),nh)}function em(i,r){return i==null?i:ih(i,xt(r,3),ei)}function im(i,r){return i==null?i:jd(i,xt(r,3),ei)}function nm(i,r){return i&&Ui(i,xt(r,3))}function rm(i,r){return i&&nh(i,xt(r,3))}function om(i){return i==null?[]:ks(i,Te(i))}function am(i){return i==null?[]:ks(i,ei(i))}function Oh(i,r,s){var u=i==null?e:mr(i,r);return u===e?s:u}function sm(i,r){return i!=null&&Df(i,r,Xc)}function Nh(i,r){return i!=null&&Df(i,r,Yc)}var lm=If(function(i,r,s){r!=null&&typeof r.toString!="function"&&(r=pt.call(r)),i[r]=s},Mh(ii)),hm=If(function(i,r,s){r!=null&&typeof r.toString!="function"&&(r=pt.call(r)),K.call(i,r)?i[r].push(s):i[r]=[s]},xt),dm=Ot(ea);function Te(i){return ti(i)?Hd(i):sh(i)}function ei(i){return ti(i)?Hd(i,!0):Fc(i)}function fm(i,r){var s={};return r=xt(r,3),Ui(i,function(u,k,C){un(s,r(u,k,C),u)}),s}function um(i,r){var s={};return r=xt(r,3),Ui(i,function(u,k,C){un(s,k,r(u,k,C))}),s}var gm=ro(function(i,r,s){vs(i,r,s)}),cu=ro(function(i,r,s,u){vs(i,r,s,u)}),wm=wn(function(i,r){var s={};if(i==null)return s;var u=!1;r=st(r,function(C){return C=zn(C,i),u||(u=C.length>1),C}),Wi(i,bh(i),s),u&&(s=pi(s,U|z|q,lp));for(var k=r.length;k--;)gh(s,r[k]);return s});function cm(i,r){return pu(i,Os(xt(r)))}var pm=wn(function(i,r){return i==null?{}:Hc(i,r)});function pu(i,r){if(i==null)return{};var s=st(bh(i),function(u){return[u]});return r=xt(r),sf(i,s,function(u,k){return r(u,k[0])})}function _m(i,r,s){r=zn(r,i);var u=-1,k=r.length;for(k||(k=1,i=e);++u<k;){var C=i==null?e:i[$i(r[u])];C===e&&(u=k,C=s),i=pn(C)?C.call(i):C}return i}function mm(i,r,s){return i==null?i:na(i,r,s)}function km(i,r,s,u){return u=typeof u=="function"?u:e,i==null?i:na(i,r,s,u)}var _u=Af(Te),mu=Af(ei);function vm(i,r,s){var u=At(i),k=u||qn(i)||so(i);if(r=xt(r,4),s==null){var C=i&&i.constructor;k?s=u?new C:[]:fe(i)?s=pn(C)?no(Qt(i)):{}:s={}}return(k?_t:Ui)(i,function(T,Y,P){return r(s,T,Y,P)}),s}function bm(i,r){return i==null?!0:gh(i,r)}function ym(i,r,s){return i==null?i:uf(i,r,ph(s))}function xm(i,r,s,u){return u=typeof u=="function"?u:e,i==null?i:uf(i,r,ph(s),u)}function lo(i){return i==null?[]:Kr(i,Te(i))}function Sm(i){return i==null?[]:Kr(i,ei(i))}function Cm(i,r,s){return s===e&&(s=r,r=e),s!==e&&(s=ki(s),s=s===s?s:0),r!==e&&(r=ki(r),r=r===r?r:0),_r(ki(i),r,s)}function Im(i,r,s){return r=_n(r),s===e?(s=r,r=0):s=_n(s),i=ki(i),Lc(i,r,s)}function Em(i,r,s){if(s&&typeof s!="boolean"&&$e(i,r,s)&&(r=s=e),s===e&&(typeof r=="boolean"?(s=r,r=e):typeof i=="boolean"&&(s=i,i=e)),i===e&&r===e?(i=0,r=1):(i=_n(i),r===e?(r=i,i=0):r=_n(r)),i>r){var u=i;i=r,r=u}if(s||i%1||r%1){var k=Fd();return Be(i+k*(r-i+ql("1e-"+((k+"").length-1))),r)}return dh(i,r)}var Tm=oo(function(i,r,s){return r=r.toLowerCase(),i+(s?ku(r):r)});function ku(i){return Ph(Vt(i).toLowerCase())}function vu(i){return i=Vt(i),i&&i.replace(Yo,Wl).replace(es,"")}function Am(i,r,s){i=Vt(i),r=hi(r);var u=i.length;s=s===e?u:_r(Yt(s),0,u);var k=s;return s-=r.length,s>=0&&i.slice(s,k)==r}function Xm(i){return i=Vt(i),i&&bl.test(i)?i.replace(rn,$l):i}function Ym(i){return i=Vt(i),i&&Il.test(i)?i.replace(zr,"\\$&"):i}var Lm=oo(function(i,r,s){return i+(s?"-":"")+r.toLowerCase()}),Rm=oo(function(i,r,s){return i+(s?" ":"")+r.toLowerCase()}),Dm=xf("toLowerCase");function Om(i,r,s){i=Vt(i),r=Yt(r);var u=r?Ie(i):0;if(!r||u>=r)return i;var k=(r-u)/2;return Is(gs(k),s)+i+Is(us(k),s)}function Nm(i,r,s){i=Vt(i),r=Yt(r);var u=r?Ie(i):0;return r&&u<r?i+Is(r-u,s):i}function Pm(i,r,s){i=Vt(i),r=Yt(r);var u=r?Ie(i):0;return r&&u<r?Is(r-u,s)+i:i}function Mm(i,r,s){return s||r==null?r=0:r&&(r=+r),Ww(Vt(i).replace(Ao,""),r||0)}function Bm(i,r,s){return(s?$e(i,r,s):r===e)?r=1:r=Yt(r),fh(Vt(i),r)}function zm(){var i=arguments,r=Vt(i[0]);return i.length<3?r:r.replace(i[1],i[2])}var Fm=oo(function(i,r,s){return i+(s?"_":"")+r.toLowerCase()});function qm(i,r,s){return s&&typeof s!="number"&&$e(i,r,s)&&(r=s=e),s=s===e?ce:s>>>0,s?(i=Vt(i),i&&(typeof r=="string"||r!=null&&!Dh(r))&&(r=hi(r),!r&&On(i))?Fn(he(i),0,s):i.split(r,s)):[]}var Hm=oo(function(i,r,s){return i+(s?" ":"")+Ph(r)});function Um(i,r,s){return i=Vt(i),s=s==null?0:_r(Yt(s),0,i.length),r=hi(r),i.slice(s,s+r.length)==r}function Wm(i,r,s){var u=y.templateSettings;s&&$e(i,r,s)&&(r=e),i=Vt(i),r=Ms({},r,u,Xf);var k=Ms({},r.imports,u.imports,Xf),C=Te(k),T=Kr(k,C),Y,P,V=0,j=r.interpolate||qr,tt="__p += '",ot=Go((r.escape||qr).source+"|"+j.source+"|"+(j===nr?Tl:qr).source+"|"+(r.evaluate||qr).source+"|$","g"),ut="//# sourceURL="+(K.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qo+"]")+`
`;i.replace(ot,function(Ct,Mt,Ft,fi,Ge,ui){return Ft||(Ft=fi),tt+=i.slice(V,ui).replace(Ga,Gl),Mt&&(Y=!0,tt+=`' +
__e(`+Mt+`) +
'`),Ge&&(P=!0,tt+=`';
`+Ge+`;
__p += '`),Ft&&(tt+=`' +
((__t = (`+Ft+`)) == null ? '' : __t) +
'`),V=ui+Ct.length,Ct}),tt+=`';
`;var St=K.call(r,"variable")&&r.variable;if(!St)tt=`with (obj) {
`+tt+`
}
`;else if(Fr.test(St))throw new It(x);tt=(P?tt.replace(Io,""):tt).replace(vl,"$1").replace(Ba,"$1;"),tt="function("+(St||"obj")+`) {
`+(St?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Y?", __e = _.escape":"")+(P?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+tt+`return __p
}`;var Dt=yu(function(){return Bt(C,ut+"return "+tt).apply(e,T)});if(Dt.source=tt,Rh(Dt))throw Dt;return Dt}function $m(i){return Vt(i).toLowerCase()}function Gm(i){return Vt(i).toUpperCase()}function Zm(i,r,s){if(i=Vt(i),i&&(s||r===e))return dr(i);if(!i||!(r=hi(r)))return i;var u=he(i),k=he(r),C=ss(u,k),T=ls(u,k)+1;return Fn(u,C,T).join("")}function Vm(i,r,s){if(i=Vt(i),i&&(s||r===e))return i.slice(0,to(i)+1);if(!i||!(r=hi(r)))return i;var u=he(i),k=ls(u,he(r))+1;return Fn(u,0,k).join("")}function jm(i,r,s){if(i=Vt(i),i&&(s||r===e))return i.replace(Ao,"");if(!i||!(r=hi(r)))return i;var u=he(i),k=ss(u,he(r));return Fn(u,k).join("")}function Km(i,r){var s=Et,u=Tt;if(fe(r)){var k="separator"in r?r.separator:k;s="length"in r?Yt(r.length):s,u="omission"in r?hi(r.omission):u}i=Vt(i);var C=i.length;if(On(i)){var T=he(i);C=T.length}if(s>=C)return i;var Y=s-Ie(u);if(Y<1)return u;var P=T?Fn(T,0,Y).join(""):i.slice(0,Y);if(k===e)return P+u;if(T&&(Y+=P.length-Y),Dh(k)){if(i.slice(Y).search(k)){var V,j=P;for(k.global||(k=Go(k.source,Vt(Rn.exec(k))+"g")),k.lastIndex=0;V=k.exec(j);)var tt=V.index;P=P.slice(0,tt===e?Y:tt)}}else if(i.indexOf(hi(k),Y)!=Y){var ot=P.lastIndexOf(k);ot>-1&&(P=P.slice(0,ot))}return P+u}function Jm(i){return i=Vt(i),i&&Yn.test(i)?i.replace(Eo,hs):i}var Qm=oo(function(i,r,s){return i+(s?" ":"")+r.toUpperCase()}),Ph=xf("toUpperCase");function bu(i,r,s){return i=Vt(i),r=s?e:r,r===e?Wo(i)?ds(i):sn(i):i.match(r)||[]}var yu=Ot(function(i,r){try{return H(i,e,r)}catch(s){return Rh(s)?s:new It(s)}}),t1=wn(function(i,r){return _t(r,function(s){s=$i(s),un(i,s,Yh(i[s],i))}),i});function e1(i){var r=i==null?0:i.length,s=xt();return i=r?st(i,function(u){if(typeof u[1]!="function")throw new E(p);return[s(u[0]),u[1]]}):[],Ot(function(u){for(var k=-1;++k<r;){var C=i[k];if(H(C[0],this,u))return H(C[1],this,u)}})}function i1(i){return Ec(pi(i,U))}function Mh(i){return function(){return i}}function n1(i,r){return i==null||i!==i?r:i}var r1=Cf(),o1=Cf(!0);function ii(i){return i}function Bh(i){return tf(typeof i=="function"?i:pi(i,U))}function a1(i){return nf(pi(i,U))}function s1(i,r){return rf(i,pi(r,U))}var l1=Ot(function(i,r){return function(s){return ea(s,i,r)}}),h1=Ot(function(i,r){return function(s){return ea(i,s,r)}});function zh(i,r,s){var u=Te(r),k=ks(r,u);s==null&&!(fe(r)&&(k.length||!u.length))&&(s=r,r=i,i=this,k=ks(r,Te(r)));var C=!(fe(s)&&"chain"in s)||!!s.chain,T=pn(i);return _t(k,function(Y){var P=r[Y];i[Y]=P,T&&(i.prototype[Y]=function(){var V=this.__chain__;if(C||V){var j=i(this.__wrapped__),tt=j.__actions__=Qe(this.__actions__);return tt.push({func:P,args:arguments,thisArg:i}),j.__chain__=V,j}return P.apply(i,le([this.value()],arguments))})}),i}function d1(){return h._===this&&(h._=Rt),this}function Fh(){}function f1(i){return i=Yt(i),Ot(function(r){return of(r,i)})}var u1=mh(st),g1=mh(ge),w1=mh(an);function xu(i){return Ch(i)?Ti($i(i)):Uc(i)}function c1(i){return function(r){return i==null?e:mr(i,r)}}var p1=Ef(),_1=Ef(!0);function qh(){return[]}function Hh(){return!1}function m1(){return{}}function k1(){return""}function v1(){return!0}function b1(i,r){if(i=Yt(i),i<1||i>Pi)return[];var s=ce,u=Be(i,ce);r=xt(r),i-=ce;for(var k=hr(u,r);++s<i;)r(s);return k}function y1(i){return At(i)?st(i,$i):di(i)?[i]:Qe(Hf(Vt(i)))}function x1(i){var r=++rt;return Vt(i)+r}var S1=Cs(function(i,r){return i+r},0),C1=kh("ceil"),I1=Cs(function(i,r){return i/r},1),E1=kh("floor");function T1(i){return i&&i.length?ms(i,ii,rh):e}function A1(i,r){return i&&i.length?ms(i,xt(r,2),rh):e}function X1(i){return Uo(i,ii)}function Y1(i,r){return Uo(i,xt(r,2))}function L1(i){return i&&i.length?ms(i,ii,lh):e}function R1(i,r){return i&&i.length?ms(i,xt(r,2),lh):e}var D1=Cs(function(i,r){return i*r},1),O1=kh("round"),N1=Cs(function(i,r){return i-r},0);function P1(i){return i&&i.length?jr(i,ii):0}function M1(i,r){return i&&i.length?jr(i,xt(r,2)):0}return y.after=a_,y.ary=tu,y.assign=G_,y.assignIn=wu,y.assignInWith=Ms,y.assignWith=Z_,y.at=V_,y.before=eu,y.bind=Yh,y.bindAll=t1,y.bindKey=iu,y.castArray=m_,y.chain=Kf,y.chunk=Ep,y.compact=Tp,y.concat=Ap,y.cond=e1,y.conforms=i1,y.constant=Mh,y.countBy=P0,y.create=j_,y.curry=nu,y.curryRight=ru,y.debounce=ou,y.defaults=K_,y.defaultsDeep=J_,y.defer=s_,y.delay=l_,y.difference=Xp,y.differenceBy=Yp,y.differenceWith=Lp,y.drop=Rp,y.dropRight=Dp,y.dropRightWhile=Op,y.dropWhile=Np,y.fill=Pp,y.filter=B0,y.flatMap=q0,y.flatMapDeep=H0,y.flatMapDepth=U0,y.flatten=Gf,y.flattenDeep=Mp,y.flattenDepth=Bp,y.flip=h_,y.flow=r1,y.flowRight=o1,y.fromPairs=zp,y.functions=om,y.functionsIn=am,y.groupBy=W0,y.initial=qp,y.intersection=Hp,y.intersectionBy=Up,y.intersectionWith=Wp,y.invert=lm,y.invertBy=hm,y.invokeMap=G0,y.iteratee=Bh,y.keyBy=Z0,y.keys=Te,y.keysIn=ei,y.map=Ls,y.mapKeys=fm,y.mapValues=um,y.matches=a1,y.matchesProperty=s1,y.memoize=Ds,y.merge=gm,y.mergeWith=cu,y.method=l1,y.methodOf=h1,y.mixin=zh,y.negate=Os,y.nthArg=f1,y.omit=wm,y.omitBy=cm,y.once=d_,y.orderBy=V0,y.over=u1,y.overArgs=f_,y.overEvery=g1,y.overSome=w1,y.partial=Lh,y.partialRight=au,y.partition=j0,y.pick=pm,y.pickBy=pu,y.property=xu,y.propertyOf=c1,y.pull=Vp,y.pullAll=Vf,y.pullAllBy=jp,y.pullAllWith=Kp,y.pullAt=Jp,y.range=p1,y.rangeRight=_1,y.rearg=u_,y.reject=Q0,y.remove=Qp,y.rest=g_,y.reverse=Ah,y.sampleSize=e_,y.set=mm,y.setWith=km,y.shuffle=i_,y.slice=t0,y.sortBy=o_,y.sortedUniq=s0,y.sortedUniqBy=l0,y.split=qm,y.spread=w_,y.tail=h0,y.take=d0,y.takeRight=f0,y.takeRightWhile=u0,y.takeWhile=g0,y.tap=T0,y.throttle=c_,y.thru=Ys,y.toArray=fu,y.toPairs=_u,y.toPairsIn=mu,y.toPath=y1,y.toPlainObject=gu,y.transform=vm,y.unary=p_,y.union=w0,y.unionBy=c0,y.unionWith=p0,y.uniq=_0,y.uniqBy=m0,y.uniqWith=k0,y.unset=bm,y.unzip=Xh,y.unzipWith=jf,y.update=ym,y.updateWith=xm,y.values=lo,y.valuesIn=Sm,y.without=v0,y.words=bu,y.wrap=__,y.xor=b0,y.xorBy=y0,y.xorWith=x0,y.zip=S0,y.zipObject=C0,y.zipObjectDeep=I0,y.zipWith=E0,y.entries=_u,y.entriesIn=mu,y.extend=wu,y.extendWith=Ms,zh(y,y),y.add=S1,y.attempt=yu,y.camelCase=Tm,y.capitalize=ku,y.ceil=C1,y.clamp=Cm,y.clone=k_,y.cloneDeep=b_,y.cloneDeepWith=y_,y.cloneWith=v_,y.conformsTo=x_,y.deburr=vu,y.defaultTo=n1,y.divide=I1,y.endsWith=Am,y.eq=Li,y.escape=Xm,y.escapeRegExp=Ym,y.every=M0,y.find=z0,y.findIndex=Wf,y.findKey=Q_,y.findLast=F0,y.findLastIndex=$f,y.findLastKey=tm,y.floor=E1,y.forEach=Jf,y.forEachRight=Qf,y.forIn=em,y.forInRight=im,y.forOwn=nm,y.forOwnRight=rm,y.get=Oh,y.gt=S_,y.gte=C_,y.has=sm,y.hasIn=Nh,y.head=Zf,y.identity=ii,y.includes=$0,y.indexOf=Fp,y.inRange=Im,y.invoke=dm,y.isArguments=br,y.isArray=At,y.isArrayBuffer=I_,y.isArrayLike=ti,y.isArrayLikeObject=_e,y.isBoolean=E_,y.isBuffer=qn,y.isDate=T_,y.isElement=A_,y.isEmpty=X_,y.isEqual=Y_,y.isEqualWith=L_,y.isError=Rh,y.isFinite=R_,y.isFunction=pn,y.isInteger=su,y.isLength=Ns,y.isMap=lu,y.isMatch=D_,y.isMatchWith=O_,y.isNaN=N_,y.isNative=P_,y.isNil=B_,y.isNull=M_,y.isNumber=hu,y.isObject=fe,y.isObjectLike=we,y.isPlainObject=sa,y.isRegExp=Dh,y.isSafeInteger=z_,y.isSet=du,y.isString=Ps,y.isSymbol=di,y.isTypedArray=so,y.isUndefined=F_,y.isWeakMap=q_,y.isWeakSet=H_,y.join=$p,y.kebabCase=Lm,y.last=mi,y.lastIndexOf=Gp,y.lowerCase=Rm,y.lowerFirst=Dm,y.lt=U_,y.lte=W_,y.max=T1,y.maxBy=A1,y.mean=X1,y.meanBy=Y1,y.min=L1,y.minBy=R1,y.stubArray=qh,y.stubFalse=Hh,y.stubObject=m1,y.stubString=k1,y.stubTrue=v1,y.multiply=D1,y.nth=Zp,y.noConflict=d1,y.noop=Fh,y.now=Rs,y.pad=Om,y.padEnd=Nm,y.padStart=Pm,y.parseInt=Mm,y.random=Em,y.reduce=K0,y.reduceRight=J0,y.repeat=Bm,y.replace=zm,y.result=_m,y.round=O1,y.runInContext=R,y.sample=t_,y.size=n_,y.snakeCase=Fm,y.some=r_,y.sortedIndex=e0,y.sortedIndexBy=i0,y.sortedIndexOf=n0,y.sortedLastIndex=r0,y.sortedLastIndexBy=o0,y.sortedLastIndexOf=a0,y.startCase=Hm,y.startsWith=Um,y.subtract=N1,y.sum=P1,y.sumBy=M1,y.template=Wm,y.times=b1,y.toFinite=_n,y.toInteger=Yt,y.toLength=uu,y.toLower=$m,y.toNumber=ki,y.toSafeInteger=$_,y.toString=Vt,y.toUpper=Gm,y.trim=Zm,y.trimEnd=Vm,y.trimStart=jm,y.truncate=Km,y.unescape=Jm,y.uniqueId=x1,y.upperCase=Qm,y.upperFirst=Ph,y.each=Jf,y.eachRight=Qf,y.first=Zf,zh(y,function(){var i={};return Ui(y,function(r,s){K.call(y.prototype,s)||(i[s]=r)}),i}(),{chain:!1}),y.VERSION=a,_t(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){y[i].placeholder=y}),_t(["drop","take"],function(i,r){zt.prototype[i]=function(s){s=s===e?1:ve(Yt(s),0);var u=this.__filtered__&&!r?new zt(this):this.clone();return u.__filtered__?u.__takeCount__=Be(s,u.__takeCount__):u.__views__.push({size:Be(s,ce),type:i+(u.__dir__<0?"Right":"")}),u},zt.prototype[i+"Right"]=function(s){return this.reverse()[i](s).reverse()}}),_t(["filter","map","takeWhile"],function(i,r){var s=r+1,u=s==tn||s==En;zt.prototype[i]=function(k){var C=this.clone();return C.__iteratees__.push({iteratee:xt(k,3),type:s}),C.__filtered__=C.__filtered__||u,C}}),_t(["head","last"],function(i,r){var s="take"+(r?"Right":"");zt.prototype[i]=function(){return this[s](1).value()[0]}}),_t(["initial","tail"],function(i,r){var s="drop"+(r?"":"Right");zt.prototype[i]=function(){return this.__filtered__?new zt(this):this[s](1)}}),zt.prototype.compact=function(){return this.filter(ii)},zt.prototype.find=function(i){return this.filter(i).head()},zt.prototype.findLast=function(i){return this.reverse().find(i)},zt.prototype.invokeMap=Ot(function(i,r){return typeof i=="function"?new zt(this):this.map(function(s){return ea(s,i,r)})}),zt.prototype.reject=function(i){return this.filter(Os(xt(i)))},zt.prototype.slice=function(i,r){i=Yt(i);var s=this;return s.__filtered__&&(i>0||r<0)?new zt(s):(i<0?s=s.takeRight(-i):i&&(s=s.drop(i)),r!==e&&(r=Yt(r),s=r<0?s.dropRight(-r):s.take(r-i)),s)},zt.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},zt.prototype.toArray=function(){return this.take(ce)},Ui(zt.prototype,function(i,r){var s=/^(?:filter|find|map|reject)|While$/.test(r),u=/^(?:head|last)$/.test(r),k=y[u?"take"+(r=="last"?"Right":""):r],C=u||/^find/.test(r);!k||(y.prototype[r]=function(){var T=this.__wrapped__,Y=u?[1]:arguments,P=T instanceof zt,V=Y[0],j=P||At(T),tt=function(Mt){var Ft=k.apply(y,le([Mt],Y));return u&&ot?Ft[0]:Ft};j&&s&&typeof V=="function"&&V.length!=1&&(P=j=!1);var ot=this.__chain__,ut=!!this.__actions__.length,St=C&&!ot,Dt=P&&!ut;if(!C&&j){T=Dt?T:new zt(this);var Ct=i.apply(T,Y);return Ct.__actions__.push({func:Ys,args:[tt],thisArg:e}),new ci(Ct,ot)}return St&&Dt?i.apply(this,Y):(Ct=this.thru(tt),St?u?Ct.value()[0]:Ct.value():Ct)})}),_t(["pop","push","shift","sort","splice","unshift"],function(i){var r=L[i],s=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",u=/^(?:pop|shift)$/.test(i);y.prototype[i]=function(){var k=arguments;if(u&&!this.__chain__){var C=this.value();return r.apply(At(C)?C:[],k)}return this[s](function(T){return r.apply(At(T)?T:[],k)})}}),Ui(zt.prototype,function(i,r){var s=y[r];if(s){var u=s.name+"";K.call(io,u)||(io[u]=[]),io[u].push({name:r,func:s})}}),io[Ss(e,it).name]=[{name:"wrapper",func:e}],zt.prototype.clone=Jw,zt.prototype.reverse=Qw,zt.prototype.value=tc,y.prototype.at=A0,y.prototype.chain=X0,y.prototype.commit=Y0,y.prototype.next=L0,y.prototype.plant=D0,y.prototype.reverse=O0,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=N0,y.prototype.first=y.prototype.head,Zo&&(y.prototype[Zo]=R0),y},Hi=hn();f?((f.exports=Hi)._=Hi,d._=Hi):h._=Hi}).call(co)})(_d,_d.exports);var vt=_d.exports;class e2{constructor(t){this.game=t,this.audibles={},this.format="mp3",this.newSong="",this.music={},this.sounds={}}parse(t,e,a){let{format:l,audibles:g,music:p,sounds:x}=this,N=`/audio/${t}/${e}.${l}`,b=document.createElement("audio"),I=()=>b.removeEventListener("canplaythrough",I,!1);b.addEventListener("canplaythrough",I,!1),b.addEventListener("error",()=>{se.error(`The audible: ${e} could not be loaded - unsupported extension?`),g[e]=null},!1),b.preload="auto",b.setAttribute("autobuffer","true"),b.src=N,b.name=e,b.load(),g[e]=[b],vt.times(a-1,()=>{var U;return(U=g[e])==null?void 0:U.push(b.cloneNode(!0))}),e in p?p[e]=!0:e in x&&(x[e]=!0)}play(t,e){let{game:a,sounds:l}=this;if(!(!this.isEnabled()||a.player.dead)&&!J1())switch(t){case Zi.Music:{this.fadeOut(this.song,()=>this.reset(this.song));let g=this.get(e);if(!g)return;g.volume=0,g.play(),this.fadeIn(g),this.song=g;break}case Zi.SFX:{l[e]||this.parse("sounds",e,4);let g=this.get(e);if(!g)return;g.volume=this.getSFXVolume(),g.play();break}}}playHit(){this.play(Zi.SFX,`hit${ye.randomInt(1,2)}`)}playKill(){this.play(Zi.SFX,`kill${ye.randomInt(1,2)}`)}playHurt(){this.play(Zi.SFX,"hurt")}update(){var p;if(!this.isEnabled()||!this.newSong)return;let{newSong:t,game:e,music:a,audibles:l}=this;if(!t||t===((p=this.song)==null?void 0:p.name))return;let g=this.getMusic(t);if(g){if(e.renderer.mobile?this.reset(this.song):this.fadeSongOut(),g.name in a&&!a[g.name]){this.parse("music",g.name,1);let[x]=l[g.name];x.loop=!0,x.addEventListener("ended",()=>x.play(),!1)}this.play(Zi.Music,g.name)}else e.renderer.mobile?this.reset(this.song):this.fadeSongOut()}fadeIn(t){!t||t.fadingIn||(this.clearFadeOut(t),t.fadingIn=window.setInterval(()=>{t.volume+=.02;let e=this.getMusicVolume();t.volume>=e-.02&&(t.volume=e,this.clearFadeIn(t))},100))}fadeOut(t,e){!t||t.fadingOut||(this.clearFadeIn(t),t.fadingOut=window.setInterval(()=>{t.volume-=.08,t.volume<=.08&&(t.volume=0,e==null||e(t),clearInterval(t.fadingOut))},100))}fadeSongOut(){!this.song||(this.fadeOut(this.song,t=>this.reset(t)),this.song=null)}clearFadeIn(t){t.fadingIn&&(clearInterval(t.fadingIn),t.fadingIn=null)}clearFadeOut(t){t.fadingOut&&(clearInterval(t.fadingOut),t.fadingOut=null)}reset(t){!t||!(t.readyState>0)||(t.pause(),t.currentTime=0)}stop(){!this.song||this.fadeOut(this.song,()=>{this.reset(this.song),this.song=null})}isEnabled(){return this.game.storage.data.settings.soundEnabled}get(t){var l;let{audibles:e}=this;if(!e[t])return;let a=vt.find(e[t],({ended:g,paused:p})=>g||p);return a!=null&&a.ended?a.currentTime=0:a=(l=e[t])==null?void 0:l[0],a}getMusic(t){return{name:t,sound:this.get(t)}}getSFXVolume(){let{storage:t}=this.game;return t?t.data.settings.sfx/100:null}getMusicVolume(){let{storage:t}=this.game;return t?t.data.settings.music/100:null}}var Pg={exports:{}};/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */(function(n){(function(t,e){n.exports=t.document?e(t,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return e(a)}})(typeof window!="undefined"?window:co,function(t,e){var a=[],l=Object.getPrototypeOf,g=a.slice,p=a.flat?function(o){return a.flat.call(o)}:function(o){return a.concat.apply([],o)},x=a.push,N=a.indexOf,b={},I=b.toString,U=b.hasOwnProperty,z=U.toString,q=z.call(Object),G={},et=function(h){return typeof h=="function"&&typeof h.nodeType!="number"&&typeof h.item!="function"},lt=function(h){return h!=null&&h===h.window},it=t.document,Nt={type:!0,src:!0,nonce:!0,noModule:!0};function ft(o,h,d){d=d||it;var f,c,m=d.createElement("script");if(m.text=o,h)for(f in Nt)c=h[f]||h.getAttribute&&h.getAttribute(f),c&&m.setAttribute(f,c);d.head.appendChild(m).parentNode.removeChild(m)}function nt(o){return o==null?o+"":typeof o=="object"||typeof o=="function"?b[I.call(o)]||"object":typeof o}var gt="3.6.0",w=function(o,h){return new w.fn.init(o,h)};w.fn=w.prototype={jquery:gt,constructor:w,length:0,toArray:function(){return g.call(this)},get:function(o){return o==null?g.call(this):o<0?this[o+this.length]:this[o]},pushStack:function(o){var h=w.merge(this.constructor(),o);return h.prevObject=this,h},each:function(o){return w.each(this,o)},map:function(o){return this.pushStack(w.map(this,function(h,d){return o.call(h,d,h)}))},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(o,h){return(h+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(o,h){return h%2}))},eq:function(o){var h=this.length,d=+o+(o<0?h:0);return this.pushStack(d>=0&&d<h?[this[d]]:[])},end:function(){return this.prevObject||this.constructor()},push:x,sort:a.sort,splice:a.splice},w.extend=w.fn.extend=function(){var o,h,d,f,c,m,v=arguments[0]||{},A=1,X=arguments.length,O=!1;for(typeof v=="boolean"&&(O=v,v=arguments[A]||{},A++),typeof v!="object"&&!et(v)&&(v={}),A===X&&(v=this,A--);A<X;A++)if((o=arguments[A])!=null)for(h in o)f=o[h],!(h==="__proto__"||v===f)&&(O&&f&&(w.isPlainObject(f)||(c=Array.isArray(f)))?(d=v[h],c&&!Array.isArray(d)?m=[]:!c&&!w.isPlainObject(d)?m={}:m=d,c=!1,v[h]=w.extend(O,m,f)):f!==void 0&&(v[h]=f));return v},w.extend({expando:"jQuery"+(gt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(o){throw new Error(o)},noop:function(){},isPlainObject:function(o){var h,d;return!o||I.call(o)!=="[object Object]"?!1:(h=l(o),h?(d=U.call(h,"constructor")&&h.constructor,typeof d=="function"&&z.call(d)===q):!0)},isEmptyObject:function(o){var h;for(h in o)return!1;return!0},globalEval:function(o,h,d){ft(o,{nonce:h&&h.nonce},d)},each:function(o,h){var d,f=0;if(ht(o))for(d=o.length;f<d&&h.call(o[f],f,o[f])!==!1;f++);else for(f in o)if(h.call(o[f],f,o[f])===!1)break;return o},makeArray:function(o,h){var d=h||[];return o!=null&&(ht(Object(o))?w.merge(d,typeof o=="string"?[o]:o):x.call(d,o)),d},inArray:function(o,h,d){return h==null?-1:N.call(h,o,d)},merge:function(o,h){for(var d=+h.length,f=0,c=o.length;f<d;f++)o[c++]=h[f];return o.length=c,o},grep:function(o,h,d){for(var f,c=[],m=0,v=o.length,A=!d;m<v;m++)f=!h(o[m],m),f!==A&&c.push(o[m]);return c},map:function(o,h,d){var f,c,m=0,v=[];if(ht(o))for(f=o.length;m<f;m++)c=h(o[m],m,d),c!=null&&v.push(c);else for(m in o)c=h(o[m],m,d),c!=null&&v.push(c);return p(v)},guid:1,support:G}),typeof Symbol=="function"&&(w.fn[Symbol.iterator]=a[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(o,h){b["[object "+h+"]"]=h.toLowerCase()});function ht(o){var h=!!o&&"length"in o&&o.length,d=nt(o);return et(o)||lt(o)?!1:d==="array"||h===0||typeof h=="number"&&h>0&&h-1 in o}var Xt=function(o){var h,d,f,c,m,v,A,X,O,F,Q,M,H,wt,_t,ct,ge,jt,Ce,Wt="sizzle"+1*new Date,st=o.document,le=0,Pt=0,re=Qr(),an=Qr(),Vr=Qr(),qe=Qr(),sn=function(S,E){return S===E&&(Q=!0),0},qi={}.hasOwnProperty,ke=[],He=ke.pop,Je=ke.push,Ei=ke.push,Uo=ke.slice,Ti=function(S,E){for(var L=0,$=S.length;L<$;L++)if(S[L]===E)return L;return-1},lr="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ut="[\\x20\\t\\r\\n\\f]",ln="(?:\\\\[\\da-fA-F]{1,6}"+Ut+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",jr="\\["+Ut+"*("+ln+")(?:"+Ut+"*([*^$|!~]?=)"+Ut+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ln+"))|)"+Ut+"*\\]",hr=":("+ln+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+jr+")*)|.*)\\)|)",Ul=new RegExp(Ut+"+","g"),dr=new RegExp("^"+Ut+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ut+"+$","g"),Ue=new RegExp("^"+Ut+"*,"+Ut+"*"),Kr=new RegExp("^"+Ut+"*([>+~]|"+Ut+")"+Ut+"*"),fr=new RegExp(Ut+"|>"),ss=new RegExp(hr),ls=new RegExp("^"+ln+"$"),Jr={ID:new RegExp("^#("+ln+")"),CLASS:new RegExp("^\\.("+ln+")"),TAG:new RegExp("^("+ln+"|[*])"),ATTR:new RegExp("^"+jr),PSEUDO:new RegExp("^"+hr),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ut+"*(even|odd|(([+-]|)(\\d*)n|)"+Ut+"*(?:([+-]|)"+Ut+"*(\\d+)|))"+Ut+"*\\)|)","i"),bool:new RegExp("^(?:"+lr+")$","i"),needsContext:new RegExp("^"+Ut+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ut+"*((?:-\\d)?\\d*)"+Ut+"*\\)|)(?=[^-]|$)","i")},Wl=/HTML$/i,$l=/^(?:input|select|textarea|button)$/i,Gl=/^h\d$/i,ur=/^[^{]+\{\s*\[native \w/,On=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Wo=/[+~]/,Ai=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ut+"?|\\\\([^\\r\\n\\f])","g"),li=function(S,E){var L="0x"+S.slice(1)-65536;return E||(L<0?String.fromCharCode(L+65536):String.fromCharCode(L>>10|55296,L&1023|56320))},$o=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Xi=function(S,E){return E?S==="\0"?"\uFFFD":S.slice(0,-1)+"\\"+S.charCodeAt(S.length-1).toString(16)+" ":"\\"+S},gr=function(){M()},Zl=B(function(S){return S.disabled===!0&&S.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Ei.apply(ke=Uo.call(st.childNodes),st.childNodes),ke[st.childNodes.length].nodeType}catch{Ei={apply:ke.length?function(E,L){Je.apply(E,Uo.call(L))}:function(E,L){for(var $=E.length,D=0;E[$++]=L[D++];);E.length=$-1}}}function Kt(S,E,L,$){var D,Z,J,K,rt,kt,pt,yt=E&&E.ownerDocument,Rt=E?E.nodeType:9;if(L=L||[],typeof S!="string"||!S||Rt!==1&&Rt!==9&&Rt!==11)return L;if(!$&&(M(E),E=E||H,_t)){if(Rt!==11&&(rt=On.exec(S)))if(D=rt[1]){if(Rt===9)if(J=E.getElementById(D)){if(J.id===D)return L.push(J),L}else return L;else if(yt&&(J=yt.getElementById(D))&&Ce(E,J)&&J.id===D)return L.push(J),L}else{if(rt[2])return Ei.apply(L,E.getElementsByTagName(S)),L;if((D=rt[3])&&d.getElementsByClassName&&E.getElementsByClassName)return Ei.apply(L,E.getElementsByClassName(D)),L}if(d.qsa&&!qe[S+" "]&&(!ct||!ct.test(S))&&(Rt!==1||E.nodeName.toLowerCase()!=="object")){if(pt=S,yt=E,Rt===1&&(fr.test(S)||Kr.test(S))){for(yt=Wo.test(S)&&Hi(E.parentNode)||E,(yt!==E||!d.scope)&&((K=E.getAttribute("id"))?K=K.replace($o,Xi):E.setAttribute("id",K=Wt)),kt=v(S),Z=kt.length;Z--;)kt[Z]=(K?"#"+K:":scope")+" "+W(kt[Z]);pt=kt.join(",")}try{return Ei.apply(L,yt.querySelectorAll(pt)),L}catch{qe(S,!0)}finally{K===Wt&&E.removeAttribute("id")}}}return X(S.replace(dr,"$1"),E,L,$)}function Qr(){var S=[];function E(L,$){return S.push(L+" ")>f.cacheLength&&delete E[S.shift()],E[L+" "]=$}return E}function Ie(S){return S[Wt]=!0,S}function he(S){var E=H.createElement("fieldset");try{return!!S(E)}catch{return!1}finally{E.parentNode&&E.parentNode.removeChild(E),E=null}}function to(S,E){for(var L=S.split("|"),$=L.length;$--;)f.attrHandle[L[$]]=E}function hs(S,E){var L=E&&S,$=L&&S.nodeType===1&&E.nodeType===1&&S.sourceIndex-E.sourceIndex;if($)return $;if(L){for(;L=L.nextSibling;)if(L===E)return-1}return S?1:-1}function Vl(S){return function(E){var L=E.nodeName.toLowerCase();return L==="input"&&E.type===S}}function jl(S){return function(E){var L=E.nodeName.toLowerCase();return(L==="input"||L==="button")&&E.type===S}}function ds(S){return function(E){return"form"in E?E.parentNode&&E.disabled===!1?"label"in E?"label"in E.parentNode?E.parentNode.disabled===S:E.disabled===S:E.isDisabled===S||E.isDisabled!==!S&&Zl(E)===S:E.disabled===S:"label"in E?E.disabled===S:!1}}function hn(S){return Ie(function(E){return E=+E,Ie(function(L,$){for(var D,Z=S([],L.length,E),J=Z.length;J--;)L[D=Z[J]]&&(L[D]=!($[D]=L[D]))})})}function Hi(S){return S&&typeof S.getElementsByTagName!="undefined"&&S}d=Kt.support={},m=Kt.isXML=function(S){var E=S&&S.namespaceURI,L=S&&(S.ownerDocument||S).documentElement;return!Wl.test(E||L&&L.nodeName||"HTML")},M=Kt.setDocument=function(S){var E,L,$=S?S.ownerDocument||S:st;return $==H||$.nodeType!==9||!$.documentElement||(H=$,wt=H.documentElement,_t=!m(H),st!=H&&(L=H.defaultView)&&L.top!==L&&(L.addEventListener?L.addEventListener("unload",gr,!1):L.attachEvent&&L.attachEvent("onunload",gr)),d.scope=he(function(D){return wt.appendChild(D).appendChild(H.createElement("div")),typeof D.querySelectorAll!="undefined"&&!D.querySelectorAll(":scope fieldset div").length}),d.attributes=he(function(D){return D.className="i",!D.getAttribute("className")}),d.getElementsByTagName=he(function(D){return D.appendChild(H.createComment("")),!D.getElementsByTagName("*").length}),d.getElementsByClassName=ur.test(H.getElementsByClassName),d.getById=he(function(D){return wt.appendChild(D).id=Wt,!H.getElementsByName||!H.getElementsByName(Wt).length}),d.getById?(f.filter.ID=function(D){var Z=D.replace(Ai,li);return function(J){return J.getAttribute("id")===Z}},f.find.ID=function(D,Z){if(typeof Z.getElementById!="undefined"&&_t){var J=Z.getElementById(D);return J?[J]:[]}}):(f.filter.ID=function(D){var Z=D.replace(Ai,li);return function(J){var K=typeof J.getAttributeNode!="undefined"&&J.getAttributeNode("id");return K&&K.value===Z}},f.find.ID=function(D,Z){if(typeof Z.getElementById!="undefined"&&_t){var J,K,rt,kt=Z.getElementById(D);if(kt){if(J=kt.getAttributeNode("id"),J&&J.value===D)return[kt];for(rt=Z.getElementsByName(D),K=0;kt=rt[K++];)if(J=kt.getAttributeNode("id"),J&&J.value===D)return[kt]}return[]}}),f.find.TAG=d.getElementsByTagName?function(D,Z){if(typeof Z.getElementsByTagName!="undefined")return Z.getElementsByTagName(D);if(d.qsa)return Z.querySelectorAll(D)}:function(D,Z){var J,K=[],rt=0,kt=Z.getElementsByTagName(D);if(D==="*"){for(;J=kt[rt++];)J.nodeType===1&&K.push(J);return K}return kt},f.find.CLASS=d.getElementsByClassName&&function(D,Z){if(typeof Z.getElementsByClassName!="undefined"&&_t)return Z.getElementsByClassName(D)},ge=[],ct=[],(d.qsa=ur.test(H.querySelectorAll))&&(he(function(D){var Z;wt.appendChild(D).innerHTML="<a id='"+Wt+"'></a><select id='"+Wt+"-\r\\' msallowcapture=''><option selected=''></option></select>",D.querySelectorAll("[msallowcapture^='']").length&&ct.push("[*^$]="+Ut+`*(?:''|"")`),D.querySelectorAll("[selected]").length||ct.push("\\["+Ut+"*(?:value|"+lr+")"),D.querySelectorAll("[id~="+Wt+"-]").length||ct.push("~="),Z=H.createElement("input"),Z.setAttribute("name",""),D.appendChild(Z),D.querySelectorAll("[name='']").length||ct.push("\\["+Ut+"*name"+Ut+"*="+Ut+`*(?:''|"")`),D.querySelectorAll(":checked").length||ct.push(":checked"),D.querySelectorAll("a#"+Wt+"+*").length||ct.push(".#.+[+~]"),D.querySelectorAll("\\\f"),ct.push("[\\r\\n\\f]")}),he(function(D){D.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Z=H.createElement("input");Z.setAttribute("type","hidden"),D.appendChild(Z).setAttribute("name","D"),D.querySelectorAll("[name=d]").length&&ct.push("name"+Ut+"*[*^$|!~]?="),D.querySelectorAll(":enabled").length!==2&&ct.push(":enabled",":disabled"),wt.appendChild(D).disabled=!0,D.querySelectorAll(":disabled").length!==2&&ct.push(":enabled",":disabled"),D.querySelectorAll("*,:x"),ct.push(",.*:")})),(d.matchesSelector=ur.test(jt=wt.matches||wt.webkitMatchesSelector||wt.mozMatchesSelector||wt.oMatchesSelector||wt.msMatchesSelector))&&he(function(D){d.disconnectedMatch=jt.call(D,"*"),jt.call(D,"[s!='']:x"),ge.push("!=",hr)}),ct=ct.length&&new RegExp(ct.join("|")),ge=ge.length&&new RegExp(ge.join("|")),E=ur.test(wt.compareDocumentPosition),Ce=E||ur.test(wt.contains)?function(D,Z){var J=D.nodeType===9?D.documentElement:D,K=Z&&Z.parentNode;return D===K||!!(K&&K.nodeType===1&&(J.contains?J.contains(K):D.compareDocumentPosition&&D.compareDocumentPosition(K)&16))}:function(D,Z){if(Z){for(;Z=Z.parentNode;)if(Z===D)return!0}return!1},sn=E?function(D,Z){if(D===Z)return Q=!0,0;var J=!D.compareDocumentPosition-!Z.compareDocumentPosition;return J||(J=(D.ownerDocument||D)==(Z.ownerDocument||Z)?D.compareDocumentPosition(Z):1,J&1||!d.sortDetached&&Z.compareDocumentPosition(D)===J?D==H||D.ownerDocument==st&&Ce(st,D)?-1:Z==H||Z.ownerDocument==st&&Ce(st,Z)?1:F?Ti(F,D)-Ti(F,Z):0:J&4?-1:1)}:function(D,Z){if(D===Z)return Q=!0,0;var J,K=0,rt=D.parentNode,kt=Z.parentNode,pt=[D],yt=[Z];if(!rt||!kt)return D==H?-1:Z==H?1:rt?-1:kt?1:F?Ti(F,D)-Ti(F,Z):0;if(rt===kt)return hs(D,Z);for(J=D;J=J.parentNode;)pt.unshift(J);for(J=Z;J=J.parentNode;)yt.unshift(J);for(;pt[K]===yt[K];)K++;return K?hs(pt[K],yt[K]):pt[K]==st?-1:yt[K]==st?1:0}),H},Kt.matches=function(S,E){return Kt(S,null,null,E)},Kt.matchesSelector=function(S,E){if(M(S),d.matchesSelector&&_t&&!qe[E+" "]&&(!ge||!ge.test(E))&&(!ct||!ct.test(E)))try{var L=jt.call(S,E);if(L||d.disconnectedMatch||S.document&&S.document.nodeType!==11)return L}catch{qe(E,!0)}return Kt(E,H,null,[S]).length>0},Kt.contains=function(S,E){return(S.ownerDocument||S)!=H&&M(S),Ce(S,E)},Kt.attr=function(S,E){(S.ownerDocument||S)!=H&&M(S);var L=f.attrHandle[E.toLowerCase()],$=L&&qi.call(f.attrHandle,E.toLowerCase())?L(S,E,!_t):void 0;return $!==void 0?$:d.attributes||!_t?S.getAttribute(E):($=S.getAttributeNode(E))&&$.specified?$.value:null},Kt.escape=function(S){return(S+"").replace($o,Xi)},Kt.error=function(S){throw new Error("Syntax error, unrecognized expression: "+S)},Kt.uniqueSort=function(S){var E,L=[],$=0,D=0;if(Q=!d.detectDuplicates,F=!d.sortStable&&S.slice(0),S.sort(sn),Q){for(;E=S[D++];)E===S[D]&&($=L.push(D));for(;$--;)S.splice(L[$],1)}return F=null,S},c=Kt.getText=function(S){var E,L="",$=0,D=S.nodeType;if(D){if(D===1||D===9||D===11){if(typeof S.textContent=="string")return S.textContent;for(S=S.firstChild;S;S=S.nextSibling)L+=c(S)}else if(D===3||D===4)return S.nodeValue}else for(;E=S[$++];)L+=c(E);return L},f=Kt.selectors={cacheLength:50,createPseudo:Ie,match:Jr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(S){return S[1]=S[1].replace(Ai,li),S[3]=(S[3]||S[4]||S[5]||"").replace(Ai,li),S[2]==="~="&&(S[3]=" "+S[3]+" "),S.slice(0,4)},CHILD:function(S){return S[1]=S[1].toLowerCase(),S[1].slice(0,3)==="nth"?(S[3]||Kt.error(S[0]),S[4]=+(S[4]?S[5]+(S[6]||1):2*(S[3]==="even"||S[3]==="odd")),S[5]=+(S[7]+S[8]||S[3]==="odd")):S[3]&&Kt.error(S[0]),S},PSEUDO:function(S){var E,L=!S[6]&&S[2];return Jr.CHILD.test(S[0])?null:(S[3]?S[2]=S[4]||S[5]||"":L&&ss.test(L)&&(E=v(L,!0))&&(E=L.indexOf(")",L.length-E)-L.length)&&(S[0]=S[0].slice(0,E),S[2]=L.slice(0,E)),S.slice(0,3))}},filter:{TAG:function(S){var E=S.replace(Ai,li).toLowerCase();return S==="*"?function(){return!0}:function(L){return L.nodeName&&L.nodeName.toLowerCase()===E}},CLASS:function(S){var E=re[S+" "];return E||(E=new RegExp("(^|"+Ut+")"+S+"("+Ut+"|$)"))&&re(S,function(L){return E.test(typeof L.className=="string"&&L.className||typeof L.getAttribute!="undefined"&&L.getAttribute("class")||"")})},ATTR:function(S,E,L){return function($){var D=Kt.attr($,S);return D==null?E==="!=":E?(D+="",E==="="?D===L:E==="!="?D!==L:E==="^="?L&&D.indexOf(L)===0:E==="*="?L&&D.indexOf(L)>-1:E==="$="?L&&D.slice(-L.length)===L:E==="~="?(" "+D.replace(Ul," ")+" ").indexOf(L)>-1:E==="|="?D===L||D.slice(0,L.length+1)===L+"-":!1):!0}},CHILD:function(S,E,L,$,D){var Z=S.slice(0,3)!=="nth",J=S.slice(-4)!=="last",K=E==="of-type";return $===1&&D===0?function(rt){return!!rt.parentNode}:function(rt,kt,pt){var yt,Rt,Jt,mt,ee,pe,Me=Z!==J?"nextSibling":"previousSibling",Qt=rt.parentNode,Nn=K&&rt.nodeName.toLowerCase(),Pn=!pt&&!K,Ee=!1;if(Qt){if(Z){for(;Me;){for(mt=rt;mt=mt[Me];)if(K?mt.nodeName.toLowerCase()===Nn:mt.nodeType===1)return!1;pe=Me=S==="only"&&!pe&&"nextSibling"}return!0}if(pe=[J?Qt.firstChild:Qt.lastChild],J&&Pn){for(mt=Qt,Jt=mt[Wt]||(mt[Wt]={}),Rt=Jt[mt.uniqueID]||(Jt[mt.uniqueID]={}),yt=Rt[S]||[],ee=yt[0]===le&&yt[1],Ee=ee&&yt[2],mt=ee&&Qt.childNodes[ee];mt=++ee&&mt&&mt[Me]||(Ee=ee=0)||pe.pop();)if(mt.nodeType===1&&++Ee&&mt===rt){Rt[S]=[le,ee,Ee];break}}else if(Pn&&(mt=rt,Jt=mt[Wt]||(mt[Wt]={}),Rt=Jt[mt.uniqueID]||(Jt[mt.uniqueID]={}),yt=Rt[S]||[],ee=yt[0]===le&&yt[1],Ee=ee),Ee===!1)for(;(mt=++ee&&mt&&mt[Me]||(Ee=ee=0)||pe.pop())&&!((K?mt.nodeName.toLowerCase()===Nn:mt.nodeType===1)&&++Ee&&(Pn&&(Jt=mt[Wt]||(mt[Wt]={}),Rt=Jt[mt.uniqueID]||(Jt[mt.uniqueID]={}),Rt[S]=[le,Ee]),mt===rt)););return Ee-=D,Ee===$||Ee%$===0&&Ee/$>=0}}},PSEUDO:function(S,E){var L,$=f.pseudos[S]||f.setFilters[S.toLowerCase()]||Kt.error("unsupported pseudo: "+S);return $[Wt]?$(E):$.length>1?(L=[S,S,"",E],f.setFilters.hasOwnProperty(S.toLowerCase())?Ie(function(D,Z){for(var J,K=$(D,E),rt=K.length;rt--;)J=Ti(D,K[rt]),D[J]=!(Z[J]=K[rt])}):function(D){return $(D,0,L)}):$}},pseudos:{not:Ie(function(S){var E=[],L=[],$=A(S.replace(dr,"$1"));return $[Wt]?Ie(function(D,Z,J,K){for(var rt,kt=$(D,null,K,[]),pt=D.length;pt--;)(rt=kt[pt])&&(D[pt]=!(Z[pt]=rt))}):function(D,Z,J){return E[0]=D,$(E,null,J,L),E[0]=null,!L.pop()}}),has:Ie(function(S){return function(E){return Kt(S,E).length>0}}),contains:Ie(function(S){return S=S.replace(Ai,li),function(E){return(E.textContent||c(E)).indexOf(S)>-1}}),lang:Ie(function(S){return ls.test(S||"")||Kt.error("unsupported lang: "+S),S=S.replace(Ai,li).toLowerCase(),function(E){var L;do if(L=_t?E.lang:E.getAttribute("xml:lang")||E.getAttribute("lang"))return L=L.toLowerCase(),L===S||L.indexOf(S+"-")===0;while((E=E.parentNode)&&E.nodeType===1);return!1}}),target:function(S){var E=o.location&&o.location.hash;return E&&E.slice(1)===S.id},root:function(S){return S===wt},focus:function(S){return S===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(S.type||S.href||~S.tabIndex)},enabled:ds(!1),disabled:ds(!0),checked:function(S){var E=S.nodeName.toLowerCase();return E==="input"&&!!S.checked||E==="option"&&!!S.selected},selected:function(S){return S.parentNode&&S.parentNode.selectedIndex,S.selected===!0},empty:function(S){for(S=S.firstChild;S;S=S.nextSibling)if(S.nodeType<6)return!1;return!0},parent:function(S){return!f.pseudos.empty(S)},header:function(S){return Gl.test(S.nodeName)},input:function(S){return $l.test(S.nodeName)},button:function(S){var E=S.nodeName.toLowerCase();return E==="input"&&S.type==="button"||E==="button"},text:function(S){var E;return S.nodeName.toLowerCase()==="input"&&S.type==="text"&&((E=S.getAttribute("type"))==null||E.toLowerCase()==="text")},first:hn(function(){return[0]}),last:hn(function(S,E){return[E-1]}),eq:hn(function(S,E,L){return[L<0?L+E:L]}),even:hn(function(S,E){for(var L=0;L<E;L+=2)S.push(L);return S}),odd:hn(function(S,E){for(var L=1;L<E;L+=2)S.push(L);return S}),lt:hn(function(S,E,L){for(var $=L<0?L+E:L>E?E:L;--$>=0;)S.push($);return S}),gt:hn(function(S,E,L){for(var $=L<0?L+E:L;++$<E;)S.push($);return S})}},f.pseudos.nth=f.pseudos.eq;for(h in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})f.pseudos[h]=Vl(h);for(h in{submit:!0,reset:!0})f.pseudos[h]=jl(h);function R(){}R.prototype=f.filters=f.pseudos,f.setFilters=new R,v=Kt.tokenize=function(S,E){var L,$,D,Z,J,K,rt,kt=an[S+" "];if(kt)return E?0:kt.slice(0);for(J=S,K=[],rt=f.preFilter;J;){(!L||($=Ue.exec(J)))&&($&&(J=J.slice($[0].length)||J),K.push(D=[])),L=!1,($=Kr.exec(J))&&(L=$.shift(),D.push({value:L,type:$[0].replace(dr," ")}),J=J.slice(L.length));for(Z in f.filter)($=Jr[Z].exec(J))&&(!rt[Z]||($=rt[Z]($)))&&(L=$.shift(),D.push({value:L,type:Z,matches:$}),J=J.slice(L.length));if(!L)break}return E?J.length:J?Kt.error(S):an(S,K).slice(0)};function W(S){for(var E=0,L=S.length,$="";E<L;E++)$+=S[E].value;return $}function B(S,E,L){var $=E.dir,D=E.next,Z=D||$,J=L&&Z==="parentNode",K=Pt++;return E.first?function(rt,kt,pt){for(;rt=rt[$];)if(rt.nodeType===1||J)return S(rt,kt,pt);return!1}:function(rt,kt,pt){var yt,Rt,Jt,mt=[le,K];if(pt){for(;rt=rt[$];)if((rt.nodeType===1||J)&&S(rt,kt,pt))return!0}else for(;rt=rt[$];)if(rt.nodeType===1||J)if(Jt=rt[Wt]||(rt[Wt]={}),Rt=Jt[rt.uniqueID]||(Jt[rt.uniqueID]={}),D&&D===rt.nodeName.toLowerCase())rt=rt[$]||rt;else{if((yt=Rt[Z])&&yt[0]===le&&yt[1]===K)return mt[2]=yt[2];if(Rt[Z]=mt,mt[2]=S(rt,kt,pt))return!0}return!1}}function at(S){return S.length>1?function(E,L,$){for(var D=S.length;D--;)if(!S[D](E,L,$))return!1;return!0}:S[0]}function It(S,E,L){for(var $=0,D=E.length;$<D;$++)Kt(S,E[$],L);return L}function Bt(S,E,L,$,D){for(var Z,J=[],K=0,rt=S.length,kt=E!=null;K<rt;K++)(Z=S[K])&&(!L||L(Z,$,D))&&(J.push(Z),kt&&E.push(K));return J}function de(S,E,L,$,D,Z){return $&&!$[Wt]&&($=de($)),D&&!D[Wt]&&(D=de(D,Z)),Ie(function(J,K,rt,kt){var pt,yt,Rt,Jt=[],mt=[],ee=K.length,pe=J||It(E||"*",rt.nodeType?[rt]:rt,[]),Me=S&&(J||!E)?Bt(pe,Jt,S,rt,kt):pe,Qt=L?D||(J?S:ee||$)?[]:K:Me;if(L&&L(Me,Qt,rt,kt),$)for(pt=Bt(Qt,mt),$(pt,[],rt,kt),yt=pt.length;yt--;)(Rt=pt[yt])&&(Qt[mt[yt]]=!(Me[mt[yt]]=Rt));if(J){if(D||S){if(D){for(pt=[],yt=Qt.length;yt--;)(Rt=Qt[yt])&&pt.push(Me[yt]=Rt);D(null,Qt=[],pt,kt)}for(yt=Qt.length;yt--;)(Rt=Qt[yt])&&(pt=D?Ti(J,Rt):Jt[yt])>-1&&(J[pt]=!(K[pt]=Rt))}}else Qt=Bt(Qt===K?Qt.splice(ee,Qt.length):Qt),D?D(null,K,Qt,kt):Ei.apply(K,Qt)})}function Zt(S){for(var E,L,$,D=S.length,Z=f.relative[S[0].type],J=Z||f.relative[" "],K=Z?1:0,rt=B(function(yt){return yt===E},J,!0),kt=B(function(yt){return Ti(E,yt)>-1},J,!0),pt=[function(yt,Rt,Jt){var mt=!Z&&(Jt||Rt!==O)||((E=Rt).nodeType?rt(yt,Rt,Jt):kt(yt,Rt,Jt));return E=null,mt}];K<D;K++)if(L=f.relative[S[K].type])pt=[B(at(pt),L)];else{if(L=f.filter[S[K].type].apply(null,S[K].matches),L[Wt]){for($=++K;$<D&&!f.relative[S[$].type];$++);return de(K>1&&at(pt),K>1&&W(S.slice(0,K-1).concat({value:S[K-2].type===" "?"*":""})).replace(dr,"$1"),L,K<$&&Zt(S.slice(K,$)),$<D&&Zt(S=S.slice($)),$<D&&W(S))}pt.push(L)}return at(pt)}function Go(S,E){var L=E.length>0,$=S.length>0,D=function(Z,J,K,rt,kt){var pt,yt,Rt,Jt=0,mt="0",ee=Z&&[],pe=[],Me=O,Qt=Z||$&&f.find.TAG("*",kt),Nn=le+=Me==null?1:Math.random()||.1,Pn=Qt.length;for(kt&&(O=J==H||J||kt);mt!==Pn&&(pt=Qt[mt])!=null;mt++){if($&&pt){for(yt=0,!J&&pt.ownerDocument!=H&&(M(pt),K=!_t);Rt=S[yt++];)if(Rt(pt,J||H,K)){rt.push(pt);break}kt&&(le=Nn)}L&&((pt=!Rt&&pt)&&Jt--,Z&&ee.push(pt))}if(Jt+=mt,L&&mt!==Jt){for(yt=0;Rt=E[yt++];)Rt(ee,pe,J,K);if(Z){if(Jt>0)for(;mt--;)ee[mt]||pe[mt]||(pe[mt]=He.call(rt));pe=Bt(pe)}Ei.apply(rt,pe),kt&&!Z&&pe.length>0&&Jt+E.length>1&&Kt.uniqueSort(rt)}return kt&&(le=Nn,O=Me),ee};return L?Ie(D):D}return A=Kt.compile=function(S,E){var L,$=[],D=[],Z=Vr[S+" "];if(!Z){for(E||(E=v(S)),L=E.length;L--;)Z=Zt(E[L]),Z[Wt]?$.push(Z):D.push(Z);Z=Vr(S,Go(D,$)),Z.selector=S}return Z},X=Kt.select=function(S,E,L,$){var D,Z,J,K,rt,kt=typeof S=="function"&&S,pt=!$&&v(S=kt.selector||S);if(L=L||[],pt.length===1){if(Z=pt[0]=pt[0].slice(0),Z.length>2&&(J=Z[0]).type==="ID"&&E.nodeType===9&&_t&&f.relative[Z[1].type]){if(E=(f.find.ID(J.matches[0].replace(Ai,li),E)||[])[0],E)kt&&(E=E.parentNode);else return L;S=S.slice(Z.shift().value.length)}for(D=Jr.needsContext.test(S)?0:Z.length;D--&&(J=Z[D],!f.relative[K=J.type]);)if((rt=f.find[K])&&($=rt(J.matches[0].replace(Ai,li),Wo.test(Z[0].type)&&Hi(E.parentNode)||E))){if(Z.splice(D,1),S=$.length&&W(Z),!S)return Ei.apply(L,$),L;break}}return(kt||A(S,pt))($,E,!_t,L,!E||Wo.test(S)&&Hi(E.parentNode)||E),L},d.sortStable=Wt.split("").sort(sn).join("")===Wt,d.detectDuplicates=!!Q,M(),d.sortDetached=he(function(S){return S.compareDocumentPosition(H.createElement("fieldset"))&1}),he(function(S){return S.innerHTML="<a href='#'></a>",S.firstChild.getAttribute("href")==="#"})||to("type|href|height|width",function(S,E,L){if(!L)return S.getAttribute(E,E.toLowerCase()==="type"?1:2)}),(!d.attributes||!he(function(S){return S.innerHTML="<input/>",S.firstChild.setAttribute("value",""),S.firstChild.getAttribute("value")===""}))&&to("value",function(S,E,L){if(!L&&S.nodeName.toLowerCase()==="input")return S.defaultValue}),he(function(S){return S.getAttribute("disabled")==null})||to(lr,function(S,E,L){var $;if(!L)return S[E]===!0?E.toLowerCase():($=S.getAttributeNode(E))&&$.specified?$.value:null}),Kt}(t);w.find=Xt,w.expr=Xt.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=Xt.uniqueSort,w.text=Xt.getText,w.isXMLDoc=Xt.isXML,w.contains=Xt.contains,w.escapeSelector=Xt.escape;var Lt=function(o,h,d){for(var f=[],c=d!==void 0;(o=o[h])&&o.nodeType!==9;)if(o.nodeType===1){if(c&&w(o).is(d))break;f.push(o)}return f},Et=function(o,h){for(var d=[];o;o=o.nextSibling)o.nodeType===1&&o!==h&&d.push(o);return d},Tt=w.expr.match.needsContext;function ue(o,h){return o.nodeName&&o.nodeName.toLowerCase()===h.toLowerCase()}var Qi=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function tn(o,h,d){return et(h)?w.grep(o,function(f,c){return!!h.call(f,c,f)!==d}):h.nodeType?w.grep(o,function(f){return f===h!==d}):typeof h!="string"?w.grep(o,function(f){return N.call(h,f)>-1!==d}):w.filter(h,o,d)}w.filter=function(o,h,d){var f=h[0];return d&&(o=":not("+o+")"),h.length===1&&f.nodeType===1?w.find.matchesSelector(f,o)?[f]:[]:w.find.matches(o,w.grep(h,function(c){return c.nodeType===1}))},w.fn.extend({find:function(o){var h,d,f=this.length,c=this;if(typeof o!="string")return this.pushStack(w(o).filter(function(){for(h=0;h<f;h++)if(w.contains(c[h],this))return!0}));for(d=this.pushStack([]),h=0;h<f;h++)w.find(o,c[h],d);return f>1?w.uniqueSort(d):d},filter:function(o){return this.pushStack(tn(this,o||[],!1))},not:function(o){return this.pushStack(tn(this,o||[],!0))},is:function(o){return!!tn(this,typeof o=="string"&&Tt.test(o)?w(o):o||[],!1).length}});var Qn,En=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ve=w.fn.init=function(o,h,d){var f,c;if(!o)return this;if(d=d||Qn,typeof o=="string")if(o[0]==="<"&&o[o.length-1]===">"&&o.length>=3?f=[null,o,null]:f=En.exec(o),f&&(f[1]||!h))if(f[1]){if(h=h instanceof w?h[0]:h,w.merge(this,w.parseHTML(f[1],h&&h.nodeType?h.ownerDocument||h:it,!0)),Qi.test(f[1])&&w.isPlainObject(h))for(f in h)et(this[f])?this[f](h[f]):this.attr(f,h[f]);return this}else return c=it.getElementById(f[2]),c&&(this[0]=c,this.length=1),this;else return!h||h.jquery?(h||d).find(o):this.constructor(h).find(o);else{if(o.nodeType)return this[0]=o,this.length=1,this;if(et(o))return d.ready!==void 0?d.ready(o):o(w)}return w.makeArray(o,this)};Ve.prototype=w.fn,Qn=w(it);var Pi=/^(?:parents|prev(?:Until|All))/,pl={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({has:function(o){var h=w(o,this),d=h.length;return this.filter(function(){for(var f=0;f<d;f++)if(w.contains(this,h[f]))return!0})},closest:function(o,h){var d,f=0,c=this.length,m=[],v=typeof o!="string"&&w(o);if(!Tt.test(o)){for(;f<c;f++)for(d=this[f];d&&d!==h;d=d.parentNode)if(d.nodeType<11&&(v?v.index(d)>-1:d.nodeType===1&&w.find.matchesSelector(d,o))){m.push(d);break}}return this.pushStack(m.length>1?w.uniqueSort(m):m)},index:function(o){return o?typeof o=="string"?N.call(w(o),this[0]):N.call(this,o.jquery?o[0]:o):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(o,h){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(o,h))))},addBack:function(o){return this.add(o==null?this.prevObject:this.prevObject.filter(o))}});function tr(o,h){for(;(o=o[h])&&o.nodeType!==1;);return o}w.each({parent:function(o){var h=o.parentNode;return h&&h.nodeType!==11?h:null},parents:function(o){return Lt(o,"parentNode")},parentsUntil:function(o,h,d){return Lt(o,"parentNode",d)},next:function(o){return tr(o,"nextSibling")},prev:function(o){return tr(o,"previousSibling")},nextAll:function(o){return Lt(o,"nextSibling")},prevAll:function(o){return Lt(o,"previousSibling")},nextUntil:function(o,h,d){return Lt(o,"nextSibling",d)},prevUntil:function(o,h,d){return Lt(o,"previousSibling",d)},siblings:function(o){return Et((o.parentNode||{}).firstChild,o)},children:function(o){return Et(o.firstChild)},contents:function(o){return o.contentDocument!=null&&l(o.contentDocument)?o.contentDocument:(ue(o,"template")&&(o=o.content||o),w.merge([],o.childNodes))}},function(o,h){w.fn[o]=function(d,f){var c=w.map(this,h,d);return o.slice(-5)!=="Until"&&(f=d),f&&typeof f=="string"&&(c=w.filter(f,c)),this.length>1&&(pl[o]||w.uniqueSort(c),Pi.test(o)&&c.reverse()),this.pushStack(c)}});var ce=/[^\x20\t\r\n\f]+/g;function _l(o){var h={};return w.each(o.match(ce)||[],function(d,f){h[f]=!0}),h}w.Callbacks=function(o){o=typeof o=="string"?_l(o):w.extend({},o);var h,d,f,c,m=[],v=[],A=-1,X=function(){for(c=c||o.once,f=h=!0;v.length;A=-1)for(d=v.shift();++A<m.length;)m[A].apply(d[0],d[1])===!1&&o.stopOnFalse&&(A=m.length,d=!1);o.memory||(d=!1),h=!1,c&&(d?m=[]:m="")},O={add:function(){return m&&(d&&!h&&(A=m.length-1,v.push(d)),function F(Q){w.each(Q,function(M,H){et(H)?(!o.unique||!O.has(H))&&m.push(H):H&&H.length&&nt(H)!=="string"&&F(H)})}(arguments),d&&!h&&X()),this},remove:function(){return w.each(arguments,function(F,Q){for(var M;(M=w.inArray(Q,m,M))>-1;)m.splice(M,1),M<=A&&A--}),this},has:function(F){return F?w.inArray(F,m)>-1:m.length>0},empty:function(){return m&&(m=[]),this},disable:function(){return c=v=[],m=d="",this},disabled:function(){return!m},lock:function(){return c=v=[],!d&&!h&&(m=d=""),this},locked:function(){return!!c},fireWith:function(F,Q){return c||(Q=Q||[],Q=[F,Q.slice?Q.slice():Q],v.push(Q),h||X()),this},fire:function(){return O.fireWith(this,arguments),this},fired:function(){return!!f}};return O};function Tn(o){return o}function Lr(o){throw o}function en(o,h,d,f){var c;try{o&&et(c=o.promise)?c.call(o).done(h).fail(d):o&&et(c=o.then)?c.call(o,h,d):h.apply(void 0,[o].slice(f))}catch(m){d.apply(void 0,[m])}}w.extend({Deferred:function(o){var h=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],d="pending",f={state:function(){return d},always:function(){return c.done(arguments).fail(arguments),this},catch:function(m){return f.then(null,m)},pipe:function(){var m=arguments;return w.Deferred(function(v){w.each(h,function(A,X){var O=et(m[X[4]])&&m[X[4]];c[X[1]](function(){var F=O&&O.apply(this,arguments);F&&et(F.promise)?F.promise().progress(v.notify).done(v.resolve).fail(v.reject):v[X[0]+"With"](this,O?[F]:arguments)})}),m=null}).promise()},then:function(m,v,A){var X=0;function O(F,Q,M,H){return function(){var wt=this,_t=arguments,ct=function(){var jt,Ce;if(!(F<X)){if(jt=M.apply(wt,_t),jt===Q.promise())throw new TypeError("Thenable self-resolution");Ce=jt&&(typeof jt=="object"||typeof jt=="function")&&jt.then,et(Ce)?H?Ce.call(jt,O(X,Q,Tn,H),O(X,Q,Lr,H)):(X++,Ce.call(jt,O(X,Q,Tn,H),O(X,Q,Lr,H),O(X,Q,Tn,Q.notifyWith))):(M!==Tn&&(wt=void 0,_t=[jt]),(H||Q.resolveWith)(wt,_t))}},ge=H?ct:function(){try{ct()}catch(jt){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(jt,ge.stackTrace),F+1>=X&&(M!==Lr&&(wt=void 0,_t=[jt]),Q.rejectWith(wt,_t))}};F?ge():(w.Deferred.getStackHook&&(ge.stackTrace=w.Deferred.getStackHook()),t.setTimeout(ge))}}return w.Deferred(function(F){h[0][3].add(O(0,F,et(A)?A:Tn,F.notifyWith)),h[1][3].add(O(0,F,et(m)?m:Tn)),h[2][3].add(O(0,F,et(v)?v:Lr))}).promise()},promise:function(m){return m!=null?w.extend(m,f):f}},c={};return w.each(h,function(m,v){var A=v[2],X=v[5];f[v[1]]=A.add,X&&A.add(function(){d=X},h[3-m][2].disable,h[3-m][3].disable,h[0][2].lock,h[0][3].lock),A.add(v[3].fire),c[v[0]]=function(){return c[v[0]+"With"](this===c?void 0:this,arguments),this},c[v[0]+"With"]=A.fireWith}),f.promise(c),o&&o.call(c,c),c},when:function(o){var h=arguments.length,d=h,f=Array(d),c=g.call(arguments),m=w.Deferred(),v=function(A){return function(X){f[A]=this,c[A]=arguments.length>1?g.call(arguments):X,--h||m.resolveWith(f,c)}};if(h<=1&&(en(o,m.done(v(d)).resolve,m.reject,!h),m.state()==="pending"||et(c[d]&&c[d].then)))return m.then();for(;d--;)en(c[d],v(d),m.reject);return m.promise()}});var Rr=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(o,h){t.console&&t.console.warn&&o&&Rr.test(o.name)&&t.console.warn("jQuery.Deferred exception: "+o.message,o.stack,h)},w.readyException=function(o){t.setTimeout(function(){throw o})};var So=w.Deferred();w.fn.ready=function(o){return So.then(o).catch(function(h){w.readyException(h)}),this},w.extend({isReady:!1,readyWait:1,ready:function(o){(o===!0?--w.readyWait:w.isReady)||(w.isReady=!0,!(o!==!0&&--w.readyWait>0)&&So.resolveWith(it,[w]))}}),w.ready.then=So.then;function Mi(){it.removeEventListener("DOMContentLoaded",Mi),t.removeEventListener("load",Mi),w.ready()}it.readyState==="complete"||it.readyState!=="loading"&&!it.documentElement.doScroll?t.setTimeout(w.ready):(it.addEventListener("DOMContentLoaded",Mi),t.addEventListener("load",Mi));var Fe=function(o,h,d,f,c,m,v){var A=0,X=o.length,O=d==null;if(nt(d)==="object"){c=!0;for(A in d)Fe(o,h,A,d[A],!0,m,v)}else if(f!==void 0&&(c=!0,et(f)||(v=!0),O&&(v?(h.call(o,f),h=null):(O=h,h=function(F,Q,M){return O.call(w(F),M)})),h))for(;A<X;A++)h(o[A],d,v?f:f.call(o[A],A,h(o[A],d)));return c?o:O?h.call(o):X?h(o[0],d):m},ml=/^-ms-/,Dr=/-([a-z])/g;function Or(o,h){return h.toUpperCase()}function ai(o){return o.replace(ml,"ms-").replace(Dr,Or)}var Le=function(o){return o.nodeType===1||o.nodeType===9||!+o.nodeType};function xi(){this.expando=w.expando+xi.uid++}xi.uid=1,xi.prototype={cache:function(o){var h=o[this.expando];return h||(h={},Le(o)&&(o.nodeType?o[this.expando]=h:Object.defineProperty(o,this.expando,{value:h,configurable:!0}))),h},set:function(o,h,d){var f,c=this.cache(o);if(typeof h=="string")c[ai(h)]=d;else for(f in h)c[ai(f)]=h[f];return c},get:function(o,h){return h===void 0?this.cache(o):o[this.expando]&&o[this.expando][ai(h)]},access:function(o,h,d){return h===void 0||h&&typeof h=="string"&&d===void 0?this.get(o,h):(this.set(o,h,d),d!==void 0?d:h)},remove:function(o,h){var d,f=o[this.expando];if(f!==void 0){if(h!==void 0)for(Array.isArray(h)?h=h.map(ai):(h=ai(h),h=h in f?[h]:h.match(ce)||[]),d=h.length;d--;)delete f[h[d]];(h===void 0||w.isEmptyObject(f))&&(o.nodeType?o[this.expando]=void 0:delete o[this.expando])}},hasData:function(o){var h=o[this.expando];return h!==void 0&&!w.isEmptyObject(h)}};var bt=new xi,oe=new xi,Ma=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,kl=/[A-Z]/g;function er(o){return o==="true"?!0:o==="false"?!1:o==="null"?null:o===+o+""?+o:Ma.test(o)?JSON.parse(o):o}function je(o,h,d){var f;if(d===void 0&&o.nodeType===1)if(f="data-"+h.replace(kl,"-$&").toLowerCase(),d=o.getAttribute(f),typeof d=="string"){try{d=er(d)}catch{}oe.set(o,h,d)}else d=void 0;return d}w.extend({hasData:function(o){return oe.hasData(o)||bt.hasData(o)},data:function(o,h,d){return oe.access(o,h,d)},removeData:function(o,h){oe.remove(o,h)},_data:function(o,h,d){return bt.access(o,h,d)},_removeData:function(o,h){bt.remove(o,h)}}),w.fn.extend({data:function(o,h){var d,f,c,m=this[0],v=m&&m.attributes;if(o===void 0){if(this.length&&(c=oe.get(m),m.nodeType===1&&!bt.get(m,"hasDataAttrs"))){for(d=v.length;d--;)v[d]&&(f=v[d].name,f.indexOf("data-")===0&&(f=ai(f.slice(5)),je(m,f,c[f])));bt.set(m,"hasDataAttrs",!0)}return c}return typeof o=="object"?this.each(function(){oe.set(this,o)}):Fe(this,function(A){var X;if(m&&A===void 0)return X=oe.get(m,o),X!==void 0||(X=je(m,o),X!==void 0)?X:void 0;this.each(function(){oe.set(this,o,A)})},null,h,arguments.length>1,null,!0)},removeData:function(o){return this.each(function(){oe.remove(this,o)})}}),w.extend({queue:function(o,h,d){var f;if(o)return h=(h||"fx")+"queue",f=bt.get(o,h),d&&(!f||Array.isArray(d)?f=bt.access(o,h,w.makeArray(d)):f.push(d)),f||[]},dequeue:function(o,h){h=h||"fx";var d=w.queue(o,h),f=d.length,c=d.shift(),m=w._queueHooks(o,h),v=function(){w.dequeue(o,h)};c==="inprogress"&&(c=d.shift(),f--),c&&(h==="fx"&&d.unshift("inprogress"),delete m.stop,c.call(o,v,m)),!f&&m&&m.empty.fire()},_queueHooks:function(o,h){var d=h+"queueHooks";return bt.get(o,d)||bt.access(o,d,{empty:w.Callbacks("once memory").add(function(){bt.remove(o,[h+"queue",d])})})}}),w.fn.extend({queue:function(o,h){var d=2;return typeof o!="string"&&(h=o,o="fx",d--),arguments.length<d?w.queue(this[0],o):h===void 0?this:this.each(function(){var f=w.queue(this,o,h);w._queueHooks(this,o),o==="fx"&&f[0]!=="inprogress"&&w.dequeue(this,o)})},dequeue:function(o){return this.each(function(){w.dequeue(this,o)})},clearQueue:function(o){return this.queue(o||"fx",[])},promise:function(o,h){var d,f=1,c=w.Deferred(),m=this,v=this.length,A=function(){--f||c.resolveWith(m,[m])};for(typeof o!="string"&&(h=o,o=void 0),o=o||"fx";v--;)d=bt.get(m[v],o+"queueHooks"),d&&d.empty&&(f++,d.empty.add(A));return A(),c.promise(h)}});var An=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Bi=new RegExp("^(?:([+-])=|)("+An+")([a-z%]*)$","i"),Si=["Top","Right","Bottom","Left"],si=it.documentElement,Xn=function(o){return w.contains(o.ownerDocument,o)},ir={composed:!0};si.getRootNode&&(Xn=function(o){return w.contains(o.ownerDocument,o)||o.getRootNode(ir)===o.ownerDocument});var Ci=function(o,h){return o=h||o,o.style.display==="none"||o.style.display===""&&Xn(o)&&w.css(o,"display")==="none"};function Nr(o,h,d,f){var c,m,v=20,A=f?function(){return f.cur()}:function(){return w.css(o,h,"")},X=A(),O=d&&d[3]||(w.cssNumber[h]?"":"px"),F=o.nodeType&&(w.cssNumber[h]||O!=="px"&&+X)&&Bi.exec(w.css(o,h));if(F&&F[3]!==O){for(X=X/2,O=O||F[3],F=+X||1;v--;)w.style(o,h,F+O),(1-m)*(1-(m=A()/X||.5))<=0&&(v=0),F=F/m;F=F*2,w.style(o,h,F+O),d=d||[]}return d&&(F=+F||+X||0,c=d[1]?F+(d[1]+1)*d[2]:+d[2],f&&(f.unit=O,f.start=F,f.end=c)),c}var Pr={};function Co(o){var h,d=o.ownerDocument,f=o.nodeName,c=Pr[f];return c||(h=d.body.appendChild(d.createElement(f)),c=w.css(h,"display"),h.parentNode.removeChild(h),c==="none"&&(c="block"),Pr[f]=c,c)}function zi(o,h){for(var d,f,c=[],m=0,v=o.length;m<v;m++)f=o[m],f.style&&(d=f.style.display,h?(d==="none"&&(c[m]=bt.get(f,"display")||null,c[m]||(f.style.display="")),f.style.display===""&&Ci(f)&&(c[m]=Co(f))):d!=="none"&&(c[m]="none",bt.set(f,"display",d)));for(m=0;m<v;m++)c[m]!=null&&(o[m].style.display=c[m]);return o}w.fn.extend({show:function(){return zi(this,!0)},hide:function(){return zi(this)},toggle:function(o){return typeof o=="boolean"?o?this.show():this.hide():this.each(function(){Ci(this)?w(this).show():w(this).hide()})}});var nn=/^(?:checkbox|radio)$/i,Mr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Br=/^$|^module$|\/(?:java|ecma)script/i;(function(){var o=it.createDocumentFragment(),h=o.appendChild(it.createElement("div")),d=it.createElement("input");d.setAttribute("type","radio"),d.setAttribute("checked","checked"),d.setAttribute("name","t"),h.appendChild(d),G.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,h.innerHTML="<textarea>x</textarea>",G.noCloneChecked=!!h.cloneNode(!0).lastChild.defaultValue,h.innerHTML="<option></option>",G.option=!!h.lastChild})();var Pe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pe.tbody=Pe.tfoot=Pe.colgroup=Pe.caption=Pe.thead,Pe.th=Pe.td,G.option||(Pe.optgroup=Pe.option=[1,"<select multiple='multiple'>","</select>"]);function Se(o,h){var d;return typeof o.getElementsByTagName!="undefined"?d=o.getElementsByTagName(h||"*"):typeof o.querySelectorAll!="undefined"?d=o.querySelectorAll(h||"*"):d=[],h===void 0||h&&ue(o,h)?w.merge([o],d):d}function Io(o,h){for(var d=0,f=o.length;d<f;d++)bt.set(o[d],"globalEval",!h||bt.get(h[d],"globalEval"))}var vl=/<|&#?\w+;/;function Ba(o,h,d,f,c){for(var m,v,A,X,O,F,Q=h.createDocumentFragment(),M=[],H=0,wt=o.length;H<wt;H++)if(m=o[H],m||m===0)if(nt(m)==="object")w.merge(M,m.nodeType?[m]:m);else if(!vl.test(m))M.push(h.createTextNode(m));else{for(v=v||Q.appendChild(h.createElement("div")),A=(Mr.exec(m)||["",""])[1].toLowerCase(),X=Pe[A]||Pe._default,v.innerHTML=X[1]+w.htmlPrefilter(m)+X[2],F=X[0];F--;)v=v.lastChild;w.merge(M,v.childNodes),v=Q.firstChild,v.textContent=""}for(Q.textContent="",H=0;m=M[H++];){if(f&&w.inArray(m,f)>-1){c&&c.push(m);continue}if(O=Xn(m),v=Se(Q.appendChild(m),"script"),O&&Io(v),d)for(F=0;m=v[F++];)Br.test(m.type||"")&&d.push(m)}return Q}var Eo=/^([^.]*)(?:\.(.+)|)/;function rn(){return!0}function Yn(){return!1}function bl(o,h){return o===yl()==(h==="focus")}function yl(){try{return it.activeElement}catch{}}function To(o,h,d,f,c,m){var v,A;if(typeof h=="object"){typeof d!="string"&&(f=f||d,d=void 0);for(A in h)To(o,A,d,f,h[A],m);return o}if(f==null&&c==null?(c=d,f=d=void 0):c==null&&(typeof d=="string"?(c=f,f=void 0):(c=f,f=d,d=void 0)),c===!1)c=Yn;else if(!c)return o;return m===1&&(v=c,c=function(X){return w().off(X),v.apply(this,arguments)},c.guid=v.guid||(v.guid=w.guid++)),o.each(function(){w.event.add(this,h,c,f,d)})}w.event={global:{},add:function(o,h,d,f,c){var m,v,A,X,O,F,Q,M,H,wt,_t,ct=bt.get(o);if(!!Le(o))for(d.handler&&(m=d,d=m.handler,c=m.selector),c&&w.find.matchesSelector(si,c),d.guid||(d.guid=w.guid++),(X=ct.events)||(X=ct.events=Object.create(null)),(v=ct.handle)||(v=ct.handle=function(ge){return typeof w!="undefined"&&w.event.triggered!==ge.type?w.event.dispatch.apply(o,arguments):void 0}),h=(h||"").match(ce)||[""],O=h.length;O--;)A=Eo.exec(h[O])||[],H=_t=A[1],wt=(A[2]||"").split(".").sort(),H&&(Q=w.event.special[H]||{},H=(c?Q.delegateType:Q.bindType)||H,Q=w.event.special[H]||{},F=w.extend({type:H,origType:_t,data:f,handler:d,guid:d.guid,selector:c,needsContext:c&&w.expr.match.needsContext.test(c),namespace:wt.join(".")},m),(M=X[H])||(M=X[H]=[],M.delegateCount=0,(!Q.setup||Q.setup.call(o,f,wt,v)===!1)&&o.addEventListener&&o.addEventListener(H,v)),Q.add&&(Q.add.call(o,F),F.handler.guid||(F.handler.guid=d.guid)),c?M.splice(M.delegateCount++,0,F):M.push(F),w.event.global[H]=!0)},remove:function(o,h,d,f,c){var m,v,A,X,O,F,Q,M,H,wt,_t,ct=bt.hasData(o)&&bt.get(o);if(!(!ct||!(X=ct.events))){for(h=(h||"").match(ce)||[""],O=h.length;O--;){if(A=Eo.exec(h[O])||[],H=_t=A[1],wt=(A[2]||"").split(".").sort(),!H){for(H in X)w.event.remove(o,H+h[O],d,f,!0);continue}for(Q=w.event.special[H]||{},H=(f?Q.delegateType:Q.bindType)||H,M=X[H]||[],A=A[2]&&new RegExp("(^|\\.)"+wt.join("\\.(?:.*\\.|)")+"(\\.|$)"),v=m=M.length;m--;)F=M[m],(c||_t===F.origType)&&(!d||d.guid===F.guid)&&(!A||A.test(F.namespace))&&(!f||f===F.selector||f==="**"&&F.selector)&&(M.splice(m,1),F.selector&&M.delegateCount--,Q.remove&&Q.remove.call(o,F));v&&!M.length&&((!Q.teardown||Q.teardown.call(o,wt,ct.handle)===!1)&&w.removeEvent(o,H,ct.handle),delete X[H])}w.isEmptyObject(X)&&bt.remove(o,"handle events")}},dispatch:function(o){var h,d,f,c,m,v,A=new Array(arguments.length),X=w.event.fix(o),O=(bt.get(this,"events")||Object.create(null))[X.type]||[],F=w.event.special[X.type]||{};for(A[0]=X,h=1;h<arguments.length;h++)A[h]=arguments[h];if(X.delegateTarget=this,!(F.preDispatch&&F.preDispatch.call(this,X)===!1)){for(v=w.event.handlers.call(this,X,O),h=0;(c=v[h++])&&!X.isPropagationStopped();)for(X.currentTarget=c.elem,d=0;(m=c.handlers[d++])&&!X.isImmediatePropagationStopped();)(!X.rnamespace||m.namespace===!1||X.rnamespace.test(m.namespace))&&(X.handleObj=m,X.data=m.data,f=((w.event.special[m.origType]||{}).handle||m.handler).apply(c.elem,A),f!==void 0&&(X.result=f)===!1&&(X.preventDefault(),X.stopPropagation()));return F.postDispatch&&F.postDispatch.call(this,X),X.result}},handlers:function(o,h){var d,f,c,m,v,A=[],X=h.delegateCount,O=o.target;if(X&&O.nodeType&&!(o.type==="click"&&o.button>=1)){for(;O!==this;O=O.parentNode||this)if(O.nodeType===1&&!(o.type==="click"&&O.disabled===!0)){for(m=[],v={},d=0;d<X;d++)f=h[d],c=f.selector+" ",v[c]===void 0&&(v[c]=f.needsContext?w(c,this).index(O)>-1:w.find(c,this,null,[O]).length),v[c]&&m.push(f);m.length&&A.push({elem:O,handlers:m})}}return O=this,X<h.length&&A.push({elem:O,handlers:h.slice(X)}),A},addProp:function(o,h){Object.defineProperty(w.Event.prototype,o,{enumerable:!0,configurable:!0,get:et(h)?function(){if(this.originalEvent)return h(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[o]},set:function(d){Object.defineProperty(this,o,{enumerable:!0,configurable:!0,writable:!0,value:d})}})},fix:function(o){return o[w.expando]?o:new w.Event(o)},special:{load:{noBubble:!0},click:{setup:function(o){var h=this||o;return nn.test(h.type)&&h.click&&ue(h,"input")&&nr(h,"click",rn),!1},trigger:function(o){var h=this||o;return nn.test(h.type)&&h.click&&ue(h,"input")&&nr(h,"click"),!0},_default:function(o){var h=o.target;return nn.test(h.type)&&h.click&&ue(h,"input")&&bt.get(h,"click")||ue(h,"a")}},beforeunload:{postDispatch:function(o){o.result!==void 0&&o.originalEvent&&(o.originalEvent.returnValue=o.result)}}}};function nr(o,h,d){if(!d){bt.get(o,h)===void 0&&w.event.add(o,h,rn);return}bt.set(o,h,!1),w.event.add(o,h,{namespace:!1,handler:function(f){var c,m,v=bt.get(this,h);if(f.isTrigger&1&&this[h]){if(v.length)(w.event.special[h]||{}).delegateType&&f.stopPropagation();else if(v=g.call(arguments),bt.set(this,h,v),c=d(this,h),this[h](),m=bt.get(this,h),v!==m||c?bt.set(this,h,!1):m={},v!==m)return f.stopImmediatePropagation(),f.preventDefault(),m&&m.value}else v.length&&(bt.set(this,h,{value:w.event.trigger(w.extend(v[0],w.Event.prototype),v.slice(1),this)}),f.stopImmediatePropagation())}})}w.removeEvent=function(o,h,d){o.removeEventListener&&o.removeEventListener(h,d)},w.Event=function(o,h){if(!(this instanceof w.Event))return new w.Event(o,h);o&&o.type?(this.originalEvent=o,this.type=o.type,this.isDefaultPrevented=o.defaultPrevented||o.defaultPrevented===void 0&&o.returnValue===!1?rn:Yn,this.target=o.target&&o.target.nodeType===3?o.target.parentNode:o.target,this.currentTarget=o.currentTarget,this.relatedTarget=o.relatedTarget):this.type=o,h&&w.extend(this,h),this.timeStamp=o&&o.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:Yn,isPropagationStopped:Yn,isImmediatePropagationStopped:Yn,isSimulated:!1,preventDefault:function(){var o=this.originalEvent;this.isDefaultPrevented=rn,o&&!this.isSimulated&&o.preventDefault()},stopPropagation:function(){var o=this.originalEvent;this.isPropagationStopped=rn,o&&!this.isSimulated&&o.stopPropagation()},stopImmediatePropagation:function(){var o=this.originalEvent;this.isImmediatePropagationStopped=rn,o&&!this.isSimulated&&o.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(o,h){w.event.special[o]={setup:function(){return nr(this,o,bl),!1},trigger:function(){return nr(this,o),!0},_default:function(){return!0},delegateType:h}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(o,h){w.event.special[o]={delegateType:h,bindType:h,handle:function(d){var f,c=this,m=d.relatedTarget,v=d.handleObj;return(!m||m!==c&&!w.contains(c,m))&&(d.type=v.origType,f=v.handler.apply(this,arguments),d.type=h),f}}}),w.fn.extend({on:function(o,h,d,f){return To(this,o,h,d,f)},one:function(o,h,d,f){return To(this,o,h,d,f,1)},off:function(o,h,d){var f,c;if(o&&o.preventDefault&&o.handleObj)return f=o.handleObj,w(o.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if(typeof o=="object"){for(c in o)this.off(c,h,o[c]);return this}return(h===!1||typeof h=="function")&&(d=h,h=void 0),d===!1&&(d=Yn),this.each(function(){w.event.remove(this,o,d,h)})}});var xl=/<script|<style|<link/i,Sl=/checked\s*(?:[^=]|=\s*.checked.)/i,Cl=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function zr(o,h){return ue(o,"table")&&ue(h.nodeType!==11?h:h.firstChild,"tr")&&w(o).children("tbody")[0]||o}function Il(o){return o.type=(o.getAttribute("type")!==null)+"/"+o.type,o}function Ao(o){return(o.type||"").slice(0,5)==="true/"?o.type=o.type.slice(5):o.removeAttribute("type"),o}function za(o,h){var d,f,c,m,v,A,X;if(h.nodeType===1){if(bt.hasData(o)&&(m=bt.get(o),X=m.events,X)){bt.remove(h,"handle events");for(c in X)for(d=0,f=X[c].length;d<f;d++)w.event.add(h,c,X[c][d])}oe.hasData(o)&&(v=oe.access(o),A=w.extend({},v),oe.set(h,A))}}function El(o,h){var d=h.nodeName.toLowerCase();d==="input"&&nn.test(o.type)?h.checked=o.checked:(d==="input"||d==="textarea")&&(h.defaultValue=o.defaultValue)}function Ln(o,h,d,f){h=p(h);var c,m,v,A,X,O,F=0,Q=o.length,M=Q-1,H=h[0],wt=et(H);if(wt||Q>1&&typeof H=="string"&&!G.checkClone&&Sl.test(H))return o.each(function(_t){var ct=o.eq(_t);wt&&(h[0]=H.call(this,_t,ct.html())),Ln(ct,h,d,f)});if(Q&&(c=Ba(h,o[0].ownerDocument,!1,o,f),m=c.firstChild,c.childNodes.length===1&&(c=m),m||f)){for(v=w.map(Se(c,"script"),Il),A=v.length;F<Q;F++)X=c,F!==M&&(X=w.clone(X,!0,!0),A&&w.merge(v,Se(X,"script"))),d.call(o[F],X,F);if(A)for(O=v[v.length-1].ownerDocument,w.map(v,Ao),F=0;F<A;F++)X=v[F],Br.test(X.type||"")&&!bt.access(X,"globalEval")&&w.contains(O,X)&&(X.src&&(X.type||"").toLowerCase()!=="module"?w._evalUrl&&!X.noModule&&w._evalUrl(X.src,{nonce:X.nonce||X.getAttribute("nonce")},O):ft(X.textContent.replace(Cl,""),X,O))}return o}function Fa(o,h,d){for(var f,c=h?w.filter(h,o):o,m=0;(f=c[m])!=null;m++)!d&&f.nodeType===1&&w.cleanData(Se(f)),f.parentNode&&(d&&Xn(f)&&Io(Se(f,"script")),f.parentNode.removeChild(f));return o}w.extend({htmlPrefilter:function(o){return o},clone:function(o,h,d){var f,c,m,v,A=o.cloneNode(!0),X=Xn(o);if(!G.noCloneChecked&&(o.nodeType===1||o.nodeType===11)&&!w.isXMLDoc(o))for(v=Se(A),m=Se(o),f=0,c=m.length;f<c;f++)El(m[f],v[f]);if(h)if(d)for(m=m||Se(o),v=v||Se(A),f=0,c=m.length;f<c;f++)za(m[f],v[f]);else za(o,A);return v=Se(A,"script"),v.length>0&&Io(v,!X&&Se(o,"script")),A},cleanData:function(o){for(var h,d,f,c=w.event.special,m=0;(d=o[m])!==void 0;m++)if(Le(d)){if(h=d[bt.expando]){if(h.events)for(f in h.events)c[f]?w.event.remove(d,f):w.removeEvent(d,f,h.handle);d[bt.expando]=void 0}d[oe.expando]&&(d[oe.expando]=void 0)}}}),w.fn.extend({detach:function(o){return Fa(this,o,!0)},remove:function(o){return Fa(this,o)},text:function(o){return Fe(this,function(h){return h===void 0?w.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=h)})},null,o,arguments.length)},append:function(){return Ln(this,arguments,function(o){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var h=zr(this,o);h.appendChild(o)}})},prepend:function(){return Ln(this,arguments,function(o){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var h=zr(this,o);h.insertBefore(o,h.firstChild)}})},before:function(){return Ln(this,arguments,function(o){this.parentNode&&this.parentNode.insertBefore(o,this)})},after:function(){return Ln(this,arguments,function(o){this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling)})},empty:function(){for(var o,h=0;(o=this[h])!=null;h++)o.nodeType===1&&(w.cleanData(Se(o,!1)),o.textContent="");return this},clone:function(o,h){return o=o==null?!1:o,h=h==null?o:h,this.map(function(){return w.clone(this,o,h)})},html:function(o){return Fe(this,function(h){var d=this[0]||{},f=0,c=this.length;if(h===void 0&&d.nodeType===1)return d.innerHTML;if(typeof h=="string"&&!xl.test(h)&&!Pe[(Mr.exec(h)||["",""])[1].toLowerCase()]){h=w.htmlPrefilter(h);try{for(;f<c;f++)d=this[f]||{},d.nodeType===1&&(w.cleanData(Se(d,!1)),d.innerHTML=h);d=0}catch{}}d&&this.empty().append(h)},null,o,arguments.length)},replaceWith:function(){var o=[];return Ln(this,arguments,function(h){var d=this.parentNode;w.inArray(this,o)<0&&(w.cleanData(Se(this)),d&&d.replaceChild(h,this))},o)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(o,h){w.fn[o]=function(d){for(var f,c=[],m=w(d),v=m.length-1,A=0;A<=v;A++)f=A===v?this:this.clone(!0),w(m[A])[h](f),x.apply(c,f.get());return this.pushStack(c)}});var Xo=new RegExp("^("+An+")(?!px)[a-z%]+$","i"),Fr=function(o){var h=o.ownerDocument.defaultView;return(!h||!h.opener)&&(h=t),h.getComputedStyle(o)},qa=function(o,h,d){var f,c,m={};for(c in h)m[c]=o.style[c],o.style[c]=h[c];f=d.call(o);for(c in h)o.style[c]=m[c];return f},Tl=new RegExp(Si.join("|"),"i");(function(){function o(){if(!!O){X.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",O.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",si.appendChild(X).appendChild(O);var F=t.getComputedStyle(O);d=F.top!=="1%",A=h(F.marginLeft)===12,O.style.right="60%",m=h(F.right)===36,f=h(F.width)===36,O.style.position="absolute",c=h(O.offsetWidth/3)===12,si.removeChild(X),O=null}}function h(F){return Math.round(parseFloat(F))}var d,f,c,m,v,A,X=it.createElement("div"),O=it.createElement("div");!O.style||(O.style.backgroundClip="content-box",O.cloneNode(!0).style.backgroundClip="",G.clearCloneStyle=O.style.backgroundClip==="content-box",w.extend(G,{boxSizingReliable:function(){return o(),f},pixelBoxStyles:function(){return o(),m},pixelPosition:function(){return o(),d},reliableMarginLeft:function(){return o(),A},scrollboxSize:function(){return o(),c},reliableTrDimensions:function(){var F,Q,M,H;return v==null&&(F=it.createElement("table"),Q=it.createElement("tr"),M=it.createElement("div"),F.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Q.style.cssText="border:1px solid",Q.style.height="1px",M.style.height="9px",M.style.display="block",si.appendChild(F).appendChild(Q).appendChild(M),H=t.getComputedStyle(Q),v=parseInt(H.height,10)+parseInt(H.borderTopWidth,10)+parseInt(H.borderBottomWidth,10)===Q.offsetHeight,si.removeChild(F)),v}}))})();function Rn(o,h,d){var f,c,m,v,A=o.style;return d=d||Fr(o),d&&(v=d.getPropertyValue(h)||d[h],v===""&&!Xn(o)&&(v=w.style(o,h)),!G.pixelBoxStyles()&&Xo.test(v)&&Tl.test(h)&&(f=A.width,c=A.minWidth,m=A.maxWidth,A.minWidth=A.maxWidth=A.width=v,v=d.width,A.width=f,A.minWidth=c,A.maxWidth=m)),v!==void 0?v+"":v}function Ha(o,h){return{get:function(){if(o()){delete this.get;return}return(this.get=h).apply(this,arguments)}}}var Ua=["Webkit","Moz","ms"],Wa=it.createElement("div").style,$a={};function Al(o){for(var h=o[0].toUpperCase()+o.slice(1),d=Ua.length;d--;)if(o=Ua[d]+h,o in Wa)return o}function Yo(o){var h=w.cssProps[o]||$a[o];return h||(o in Wa?o:$a[o]=Al(o)||o)}var qr=/^(none|table(?!-c[ea]).+)/,Ga=/^--/,Hr={position:"absolute",visibility:"hidden",display:"block"},Za={letterSpacing:"0",fontWeight:"400"};function Va(o,h,d){var f=Bi.exec(h);return f?Math.max(0,f[2]-(d||0))+(f[3]||"px"):h}function Lo(o,h,d,f,c,m){var v=h==="width"?1:0,A=0,X=0;if(d===(f?"border":"content"))return 0;for(;v<4;v+=2)d==="margin"&&(X+=w.css(o,d+Si[v],!0,c)),f?(d==="content"&&(X-=w.css(o,"padding"+Si[v],!0,c)),d!=="margin"&&(X-=w.css(o,"border"+Si[v]+"Width",!0,c))):(X+=w.css(o,"padding"+Si[v],!0,c),d!=="padding"?X+=w.css(o,"border"+Si[v]+"Width",!0,c):A+=w.css(o,"border"+Si[v]+"Width",!0,c));return!f&&m>=0&&(X+=Math.max(0,Math.ceil(o["offset"+h[0].toUpperCase()+h.slice(1)]-m-X-A-.5))||0),X}function Ro(o,h,d){var f=Fr(o),c=!G.boxSizingReliable()||d,m=c&&w.css(o,"boxSizing",!1,f)==="border-box",v=m,A=Rn(o,h,f),X="offset"+h[0].toUpperCase()+h.slice(1);if(Xo.test(A)){if(!d)return A;A="auto"}return(!G.boxSizingReliable()&&m||!G.reliableTrDimensions()&&ue(o,"tr")||A==="auto"||!parseFloat(A)&&w.css(o,"display",!1,f)==="inline")&&o.getClientRects().length&&(m=w.css(o,"boxSizing",!1,f)==="border-box",v=X in o,v&&(A=o[X])),A=parseFloat(A)||0,A+Lo(o,h,d||(m?"border":"content"),v,f,A)+"px"}w.extend({cssHooks:{opacity:{get:function(o,h){if(h){var d=Rn(o,"opacity");return d===""?"1":d}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(o,h,d,f){if(!(!o||o.nodeType===3||o.nodeType===8||!o.style)){var c,m,v,A=ai(h),X=Ga.test(h),O=o.style;if(X||(h=Yo(A)),v=w.cssHooks[h]||w.cssHooks[A],d!==void 0){if(m=typeof d,m==="string"&&(c=Bi.exec(d))&&c[1]&&(d=Nr(o,h,c),m="number"),d==null||d!==d)return;m==="number"&&!X&&(d+=c&&c[3]||(w.cssNumber[A]?"":"px")),!G.clearCloneStyle&&d===""&&h.indexOf("background")===0&&(O[h]="inherit"),(!v||!("set"in v)||(d=v.set(o,d,f))!==void 0)&&(X?O.setProperty(h,d):O[h]=d)}else return v&&"get"in v&&(c=v.get(o,!1,f))!==void 0?c:O[h]}},css:function(o,h,d,f){var c,m,v,A=ai(h),X=Ga.test(h);return X||(h=Yo(A)),v=w.cssHooks[h]||w.cssHooks[A],v&&"get"in v&&(c=v.get(o,!0,d)),c===void 0&&(c=Rn(o,h,f)),c==="normal"&&h in Za&&(c=Za[h]),d===""||d?(m=parseFloat(c),d===!0||isFinite(m)?m||0:c):c}}),w.each(["height","width"],function(o,h){w.cssHooks[h]={get:function(d,f,c){if(f)return qr.test(w.css(d,"display"))&&(!d.getClientRects().length||!d.getBoundingClientRect().width)?qa(d,Hr,function(){return Ro(d,h,c)}):Ro(d,h,c)},set:function(d,f,c){var m,v=Fr(d),A=!G.scrollboxSize()&&v.position==="absolute",X=A||c,O=X&&w.css(d,"boxSizing",!1,v)==="border-box",F=c?Lo(d,h,c,O,v):0;return O&&A&&(F-=Math.ceil(d["offset"+h[0].toUpperCase()+h.slice(1)]-parseFloat(v[h])-Lo(d,h,"border",!1,v)-.5)),F&&(m=Bi.exec(f))&&(m[3]||"px")!=="px"&&(d.style[h]=f,f=w.css(d,h)),Va(d,f,F)}}}),w.cssHooks.marginLeft=Ha(G.reliableMarginLeft,function(o,h){if(h)return(parseFloat(Rn(o,"marginLeft"))||o.getBoundingClientRect().left-qa(o,{marginLeft:0},function(){return o.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(o,h){w.cssHooks[o+h]={expand:function(d){for(var f=0,c={},m=typeof d=="string"?d.split(" "):[d];f<4;f++)c[o+Si[f]+h]=m[f]||m[f-2]||m[0];return c}},o!=="margin"&&(w.cssHooks[o+h].set=Va)}),w.fn.extend({css:function(o,h){return Fe(this,function(d,f,c){var m,v,A={},X=0;if(Array.isArray(f)){for(m=Fr(d),v=f.length;X<v;X++)A[f[X]]=w.css(d,f[X],!1,m);return A}return c!==void 0?w.style(d,f,c):w.css(d,f)},o,h,arguments.length>1)}});function Re(o,h,d,f,c){return new Re.prototype.init(o,h,d,f,c)}w.Tween=Re,Re.prototype={constructor:Re,init:function(o,h,d,f,c,m){this.elem=o,this.prop=d,this.easing=c||w.easing._default,this.options=h,this.start=this.now=this.cur(),this.end=f,this.unit=m||(w.cssNumber[d]?"":"px")},cur:function(){var o=Re.propHooks[this.prop];return o&&o.get?o.get(this):Re.propHooks._default.get(this)},run:function(o){var h,d=Re.propHooks[this.prop];return this.options.duration?this.pos=h=w.easing[this.easing](o,this.options.duration*o,0,1,this.options.duration):this.pos=h=o,this.now=(this.end-this.start)*h+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),d&&d.set?d.set(this):Re.propHooks._default.set(this),this}},Re.prototype.init.prototype=Re.prototype,Re.propHooks={_default:{get:function(o){var h;return o.elem.nodeType!==1||o.elem[o.prop]!=null&&o.elem.style[o.prop]==null?o.elem[o.prop]:(h=w.css(o.elem,o.prop,""),!h||h==="auto"?0:h)},set:function(o){w.fx.step[o.prop]?w.fx.step[o.prop](o):o.elem.nodeType===1&&(w.cssHooks[o.prop]||o.elem.style[Yo(o.prop)]!=null)?w.style(o.elem,o.prop,o.now+o.unit):o.elem[o.prop]=o.now}}},Re.propHooks.scrollTop=Re.propHooks.scrollLeft={set:function(o){o.elem.nodeType&&o.elem.parentNode&&(o.elem[o.prop]=o.now)}},w.easing={linear:function(o){return o},swing:function(o){return .5-Math.cos(o*Math.PI)/2},_default:"swing"},w.fx=Re.prototype.init,w.fx.step={};var on,Ur,Xl=/^(?:toggle|show|hide)$/,Yl=/queueHooks$/;function Do(){Ur&&(it.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Do):t.setTimeout(Do,w.fx.interval),w.fx.tick())}function Oo(){return t.setTimeout(function(){on=void 0}),on=Date.now()}function rr(o,h){var d,f=0,c={height:o};for(h=h?1:0;f<4;f+=2-h)d=Si[f],c["margin"+d]=c["padding"+d]=o;return h&&(c.opacity=c.width=o),c}function No(o,h,d){for(var f,c=(Ke.tweeners[h]||[]).concat(Ke.tweeners["*"]),m=0,v=c.length;m<v;m++)if(f=c[m].call(d,h,o))return f}function Po(o,h,d){var f,c,m,v,A,X,O,F,Q="width"in h||"height"in h,M=this,H={},wt=o.style,_t=o.nodeType&&Ci(o),ct=bt.get(o,"fxshow");d.queue||(v=w._queueHooks(o,"fx"),v.unqueued==null&&(v.unqueued=0,A=v.empty.fire,v.empty.fire=function(){v.unqueued||A()}),v.unqueued++,M.always(function(){M.always(function(){v.unqueued--,w.queue(o,"fx").length||v.empty.fire()})}));for(f in h)if(c=h[f],Xl.test(c)){if(delete h[f],m=m||c==="toggle",c===(_t?"hide":"show"))if(c==="show"&&ct&&ct[f]!==void 0)_t=!0;else continue;H[f]=ct&&ct[f]||w.style(o,f)}if(X=!w.isEmptyObject(h),!(!X&&w.isEmptyObject(H))){Q&&o.nodeType===1&&(d.overflow=[wt.overflow,wt.overflowX,wt.overflowY],O=ct&&ct.display,O==null&&(O=bt.get(o,"display")),F=w.css(o,"display"),F==="none"&&(O?F=O:(zi([o],!0),O=o.style.display||O,F=w.css(o,"display"),zi([o]))),(F==="inline"||F==="inline-block"&&O!=null)&&w.css(o,"float")==="none"&&(X||(M.done(function(){wt.display=O}),O==null&&(F=wt.display,O=F==="none"?"":F)),wt.display="inline-block")),d.overflow&&(wt.overflow="hidden",M.always(function(){wt.overflow=d.overflow[0],wt.overflowX=d.overflow[1],wt.overflowY=d.overflow[2]})),X=!1;for(f in H)X||(ct?"hidden"in ct&&(_t=ct.hidden):ct=bt.access(o,"fxshow",{display:O}),m&&(ct.hidden=!_t),_t&&zi([o],!0),M.done(function(){_t||zi([o]),bt.remove(o,"fxshow");for(f in H)w.style(o,f,H[f])})),X=No(_t?ct[f]:0,f,M),f in ct||(ct[f]=X.start,_t&&(X.end=X.start,X.start=0))}}function Ll(o,h){var d,f,c,m,v;for(d in o)if(f=ai(d),c=h[f],m=o[d],Array.isArray(m)&&(c=m[1],m=o[d]=m[0]),d!==f&&(o[f]=m,delete o[d]),v=w.cssHooks[f],v&&"expand"in v){m=v.expand(m),delete o[f];for(d in m)d in o||(o[d]=m[d],h[d]=c)}else h[f]=c}function Ke(o,h,d){var f,c,m=0,v=Ke.prefilters.length,A=w.Deferred().always(function(){delete X.elem}),X=function(){if(c)return!1;for(var Q=on||Oo(),M=Math.max(0,O.startTime+O.duration-Q),H=M/O.duration||0,wt=1-H,_t=0,ct=O.tweens.length;_t<ct;_t++)O.tweens[_t].run(wt);return A.notifyWith(o,[O,wt,M]),wt<1&&ct?M:(ct||A.notifyWith(o,[O,1,0]),A.resolveWith(o,[O]),!1)},O=A.promise({elem:o,props:w.extend({},h),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},d),originalProperties:h,originalOptions:d,startTime:on||Oo(),duration:d.duration,tweens:[],createTween:function(Q,M){var H=w.Tween(o,O.opts,Q,M,O.opts.specialEasing[Q]||O.opts.easing);return O.tweens.push(H),H},stop:function(Q){var M=0,H=Q?O.tweens.length:0;if(c)return this;for(c=!0;M<H;M++)O.tweens[M].run(1);return Q?(A.notifyWith(o,[O,1,0]),A.resolveWith(o,[O,Q])):A.rejectWith(o,[O,Q]),this}}),F=O.props;for(Ll(F,O.opts.specialEasing);m<v;m++)if(f=Ke.prefilters[m].call(O,o,F,O.opts),f)return et(f.stop)&&(w._queueHooks(O.elem,O.opts.queue).stop=f.stop.bind(f)),f;return w.map(F,No,O),et(O.opts.start)&&O.opts.start.call(o,O),O.progress(O.opts.progress).done(O.opts.done,O.opts.complete).fail(O.opts.fail).always(O.opts.always),w.fx.timer(w.extend(X,{elem:o,anim:O,queue:O.opts.queue})),O}w.Animation=w.extend(Ke,{tweeners:{"*":[function(o,h){var d=this.createTween(o,h);return Nr(d.elem,o,Bi.exec(h),d),d}]},tweener:function(o,h){et(o)?(h=o,o=["*"]):o=o.match(ce);for(var d,f=0,c=o.length;f<c;f++)d=o[f],Ke.tweeners[d]=Ke.tweeners[d]||[],Ke.tweeners[d].unshift(h)},prefilters:[Po],prefilter:function(o,h){h?Ke.prefilters.unshift(o):Ke.prefilters.push(o)}}),w.speed=function(o,h,d){var f=o&&typeof o=="object"?w.extend({},o):{complete:d||!d&&h||et(o)&&o,duration:o,easing:d&&h||h&&!et(h)&&h};return w.fx.off?f.duration=0:typeof f.duration!="number"&&(f.duration in w.fx.speeds?f.duration=w.fx.speeds[f.duration]:f.duration=w.fx.speeds._default),(f.queue==null||f.queue===!0)&&(f.queue="fx"),f.old=f.complete,f.complete=function(){et(f.old)&&f.old.call(this),f.queue&&w.dequeue(this,f.queue)},f},w.fn.extend({fadeTo:function(o,h,d,f){return this.filter(Ci).css("opacity",0).show().end().animate({opacity:h},o,d,f)},animate:function(o,h,d,f){var c=w.isEmptyObject(o),m=w.speed(h,d,f),v=function(){var A=Ke(this,w.extend({},o),m);(c||bt.get(this,"finish"))&&A.stop(!0)};return v.finish=v,c||m.queue===!1?this.each(v):this.queue(m.queue,v)},stop:function(o,h,d){var f=function(c){var m=c.stop;delete c.stop,m(d)};return typeof o!="string"&&(d=h,h=o,o=void 0),h&&this.queue(o||"fx",[]),this.each(function(){var c=!0,m=o!=null&&o+"queueHooks",v=w.timers,A=bt.get(this);if(m)A[m]&&A[m].stop&&f(A[m]);else for(m in A)A[m]&&A[m].stop&&Yl.test(m)&&f(A[m]);for(m=v.length;m--;)v[m].elem===this&&(o==null||v[m].queue===o)&&(v[m].anim.stop(d),c=!1,v.splice(m,1));(c||!d)&&w.dequeue(this,o)})},finish:function(o){return o!==!1&&(o=o||"fx"),this.each(function(){var h,d=bt.get(this),f=d[o+"queue"],c=d[o+"queueHooks"],m=w.timers,v=f?f.length:0;for(d.finish=!0,w.queue(this,o,[]),c&&c.stop&&c.stop.call(this,!0),h=m.length;h--;)m[h].elem===this&&m[h].queue===o&&(m[h].anim.stop(!0),m.splice(h,1));for(h=0;h<v;h++)f[h]&&f[h].finish&&f[h].finish.call(this);delete d.finish})}}),w.each(["toggle","show","hide"],function(o,h){var d=w.fn[h];w.fn[h]=function(f,c,m){return f==null||typeof f=="boolean"?d.apply(this,arguments):this.animate(rr(h,!0),f,c,m)}}),w.each({slideDown:rr("show"),slideUp:rr("hide"),slideToggle:rr("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(o,h){w.fn[o]=function(d,f,c){return this.animate(h,d,f,c)}}),w.timers=[],w.fx.tick=function(){var o,h=0,d=w.timers;for(on=Date.now();h<d.length;h++)o=d[h],!o()&&d[h]===o&&d.splice(h--,1);d.length||w.fx.stop(),on=void 0},w.fx.timer=function(o){w.timers.push(o),w.fx.start()},w.fx.interval=13,w.fx.start=function(){Ur||(Ur=!0,Do())},w.fx.stop=function(){Ur=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(o,h){return o=w.fx&&w.fx.speeds[o]||o,h=h||"fx",this.queue(h,function(d,f){var c=t.setTimeout(d,o);f.stop=function(){t.clearTimeout(c)}})},function(){var o=it.createElement("input"),h=it.createElement("select"),d=h.appendChild(it.createElement("option"));o.type="checkbox",G.checkOn=o.value!=="",G.optSelected=d.selected,o=it.createElement("input"),o.value="t",o.type="radio",G.radioValue=o.value==="t"}();var or,Dn=w.expr.attrHandle;w.fn.extend({attr:function(o,h){return Fe(this,w.attr,o,h,arguments.length>1)},removeAttr:function(o){return this.each(function(){w.removeAttr(this,o)})}}),w.extend({attr:function(o,h,d){var f,c,m=o.nodeType;if(!(m===3||m===8||m===2)){if(typeof o.getAttribute=="undefined")return w.prop(o,h,d);if((m!==1||!w.isXMLDoc(o))&&(c=w.attrHooks[h.toLowerCase()]||(w.expr.match.bool.test(h)?or:void 0)),d!==void 0){if(d===null){w.removeAttr(o,h);return}return c&&"set"in c&&(f=c.set(o,d,h))!==void 0?f:(o.setAttribute(h,d+""),d)}return c&&"get"in c&&(f=c.get(o,h))!==null?f:(f=w.find.attr(o,h),f==null?void 0:f)}},attrHooks:{type:{set:function(o,h){if(!G.radioValue&&h==="radio"&&ue(o,"input")){var d=o.value;return o.setAttribute("type",h),d&&(o.value=d),h}}}},removeAttr:function(o,h){var d,f=0,c=h&&h.match(ce);if(c&&o.nodeType===1)for(;d=c[f++];)o.removeAttribute(d)}}),or={set:function(o,h,d){return h===!1?w.removeAttr(o,d):o.setAttribute(d,d),d}},w.each(w.expr.match.bool.source.match(/\w+/g),function(o,h){var d=Dn[h]||w.find.attr;Dn[h]=function(f,c,m){var v,A,X=c.toLowerCase();return m||(A=Dn[X],Dn[X]=v,v=d(f,c,m)!=null?X:null,Dn[X]=A),v}});var Rl=/^(?:input|select|textarea|button)$/i,ja=/^(?:a|area)$/i;w.fn.extend({prop:function(o,h){return Fe(this,w.prop,o,h,arguments.length>1)},removeProp:function(o){return this.each(function(){delete this[w.propFix[o]||o]})}}),w.extend({prop:function(o,h,d){var f,c,m=o.nodeType;if(!(m===3||m===8||m===2))return(m!==1||!w.isXMLDoc(o))&&(h=w.propFix[h]||h,c=w.propHooks[h]),d!==void 0?c&&"set"in c&&(f=c.set(o,d,h))!==void 0?f:o[h]=d:c&&"get"in c&&(f=c.get(o,h))!==null?f:o[h]},propHooks:{tabIndex:{get:function(o){var h=w.find.attr(o,"tabindex");return h?parseInt(h,10):Rl.test(o.nodeName)||ja.test(o.nodeName)&&o.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),G.optSelected||(w.propHooks.selected={get:function(o){var h=o.parentNode;return h&&h.parentNode&&h.parentNode.selectedIndex,null},set:function(o){var h=o.parentNode;h&&(h.selectedIndex,h.parentNode&&h.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this});function Fi(o){var h=o.match(ce)||[];return h.join(" ")}function Ii(o){return o.getAttribute&&o.getAttribute("class")||""}function Mo(o){return Array.isArray(o)?o:typeof o=="string"?o.match(ce)||[]:[]}w.fn.extend({addClass:function(o){var h,d,f,c,m,v,A,X=0;if(et(o))return this.each(function(O){w(this).addClass(o.call(this,O,Ii(this)))});if(h=Mo(o),h.length){for(;d=this[X++];)if(c=Ii(d),f=d.nodeType===1&&" "+Fi(c)+" ",f){for(v=0;m=h[v++];)f.indexOf(" "+m+" ")<0&&(f+=m+" ");A=Fi(f),c!==A&&d.setAttribute("class",A)}}return this},removeClass:function(o){var h,d,f,c,m,v,A,X=0;if(et(o))return this.each(function(O){w(this).removeClass(o.call(this,O,Ii(this)))});if(!arguments.length)return this.attr("class","");if(h=Mo(o),h.length){for(;d=this[X++];)if(c=Ii(d),f=d.nodeType===1&&" "+Fi(c)+" ",f){for(v=0;m=h[v++];)for(;f.indexOf(" "+m+" ")>-1;)f=f.replace(" "+m+" "," ");A=Fi(f),c!==A&&d.setAttribute("class",A)}}return this},toggleClass:function(o,h){var d=typeof o,f=d==="string"||Array.isArray(o);return typeof h=="boolean"&&f?h?this.addClass(o):this.removeClass(o):et(o)?this.each(function(c){w(this).toggleClass(o.call(this,c,Ii(this),h),h)}):this.each(function(){var c,m,v,A;if(f)for(m=0,v=w(this),A=Mo(o);c=A[m++];)v.hasClass(c)?v.removeClass(c):v.addClass(c);else(o===void 0||d==="boolean")&&(c=Ii(this),c&&bt.set(this,"__className__",c),this.setAttribute&&this.setAttribute("class",c||o===!1?"":bt.get(this,"__className__")||""))})},hasClass:function(o){var h,d,f=0;for(h=" "+o+" ";d=this[f++];)if(d.nodeType===1&&(" "+Fi(Ii(d))+" ").indexOf(h)>-1)return!0;return!1}});var Ka=/\r/g;w.fn.extend({val:function(o){var h,d,f,c=this[0];return arguments.length?(f=et(o),this.each(function(m){var v;this.nodeType===1&&(f?v=o.call(this,m,w(this).val()):v=o,v==null?v="":typeof v=="number"?v+="":Array.isArray(v)&&(v=w.map(v,function(A){return A==null?"":A+""})),h=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()],(!h||!("set"in h)||h.set(this,v,"value")===void 0)&&(this.value=v))})):c?(h=w.valHooks[c.type]||w.valHooks[c.nodeName.toLowerCase()],h&&"get"in h&&(d=h.get(c,"value"))!==void 0?d:(d=c.value,typeof d=="string"?d.replace(Ka,""):d==null?"":d)):void 0}}),w.extend({valHooks:{option:{get:function(o){var h=w.find.attr(o,"value");return h!=null?h:Fi(w.text(o))}},select:{get:function(o){var h,d,f,c=o.options,m=o.selectedIndex,v=o.type==="select-one",A=v?null:[],X=v?m+1:c.length;for(m<0?f=X:f=v?m:0;f<X;f++)if(d=c[f],(d.selected||f===m)&&!d.disabled&&(!d.parentNode.disabled||!ue(d.parentNode,"optgroup"))){if(h=w(d).val(),v)return h;A.push(h)}return A},set:function(o,h){for(var d,f,c=o.options,m=w.makeArray(h),v=c.length;v--;)f=c[v],(f.selected=w.inArray(w.valHooks.option.get(f),m)>-1)&&(d=!0);return d||(o.selectedIndex=-1),m}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(o,h){if(Array.isArray(h))return o.checked=w.inArray(w(o).val(),h)>-1}},G.checkOn||(w.valHooks[this].get=function(o){return o.getAttribute("value")===null?"on":o.value})}),G.focusin="onfocusin"in t;var Wr=/^(?:focusinfocus|focusoutblur)$/,$r=function(o){o.stopPropagation()};w.extend(w.event,{trigger:function(o,h,d,f){var c,m,v,A,X,O,F,Q,M=[d||it],H=U.call(o,"type")?o.type:o,wt=U.call(o,"namespace")?o.namespace.split("."):[];if(m=Q=v=d=d||it,!(d.nodeType===3||d.nodeType===8)&&!Wr.test(H+w.event.triggered)&&(H.indexOf(".")>-1&&(wt=H.split("."),H=wt.shift(),wt.sort()),X=H.indexOf(":")<0&&"on"+H,o=o[w.expando]?o:new w.Event(H,typeof o=="object"&&o),o.isTrigger=f?2:3,o.namespace=wt.join("."),o.rnamespace=o.namespace?new RegExp("(^|\\.)"+wt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,o.result=void 0,o.target||(o.target=d),h=h==null?[o]:w.makeArray(h,[o]),F=w.event.special[H]||{},!(!f&&F.trigger&&F.trigger.apply(d,h)===!1))){if(!f&&!F.noBubble&&!lt(d)){for(A=F.delegateType||H,Wr.test(A+H)||(m=m.parentNode);m;m=m.parentNode)M.push(m),v=m;v===(d.ownerDocument||it)&&M.push(v.defaultView||v.parentWindow||t)}for(c=0;(m=M[c++])&&!o.isPropagationStopped();)Q=m,o.type=c>1?A:F.bindType||H,O=(bt.get(m,"events")||Object.create(null))[o.type]&&bt.get(m,"handle"),O&&O.apply(m,h),O=X&&m[X],O&&O.apply&&Le(m)&&(o.result=O.apply(m,h),o.result===!1&&o.preventDefault());return o.type=H,!f&&!o.isDefaultPrevented()&&(!F._default||F._default.apply(M.pop(),h)===!1)&&Le(d)&&X&&et(d[H])&&!lt(d)&&(v=d[X],v&&(d[X]=null),w.event.triggered=H,o.isPropagationStopped()&&Q.addEventListener(H,$r),d[H](),o.isPropagationStopped()&&Q.removeEventListener(H,$r),w.event.triggered=void 0,v&&(d[X]=v)),o.result}},simulate:function(o,h,d){var f=w.extend(new w.Event,d,{type:o,isSimulated:!0});w.event.trigger(f,null,h)}}),w.fn.extend({trigger:function(o,h){return this.each(function(){w.event.trigger(o,h,this)})},triggerHandler:function(o,h){var d=this[0];if(d)return w.event.trigger(o,h,d,!0)}}),G.focusin||w.each({focus:"focusin",blur:"focusout"},function(o,h){var d=function(f){w.event.simulate(h,f.target,w.event.fix(f))};w.event.special[h]={setup:function(){var f=this.ownerDocument||this.document||this,c=bt.access(f,h);c||f.addEventListener(o,d,!0),bt.access(f,h,(c||0)+1)},teardown:function(){var f=this.ownerDocument||this.document||this,c=bt.access(f,h)-1;c?bt.access(f,h,c):(f.removeEventListener(o,d,!0),bt.remove(f,h))}}});var wi=t.location,Bo={guid:Date.now()},Gr=/\?/;w.parseXML=function(o){var h,d;if(!o||typeof o!="string")return null;try{h=new t.DOMParser().parseFromString(o,"text/xml")}catch{}return d=h&&h.getElementsByTagName("parsererror")[0],(!h||d)&&w.error("Invalid XML: "+(d?w.map(d.childNodes,function(f){return f.textContent}).join(`
`):o)),h};var Dl=/\[\]$/,zo=/\r?\n/g,Ja=/^(?:submit|button|image|reset|file)$/i,Qa=/^(?:input|select|textarea|keygen)/i;function Zr(o,h,d,f){var c;if(Array.isArray(h))w.each(h,function(m,v){d||Dl.test(o)?f(o,v):Zr(o+"["+(typeof v=="object"&&v!=null?m:"")+"]",v,d,f)});else if(!d&&nt(h)==="object")for(c in h)Zr(o+"["+c+"]",h[c],d,f);else f(o,h)}w.param=function(o,h){var d,f=[],c=function(m,v){var A=et(v)?v():v;f[f.length]=encodeURIComponent(m)+"="+encodeURIComponent(A==null?"":A)};if(o==null)return"";if(Array.isArray(o)||o.jquery&&!w.isPlainObject(o))w.each(o,function(){c(this.name,this.value)});else for(d in o)Zr(d,o[d],h,c);return f.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var o=w.prop(this,"elements");return o?w.makeArray(o):this}).filter(function(){var o=this.type;return this.name&&!w(this).is(":disabled")&&Qa.test(this.nodeName)&&!Ja.test(o)&&(this.checked||!nn.test(o))}).map(function(o,h){var d=w(this).val();return d==null?null:Array.isArray(d)?w.map(d,function(f){return{name:h.name,value:f.replace(zo,`\r
`)}}):{name:h.name,value:d.replace(zo,`\r
`)}}).get()}});var Ol=/%20/g,Nl=/#.*$/,Pl=/([?&])_=[^&]*/,ts=/^(.*?):[ \t]*([^\r\n]*)$/mg,Ml=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Bl=/^(?:GET|HEAD)$/,zl=/^\/\//,es={},ar={},is="*/".concat("*"),Fo=it.createElement("a");Fo.href=wi.href;function ns(o){return function(h,d){typeof h!="string"&&(d=h,h="*");var f,c=0,m=h.toLowerCase().match(ce)||[];if(et(d))for(;f=m[c++];)f[0]==="+"?(f=f.slice(1)||"*",(o[f]=o[f]||[]).unshift(d)):(o[f]=o[f]||[]).push(d)}}function rs(o,h,d,f){var c={},m=o===ar;function v(A){var X;return c[A]=!0,w.each(o[A]||[],function(O,F){var Q=F(h,d,f);if(typeof Q=="string"&&!m&&!c[Q])return h.dataTypes.unshift(Q),v(Q),!1;if(m)return!(X=Q)}),X}return v(h.dataTypes[0])||!c["*"]&&v("*")}function qo(o,h){var d,f,c=w.ajaxSettings.flatOptions||{};for(d in h)h[d]!==void 0&&((c[d]?o:f||(f={}))[d]=h[d]);return f&&w.extend(!0,o,f),o}function ie(o,h,d){for(var f,c,m,v,A=o.contents,X=o.dataTypes;X[0]==="*";)X.shift(),f===void 0&&(f=o.mimeType||h.getResponseHeader("Content-Type"));if(f){for(c in A)if(A[c]&&A[c].test(f)){X.unshift(c);break}}if(X[0]in d)m=X[0];else{for(c in d){if(!X[0]||o.converters[c+" "+X[0]]){m=c;break}v||(v=c)}m=m||v}if(m)return m!==X[0]&&X.unshift(m),d[m]}function te(o,h,d,f){var c,m,v,A,X,O={},F=o.dataTypes.slice();if(F[1])for(v in o.converters)O[v.toLowerCase()]=o.converters[v];for(m=F.shift();m;)if(o.responseFields[m]&&(d[o.responseFields[m]]=h),!X&&f&&o.dataFilter&&(h=o.dataFilter(h,o.dataType)),X=m,m=F.shift(),m){if(m==="*")m=X;else if(X!=="*"&&X!==m){if(v=O[X+" "+m]||O["* "+m],!v){for(c in O)if(A=c.split(" "),A[1]===m&&(v=O[X+" "+A[0]]||O["* "+A[0]],v)){v===!0?v=O[c]:O[c]!==!0&&(m=A[0],F.unshift(A[1]));break}}if(v!==!0)if(v&&o.throws)h=v(h);else try{h=v(h)}catch(Q){return{state:"parsererror",error:v?Q:"No conversion from "+X+" to "+m}}}}return{state:"success",data:h}}w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wi.href,type:"GET",isLocal:Ml.test(wi.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":is,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(o,h){return h?qo(qo(o,w.ajaxSettings),h):qo(w.ajaxSettings,o)},ajaxPrefilter:ns(es),ajaxTransport:ns(ar),ajax:function(o,h){typeof o=="object"&&(h=o,o=void 0),h=h||{};var d,f,c,m,v,A,X,O,F,Q,M=w.ajaxSetup({},h),H=M.context||M,wt=M.context&&(H.nodeType||H.jquery)?w(H):w.event,_t=w.Deferred(),ct=w.Callbacks("once memory"),ge=M.statusCode||{},jt={},Ce={},Wt="canceled",st={readyState:0,getResponseHeader:function(Pt){var re;if(X){if(!m)for(m={};re=ts.exec(c);)m[re[1].toLowerCase()+" "]=(m[re[1].toLowerCase()+" "]||[]).concat(re[2]);re=m[Pt.toLowerCase()+" "]}return re==null?null:re.join(", ")},getAllResponseHeaders:function(){return X?c:null},setRequestHeader:function(Pt,re){return X==null&&(Pt=Ce[Pt.toLowerCase()]=Ce[Pt.toLowerCase()]||Pt,jt[Pt]=re),this},overrideMimeType:function(Pt){return X==null&&(M.mimeType=Pt),this},statusCode:function(Pt){var re;if(Pt)if(X)st.always(Pt[st.status]);else for(re in Pt)ge[re]=[ge[re],Pt[re]];return this},abort:function(Pt){var re=Pt||Wt;return d&&d.abort(re),le(0,re),this}};if(_t.promise(st),M.url=((o||M.url||wi.href)+"").replace(zl,wi.protocol+"//"),M.type=h.method||h.type||M.method||M.type,M.dataTypes=(M.dataType||"*").toLowerCase().match(ce)||[""],M.crossDomain==null){A=it.createElement("a");try{A.href=M.url,A.href=A.href,M.crossDomain=Fo.protocol+"//"+Fo.host!=A.protocol+"//"+A.host}catch{M.crossDomain=!0}}if(M.data&&M.processData&&typeof M.data!="string"&&(M.data=w.param(M.data,M.traditional)),rs(es,M,h,st),X)return st;O=w.event&&M.global,O&&w.active++===0&&w.event.trigger("ajaxStart"),M.type=M.type.toUpperCase(),M.hasContent=!Bl.test(M.type),f=M.url.replace(Nl,""),M.hasContent?M.data&&M.processData&&(M.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(M.data=M.data.replace(Ol,"+")):(Q=M.url.slice(f.length),M.data&&(M.processData||typeof M.data=="string")&&(f+=(Gr.test(f)?"&":"?")+M.data,delete M.data),M.cache===!1&&(f=f.replace(Pl,"$1"),Q=(Gr.test(f)?"&":"?")+"_="+Bo.guid+++Q),M.url=f+Q),M.ifModified&&(w.lastModified[f]&&st.setRequestHeader("If-Modified-Since",w.lastModified[f]),w.etag[f]&&st.setRequestHeader("If-None-Match",w.etag[f])),(M.data&&M.hasContent&&M.contentType!==!1||h.contentType)&&st.setRequestHeader("Content-Type",M.contentType),st.setRequestHeader("Accept",M.dataTypes[0]&&M.accepts[M.dataTypes[0]]?M.accepts[M.dataTypes[0]]+(M.dataTypes[0]!=="*"?", "+is+"; q=0.01":""):M.accepts["*"]);for(F in M.headers)st.setRequestHeader(F,M.headers[F]);if(M.beforeSend&&(M.beforeSend.call(H,st,M)===!1||X))return st.abort();if(Wt="abort",ct.add(M.complete),st.done(M.success),st.fail(M.error),d=rs(ar,M,h,st),!d)le(-1,"No Transport");else{if(st.readyState=1,O&&wt.trigger("ajaxSend",[st,M]),X)return st;M.async&&M.timeout>0&&(v=t.setTimeout(function(){st.abort("timeout")},M.timeout));try{X=!1,d.send(jt,le)}catch(Pt){if(X)throw Pt;le(-1,Pt)}}function le(Pt,re,an,Vr){var qe,sn,qi,ke,He,Je=re;X||(X=!0,v&&t.clearTimeout(v),d=void 0,c=Vr||"",st.readyState=Pt>0?4:0,qe=Pt>=200&&Pt<300||Pt===304,an&&(ke=ie(M,st,an)),!qe&&w.inArray("script",M.dataTypes)>-1&&w.inArray("json",M.dataTypes)<0&&(M.converters["text script"]=function(){}),ke=te(M,ke,st,qe),qe?(M.ifModified&&(He=st.getResponseHeader("Last-Modified"),He&&(w.lastModified[f]=He),He=st.getResponseHeader("etag"),He&&(w.etag[f]=He)),Pt===204||M.type==="HEAD"?Je="nocontent":Pt===304?Je="notmodified":(Je=ke.state,sn=ke.data,qi=ke.error,qe=!qi)):(qi=Je,(Pt||!Je)&&(Je="error",Pt<0&&(Pt=0))),st.status=Pt,st.statusText=(re||Je)+"",qe?_t.resolveWith(H,[sn,Je,st]):_t.rejectWith(H,[st,Je,qi]),st.statusCode(ge),ge=void 0,O&&wt.trigger(qe?"ajaxSuccess":"ajaxError",[st,M,qe?sn:qi]),ct.fireWith(H,[st,Je]),O&&(wt.trigger("ajaxComplete",[st,M]),--w.active||w.event.trigger("ajaxStop")))}return st},getJSON:function(o,h,d){return w.get(o,h,d,"json")},getScript:function(o,h){return w.get(o,void 0,h,"script")}}),w.each(["get","post"],function(o,h){w[h]=function(d,f,c,m){return et(f)&&(m=m||c,c=f,f=void 0),w.ajax(w.extend({url:d,type:h,dataType:m,data:f,success:c},w.isPlainObject(d)&&d))}}),w.ajaxPrefilter(function(o){var h;for(h in o.headers)h.toLowerCase()==="content-type"&&(o.contentType=o.headers[h]||"")}),w._evalUrl=function(o,h,d){return w.ajax({url:o,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(f){w.globalEval(f,h,d)}})},w.fn.extend({wrapAll:function(o){var h;return this[0]&&(et(o)&&(o=o.call(this[0])),h=w(o,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&h.insertBefore(this[0]),h.map(function(){for(var d=this;d.firstElementChild;)d=d.firstElementChild;return d}).append(this)),this},wrapInner:function(o){return et(o)?this.each(function(h){w(this).wrapInner(o.call(this,h))}):this.each(function(){var h=w(this),d=h.contents();d.length?d.wrapAll(o):h.append(o)})},wrap:function(o){var h=et(o);return this.each(function(d){w(this).wrapAll(h?o.call(this,d):o)})},unwrap:function(o){return this.parent(o).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(o){return!w.expr.pseudos.visible(o)},w.expr.pseudos.visible=function(o){return!!(o.offsetWidth||o.offsetHeight||o.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var Fl={0:200,1223:204},sr=w.ajaxSettings.xhr();G.cors=!!sr&&"withCredentials"in sr,G.ajax=sr=!!sr,w.ajaxTransport(function(o){var h,d;if(G.cors||sr&&!o.crossDomain)return{send:function(f,c){var m,v=o.xhr();if(v.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(m in o.xhrFields)v[m]=o.xhrFields[m];o.mimeType&&v.overrideMimeType&&v.overrideMimeType(o.mimeType),!o.crossDomain&&!f["X-Requested-With"]&&(f["X-Requested-With"]="XMLHttpRequest");for(m in f)v.setRequestHeader(m,f[m]);h=function(A){return function(){h&&(h=d=v.onload=v.onerror=v.onabort=v.ontimeout=v.onreadystatechange=null,A==="abort"?v.abort():A==="error"?typeof v.status!="number"?c(0,"error"):c(v.status,v.statusText):c(Fl[v.status]||v.status,v.statusText,(v.responseType||"text")!=="text"||typeof v.responseText!="string"?{binary:v.response}:{text:v.responseText},v.getAllResponseHeaders()))}},v.onload=h(),d=v.onerror=v.ontimeout=h("error"),v.onabort!==void 0?v.onabort=d:v.onreadystatechange=function(){v.readyState===4&&t.setTimeout(function(){h&&d()})},h=h("abort");try{v.send(o.hasContent&&o.data||null)}catch(A){if(h)throw A}},abort:function(){h&&h()}}}),w.ajaxPrefilter(function(o){o.crossDomain&&(o.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(o){return w.globalEval(o),o}}}),w.ajaxPrefilter("script",function(o){o.cache===void 0&&(o.cache=!1),o.crossDomain&&(o.type="GET")}),w.ajaxTransport("script",function(o){if(o.crossDomain||o.scriptAttrs){var h,d;return{send:function(f,c){h=w("<script>").attr(o.scriptAttrs||{}).prop({charset:o.scriptCharset,src:o.url}).on("load error",d=function(m){h.remove(),d=null,m&&c(m.type==="error"?404:200,m.type)}),it.head.appendChild(h[0])},abort:function(){d&&d()}}}});var os=[],Ho=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var o=os.pop()||w.expando+"_"+Bo.guid++;return this[o]=!0,o}}),w.ajaxPrefilter("json jsonp",function(o,h,d){var f,c,m,v=o.jsonp!==!1&&(Ho.test(o.url)?"url":typeof o.data=="string"&&(o.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ho.test(o.data)&&"data");if(v||o.dataTypes[0]==="jsonp")return f=o.jsonpCallback=et(o.jsonpCallback)?o.jsonpCallback():o.jsonpCallback,v?o[v]=o[v].replace(Ho,"$1"+f):o.jsonp!==!1&&(o.url+=(Gr.test(o.url)?"&":"?")+o.jsonp+"="+f),o.converters["script json"]=function(){return m||w.error(f+" was not called"),m[0]},o.dataTypes[0]="json",c=t[f],t[f]=function(){m=arguments},d.always(function(){c===void 0?w(t).removeProp(f):t[f]=c,o[f]&&(o.jsonpCallback=h.jsonpCallback,os.push(f)),m&&et(c)&&c(m[0]),m=c=void 0}),"script"}),G.createHTMLDocument=function(){var o=it.implementation.createHTMLDocument("").body;return o.innerHTML="<form></form><form></form>",o.childNodes.length===2}(),w.parseHTML=function(o,h,d){if(typeof o!="string")return[];typeof h=="boolean"&&(d=h,h=!1);var f,c,m;return h||(G.createHTMLDocument?(h=it.implementation.createHTMLDocument(""),f=h.createElement("base"),f.href=it.location.href,h.head.appendChild(f)):h=it),c=Qi.exec(o),m=!d&&[],c?[h.createElement(c[1])]:(c=Ba([o],h,m),m&&m.length&&w(m).remove(),w.merge([],c.childNodes))},w.fn.load=function(o,h,d){var f,c,m,v=this,A=o.indexOf(" ");return A>-1&&(f=Fi(o.slice(A)),o=o.slice(0,A)),et(h)?(d=h,h=void 0):h&&typeof h=="object"&&(c="POST"),v.length>0&&w.ajax({url:o,type:c||"GET",dataType:"html",data:h}).done(function(X){m=arguments,v.html(f?w("<div>").append(w.parseHTML(X)).find(f):X)}).always(d&&function(X,O){v.each(function(){d.apply(this,m||[X.responseText,O,X])})}),this},w.expr.pseudos.animated=function(o){return w.grep(w.timers,function(h){return o===h.elem}).length},w.offset={setOffset:function(o,h,d){var f,c,m,v,A,X,O,F=w.css(o,"position"),Q=w(o),M={};F==="static"&&(o.style.position="relative"),A=Q.offset(),m=w.css(o,"top"),X=w.css(o,"left"),O=(F==="absolute"||F==="fixed")&&(m+X).indexOf("auto")>-1,O?(f=Q.position(),v=f.top,c=f.left):(v=parseFloat(m)||0,c=parseFloat(X)||0),et(h)&&(h=h.call(o,d,w.extend({},A))),h.top!=null&&(M.top=h.top-A.top+v),h.left!=null&&(M.left=h.left-A.left+c),"using"in h?h.using.call(o,M):Q.css(M)}},w.fn.extend({offset:function(o){if(arguments.length)return o===void 0?this:this.each(function(c){w.offset.setOffset(this,o,c)});var h,d,f=this[0];if(!!f)return f.getClientRects().length?(h=f.getBoundingClientRect(),d=f.ownerDocument.defaultView,{top:h.top+d.pageYOffset,left:h.left+d.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var o,h,d,f=this[0],c={top:0,left:0};if(w.css(f,"position")==="fixed")h=f.getBoundingClientRect();else{for(h=this.offset(),d=f.ownerDocument,o=f.offsetParent||d.documentElement;o&&(o===d.body||o===d.documentElement)&&w.css(o,"position")==="static";)o=o.parentNode;o&&o!==f&&o.nodeType===1&&(c=w(o).offset(),c.top+=w.css(o,"borderTopWidth",!0),c.left+=w.css(o,"borderLeftWidth",!0))}return{top:h.top-c.top-w.css(f,"marginTop",!0),left:h.left-c.left-w.css(f,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var o=this.offsetParent;o&&w.css(o,"position")==="static";)o=o.offsetParent;return o||si})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(o,h){var d=h==="pageYOffset";w.fn[o]=function(f){return Fe(this,function(c,m,v){var A;if(lt(c)?A=c:c.nodeType===9&&(A=c.defaultView),v===void 0)return A?A[h]:c[m];A?A.scrollTo(d?A.pageXOffset:v,d?v:A.pageYOffset):c[m]=v},o,f,arguments.length)}}),w.each(["top","left"],function(o,h){w.cssHooks[h]=Ha(G.pixelPosition,function(d,f){if(f)return f=Rn(d,h),Xo.test(f)?w(d).position()[h]+"px":f})}),w.each({Height:"height",Width:"width"},function(o,h){w.each({padding:"inner"+o,content:h,"":"outer"+o},function(d,f){w.fn[f]=function(c,m){var v=arguments.length&&(d||typeof c!="boolean"),A=d||(c===!0||m===!0?"margin":"border");return Fe(this,function(X,O,F){var Q;return lt(X)?f.indexOf("outer")===0?X["inner"+o]:X.document.documentElement["client"+o]:X.nodeType===9?(Q=X.documentElement,Math.max(X.body["scroll"+o],Q["scroll"+o],X.body["offset"+o],Q["offset"+o],Q["client"+o])):F===void 0?w.css(X,O,A):w.style(X,O,F,A)},h,v?c:void 0,v)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(o,h){w.fn[h]=function(d){return this.on(h,d)}}),w.fn.extend({bind:function(o,h,d){return this.on(o,null,h,d)},unbind:function(o,h){return this.off(o,null,h)},delegate:function(o,h,d,f){return this.on(h,o,d,f)},undelegate:function(o,h,d){return arguments.length===1?this.off(o,"**"):this.off(h,o||"**",d)},hover:function(o,h){return this.mouseenter(o).mouseleave(h||o)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(o,h){w.fn[h]=function(d,f){return arguments.length>0?this.on(h,null,d,f):this.trigger(h)}});var ql=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(o,h){var d,f,c;if(typeof h=="string"&&(d=o[h],h=o,o=d),!!et(o))return f=g.call(arguments,2),c=function(){return o.apply(h||this,f.concat(g.call(arguments)))},c.guid=o.guid=o.guid||w.guid++,c},w.holdReady=function(o){o?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=ue,w.isFunction=et,w.isWindow=lt,w.camelCase=ai,w.type=nt,w.now=Date.now,w.isNumeric=function(o){var h=w.type(o);return(h==="number"||h==="string")&&!isNaN(o-parseFloat(o))},w.trim=function(o){return o==null?"":(o+"").replace(ql,"")};var Hl=t.jQuery,as=t.$;return w.noConflict=function(o){return t.$===w&&(t.$=as),o&&t.jQuery===w&&(t.jQuery=Hl),w},typeof e=="undefined"&&(t.jQuery=t.$=w),w})})(Pg);var Oe=Pg.exports;class i2{constructor(t,e){this.time=t,this.duration=e}isOver(t){return t-this.time>this.duration}}class n2{constructor(t,e,a=5e3,l){this.instance=t,this.position=l,this.duration=5e3,this.static=!1,this.timer=new i2(Date.now(),a),this.element=this.createBlob(t,e),this.static=!!this.position}update(t,e){this.timer.time=e,Oe(this.element).find("p").html(t)}isOver(t){return this.timer.isOver(t)}destroy(){Oe(this.element).remove()}createBlob(t,e){return Oe(`<div id="${t}" class="bubble"><p>${e}</p><div class="bubble-tip"></div></div>`)}}class r2{constructor(t){this.game=t,this.container=Oe("#bubbles"),this.bubbles={}}create(t,e,a=5e3,l){let g=this.bubbles[t];if(g)return g.update(e,Date.now());this.bubbles[t]=new n2(t,e,a,l),this.bubbles[t].element.appendTo(this.container)}setTo(t,e,a){let l=this.bubbles[t],{zoomFactor:g}=this.game.camera,p=this.game.renderer.tileSize*g,x=parseInt(l.element.css("width"))+24,N=x/2-p/2,b=-20;e=(e-this.game.camera.x)*g,a=(a-this.game.camera.y)*g-p*2-b,l.element.css({left:`${e-N+3}px`,top:`${a}px`})}update(t){vt.each(this.bubbles,e=>{let a=this.game.entities.get(e.instance);a&&this.setTo(a.instance,a.x,a.y),e.static&&this.setTo(e.instance,e.position.x,e.position.y),e.isOver(t)&&this.destroy(e)})}clear(t){this.bubbles[t]&&this.destroy(this.bubbles[t])}destroy(t){t.destroy(),delete this.bubbles[t.instance]}clean(){vt.each(this.bubbles,t=>t.destroy()),this.bubbles={}}}class Au{constructor(){this.startValue=0,this.endValue=0,this.duration=0,this.inProgress=!1}start(t,e,a,l,g,p){this.startTime=t,this.startValue=e,this.endValue=a,this.duration=l,this.updateCallback=g,this.stopCallback=p,this.inProgress=!0}step(t){var g,p;if(!this.inProgress)return;let e=t-this.startTime;e>this.duration&&(e=this.duration);let a=this.endValue-this.startValue,l=Math.round(this.startValue+a/this.duration*e);e===this.duration||l===this.endValue?(this.inProgress=!1,(g=this.stopCallback)==null||g.call(this)):(p=this.updateCallback)==null||p.call(this,l)}}class Un{constructor(t,e,a,l,g){this.name=t,this.length=e,this.row=a,this.width=l,this.height=g,this.reset()}tick(){var N;let{currentFrame:t,length:e,count:a,width:l,height:g,row:p}=this,x=t.index;if(x=x<e-1?x+1:0,a>0&&x===0){this.count-=1;let{count:b}=this;if(b===0){t.index=0,(N=this.endCountCallback)==null||N.call(this);return}}t.x=l*x,t.y=g*p,t.index=x}update(t){let{lastTime:e,name:a}=this;return e===0&&a.slice(0,3)==="atk"&&(this.lastTime=t),this.readyToAnimate(t)?(this.lastTime=t,this.tick(),!0):!1}setCount(t,e){this.count=t,this.endCountCallback=e}setSpeed(t){this.speed=t}setRow(t){this.row=t}readyToAnimate(t){return t-this.lastTime>this.speed}reset(){this.lastTime=0,this.currentFrame={index:0,x:0,y:this.row*this.height}}}class fl{constructor(t="",e){this.instance=t,this.type=e,this.x=0,this.y=0,this.gridX=0,this.gridY=0,this.name="",this.spriteFlipX=!1,this.spriteFlipY=!1,this.idleSpeed=450,this.shadowOffsetY=0,this.hidden=!1,this.targeted=!1,this.spriteLoaded=!1,this.visible=!0,this.fading=!1,this.angled=!1,this.angle=0,this.critical=!1,this.stunned=!1,this.terror=!1,this.hasCounter=!1,this.countdownTime=0,this.counter=0,this.fadingDuration=1e3,this.hitPoints=0,this.maxHitPoints=0,this.mana=0,this.maxMana=0,this.level=1,this.experience=0,this.lastUpdate=Date.now()}fadeIn(t){this.fading=!0,this.fadingTime=t}blink(t=150){this.blinking=window.setInterval(()=>this.toggleVisibility(),t)}stopBlinking(){let{blinking:t}=this;t&&clearInterval(t),this.setVisible(!0)}idle(){}setSprite(t){var e;!t||this.sprite&&this.sprite.name===t.name||(this.isPlayer()&&(t.loadHurt=!0),t.loaded||t.load(),t.name=t.id,this.sprite=t,this.normalSprite=this.sprite,this.animations=t.createAnimations(),t.onLoad(()=>{t.loadHurt&&(this.hurtSprite=t.hurtSprite)}),this.spriteLoaded=!0,(e=this.readyCallback)==null||e.call(this))}setAnimation(t,e,a=0,l){var p;if(!this.spriteLoaded||((p=this.animation)==null?void 0:p.name)===t)return;let g=this.animations[t];!g||(this.animation=g,t.startsWith("atk")&&this.animation.reset(),this.animation.setSpeed(e),this.animation.setCount(a,l||(()=>this.idle())))}animateDeath(t,e=120,a=1){this.setAnimation("death",e,a,t)}setPosition(t,e){this.x=t,this.y=e}setGridPosition(t,e){this.gridX=t,this.gridY=e,this.setPosition(t*16,e*16)}setCountdown(t){this.counter=t,this.countdownTime=Date.now(),this.hasCounter=!0}setVisible(t){this.visible=t}setIdleSpeed(t){this.idleSpeed=t}hasWeapon(){return!1}getDistance(t){let{gridX:e,gridY:a}=this,l=Math.abs(e-t.gridX),g=Math.abs(a-t.gridY);return l>g?l:g}getAngle(){return 0}getTimeDiff(){return 0}toggleVisibility(){this.setVisible(!this.visible)}isVisible(){return this.visible}drawNames(){return!0}hasShadow(){return!1}hasPath(){return!1}isPlayer(){return this.type===ne.Player}isMob(){return this.type===ne.Mob}isNPC(){return this.type===ne.NPC}isItem(){return this.type===ne.Item}isChest(){return this.type===ne.Chest}isProjectile(){return this.type===ne.Projectile}isObject(){return this.type===ne.Object}}class o2{constructor(t){this.entity=t}load(){let{entity:t,game:e,entities:a}=this;(!t||!e)&&!(t instanceof In)||(t.onRequestPath((l,g)=>t.gridX===l&&t.gridY===g?[]:e.findPath(t,l,g)),t.onBeforeStep(()=>a.unregisterPosition(t)),t.onStep(()=>{a.registerPosition(t),t.isMob()&&(t.targeted||t.hasTarget())&&e.socket.send(dt.Movement,{opcode:gi.Entity,targetInstance:t.instance,requestX:t.gridX,requestY:t.gridY})}))}setGame(t){this.game||(this.game=t),this.setEntities(this.game.entities)}setEntities(t){this.entities||(this.entities=t)}}class In extends fl{constructor(t,e){super(t,e);this.healthBarVisible=!1,this.following=!1,this.interrupted=!1,this.explosion=!1,this.healing=!1,this.path=null,this.target=null,this.attackers={},this.movement=new Au,this.attackAnimationSpeed=50,this.walkAnimationSpeed=100,this.nextGridX=-1,this.nextGridY=-1,this.movementSpeed=-1,this.attackRange=1,this.critical=!1,this.frozen=!1,this.stunned=!1,this.dead=!1,this.orientation=Gt.Down,this.criticalAnimation=new Un("atk_down",10,0,48,48),this.terrorAnimation=new Un("explosion",8,0,64,64),this.stunAnimation=new Un("atk_down",6,0,48,48),this.explosionAnimation=new Un("explosion",8,0,64,64),this.healingAnimation=new Un("explosion",8,0,64,64),this.handler=new o2(this),this.loadAnimations()}loadAnimations(){this.criticalAnimation.setSpeed(30),this.criticalAnimation.setCount(1,()=>{this.critical=!1,this.criticalAnimation.reset(),this.criticalAnimation.count=1}),this.terrorAnimation.setSpeed(50),this.terrorAnimation.setCount(1,()=>{this.terror=!1,this.terrorAnimation.reset(),this.terrorAnimation.count=1}),this.stunAnimation.setSpeed(30),this.explosionAnimation.setSpeed(50),this.explosionAnimation.setCount(1,()=>{this.explosion=!1,this.explosionAnimation.reset(),this.explosionAnimation.count=1}),this.healingAnimation.setSpeed(50),this.healingAnimation.setCount(1,()=>{this.healing=!1,this.healingAnimation.reset(),this.healingAnimation.count=1})}animate(t,e,a=1,l){var p;let g=["atk","walk","idle"];((p=this.animation)==null?void 0:p.name)!=="death"&&(this.spriteFlipX=!1,this.spriteFlipY=!1,g.includes(t)&&(t+=`_${this.orientation===Gt.Left?"right":this.orientationToString()}`,this.spriteFlipX=this.orientation===Gt.Left),this.setAnimation(t,e,a,l))}animateDeath(t,e=120,a=1){this.animate("death",e,a,t)}toggleHurt(){this.sprite=this.hurtSprite,window.setTimeout(()=>{this.sprite=this.normalSprite},75)}despawn(){this.hitPoints=0,this.dead=!0,this.stop(),this.orientation=Gt.Down}follow(t){this.following=!0,this.setTarget(t),this.move(t.gridX,t.gridY)}followPosition(t,e){this.following=!0,this.move(t,e)}addAttacker(t){this.hasAttacker(t)||(this.attackers[t.instance]=t)}hasAttacker(t){let{attackers:e}=this;return e[0]?t.instance in e:!1}performAction(t,e){switch(this.setOrientation(t),e){case ni.Idle:this.animate("idle",this.idleSpeed);break;case ni.Orientate:this.animate("idle",this.idleSpeed);break;case ni.Attack:this.animate("atk",this.attackAnimationSpeed,1);break;case ni.Walk:this.animate("walk",this.walkAnimationSpeed);break}}idle(t){let e=t||this.orientation;this.performAction(e,ni.Idle)}orientationToString(){switch(this.orientation){case Gt.Left:return"left";case Gt.Right:return"right";case Gt.Up:return"up";case Gt.Down:return"down"}}lookAt(t){let{gridX:e,gridY:a}=this;t.gridX>e?this.setOrientation(Gt.Right):t.gridX<e?this.setOrientation(Gt.Left):t.gridY>a?this.setOrientation(Gt.Down):t.gridY<a&&this.setOrientation(Gt.Up),this.idle()}go(t,e,a=!1){this.frozen||(this.following&&(this.following=!1,this.target=null),this.move(t,e,a))}move(t,e,a=!1){this.hasPath()&&!a?this.proceed(t,e):this.followPath(this.requestPathfinding(t,e))}proceed(t,e){this.newDestination={x:t,y:e}}nextStep(){var g,p;let t=!1,e,a,l;if(this.step%2===0&&this.secondStepCallback&&this.secondStepCallback(),!!this.hasPath()){if((g=this.beforeStepCallback)==null||g.call(this),this.updateGridPosition(),!this.interrupted&&this.path)if(this.hasNextStep()&&([this.nextGridX,this.nextGridY]=this.path[this.step+1]),(p=this.stepCallback)==null||p.call(this),this.changedPath()){if({x:e,y:a}=this.newDestination,l=this.requestPathfinding(e,a),!l)return;this.newDestination=null,l.length<2?t=!0:this.followPath(l)}else this.hasNextStep()?(this.step++,this.updateMovement()):t=!0;else t=!0,this.interrupted=!1;t&&(this.path=null,this.idle(),this.stopPathingCallback&&this.stopPathingCallback(this.gridX,this.gridY,this.forced),this.forced&&(this.forced=!1))}}updateMovement(){let{path:t,step:e}=this;!t||(t[e][0]<t[e-1][0]&&this.performAction(Gt.Left,ni.Walk),t[e][0]>t[e-1][0]&&this.performAction(Gt.Right,ni.Walk),t[e][1]<t[e-1][1]&&this.performAction(Gt.Up,ni.Walk),t[e][1]>t[e-1][1]&&this.performAction(Gt.Down,ni.Walk))}followPath(t){var e;!t||t.length<2||(this.path=t,this.step=0,this.following&&t.pop(),(e=this.startPathingCallback)==null||e.call(this,t),this.nextStep())}stop(t=!1){t?this.hasPath()&&(this.path=null,this.newDestination=null,this.movement=new Au,this.performAction(this.orientation,ni.Idle),this.nextGridX=this.gridX,this.nextGridY=this.gridY):this.interrupted=!0}hasEffect(){return this.critical||this.stunned||this.terror||this.explosion||this.healing}getEffectAnimation(){if(this.critical)return this.criticalAnimation;if(this.stunned)return this.stunAnimation;if(this.terror)return this.terrorAnimation;if(this.explosion)return this.explosionAnimation;if(this.healing)return this.healingAnimation}getActiveEffect(){return this.critical?"criticaleffect":this.stunned?"stuneffect":this.terror?"explosion-terror":this.explosion?"explosion-fireball":this.healing?"explosion-heal":""}triggerHealthBar(){this.healthBarVisible=!0,this.healthBarTimeout&&clearTimeout(this.healthBarTimeout),this.healthBarTimeout=window.setTimeout(()=>{this.healthBarVisible=!1},7e3)}clearHealthBar(){this.healthBarVisible=!1,clearTimeout(this.healthBarTimeout),this.healthBarTimeout=null}requestPathfinding(t,e){var a;return((a=this.requestPathCallback)==null?void 0:a.call(this,t,e))||null}updateGridPosition(){!this.path||this.path.length===0||this.setGridPosition(this.path[this.step][0],this.path[this.step][1])}forEachAttacker(t){vt.each(this.attackers,e=>t(e))}hasWeapon(){return!1}hasShadow(){return!0}hasPath(){return this.path!==null}hasNextStep(){return this.path&&this.path.length-1>this.step}changedPath(){return!!this.newDestination}removeTarget(){this.target&&(this.target.targeted=!1),this.target=null}forget(){this.attackers={}}moved(){var t;(t=this.moveCallback)==null||t.call(this)}setTarget(t){this.target=t,this.target.targeted=!0}hasTarget(t){return t?this.target===t:!!this.target}setObjectTarget(t){let e=new In(`${t.x}-${t.y}`,ne.Object);e.setGridPosition(t.x,t.y),this.setTarget(e),this.followPosition(t.x,t.y)}setHitPoints(t,e){var l;let a=!1;t<0&&(t=0),t<this.hitPoints&&(a=!0),this.hitPoints=t,e&&(this.maxHitPoints=e),(l=this.hitPointsCallback)==null||l.call(this,this.hitPoints,e||this.maxHitPoints,a)}setOrientation(t){this.orientation=t}onRequestPath(t){this.requestPathCallback=t}onStartPathing(t){this.startPathingCallback=t}onStopPathing(t){this.stopPathingCallback=t}onBeforeStep(t){this.beforeStepCallback=t}onStep(t){this.stepCallback=t}onSecondStep(t){this.secondStepCallback=t}onMove(t){this.moveCallback=t}onHitPoints(t){this.hitPointsCallback=t}}class a2 extends In{constructor(t){super(t,ne.Mob);this.hiddenName=!1}hasShadow(){return!this.hiddenName}drawNames(){return!this.hiddenName}}class s2 extends In{constructor(t){super(t,ne.NPC)}}class Xu{constructor(t,e,a,l,g){this.name=t,this.description=e,this.stage=a,this.stageCount=l,this.subStage=g}update(t,e,a){this.stage=t,e&&(this.subStage=e),a&&(this.name=a)}isFinished(){return this.stage>=this.stageCount}isStarted(){return this.stage>0}}class Yu{constructor(t,e=0,a=1){this.type=t,this.experience=e,this.level=a,this.name=po[this.type],this.percentage=0}update(t,e,a){this.experience=t,this.level=e||this.level,this.percentage=a||this.percentage}}class La{constructor(t="",e="",a=0,l=-1,g=-1,p=0,x=!1){this.key=t,this.name=e,this.count=a,this.ability=l,this.abilityLevel=g,this.power=p,this.ranged=x}update(t="",e="",a=0,l=-1,g=-1,p=0,x=!1){this.key=t,this.name=e,this.count=a,this.ability=l,this.abilityLevel=g,this.power=p,this.ranged=x}exists(){return this.key!==""}}class l2 extends La{constructor(t="clotharmor",e="Cloth Armor",a=1,l=-1,g=-1,p=1){super(t,e,a,l,g,p)}update(t="clotharmor",e="Cloth Armor",a=0,l=-1,g=-1,p=0){this.key=t,this.name=e,this.count=a,this.ability=l,this.abilityLevel=g,this.power=p}}class h2 extends La{}class d2 extends La{}class f2 extends La{}class u2 extends La{}class Mg extends In{constructor(t){super(t,ne.Player);this.rights=0,this.wanted=!1,this.pvpKills=-1,this.pvpDeaths=-1,this.moveLeft=!1,this.moveRight=!1,this.moveUp=!1,this.moveDown=!1,this.poison=!1,this.disableAction=!1,this.moving=!1,this.hitPoints=-1,this.maxHitPoints=-1,this.mana=-1,this.maxMana=-1,this.pvp=!1,this.equipments={[be.Armour]:new l2,[be.Boots]:new h2,[be.Pendant]:new d2,[be.Ring]:new f2,[be.Weapon]:new u2},this.skills={[po.Lumberjacking]:new Yu(po.Lumberjacking),[po.Mining]:new Yu(po.Mining)},this.quests={},this.achievements={}}load(t){this.instance=t.instance,this.name=t.name,this.level=t.level,this.movementSpeed=t.movementSpeed,this.setOrientation(t.orientation),this.setGridPosition(t.x,t.y),this.setHitPoints(t.hitPoints,t.maxHitPoints),this.setMana(t.mana,t.maxMana),t.equipments&&vt.each(t.equipments,this.equip.bind(this)),isNaN(t.experience)||this.setExperience(t.experience,t.nextExperience,t.prevExperience)}loadHandler(t){this.handler.setGame(t),this.handler.load()}loadSkills(t){vt.each(t,e=>this.setSkill(e))}loadQuests(t){vt.each(t,e=>{this.quests[e.key]=new Xu(e.name,e.description,e.stage,e.stageCount,e.subStage)})}loadAchievements(t){vt.each(t,e=>{this.achievements[e.key]=new Xu(e.name,e.description,e.stage,e.stageCount)})}equip(t){let{type:e,name:a,key:l,count:g,ability:p,abilityLevel:x,power:N,ranged:b}=t;if(!l)return this.unequip(e);this.equipments[e].update(l,a,g,p,x,N,b)}unequip(t){this.equipments[t].update()}sync(){var t;(t=this.syncCallback)==null||t.call(this)}getSpriteName(){return this.equipments[be.Armour].key}getArmour(){return this.equipments[be.Armour]}getBoots(){return this.equipments[be.Boots]}getPendant(){return this.equipments[be.Pendant]}getRing(){return this.equipments[be.Ring]}getWeapon(){return this.equipments[be.Weapon]}setMana(t,e){this.mana=t,e&&(this.maxMana=e)}setSkill({type:t,experience:e,level:a,percentage:l}){this.skills[t].update(e,a,l)}setQuest(t,e,a){var l;(l=this.quests[t])==null||l.update(e,a)}setAchievement(t,e,a){var l;(l=this.achievements[t])==null||l.update(e,void 0,a)}setPoison(t){this.poison!==t&&(this.poison=t,this.poison?Oe("#health").css("background","-webkit-linear-gradient(right, #079231, #012b0c)"):Oe("#health").css("background","-webkit-linear-gradient(right, #ff0000, #ef5a5a)"))}setExperience(t,e,a){var l;this.experience=t,this.sync(),!(isNaN(a)||!e)&&((l=this.experienceCallback)==null||l.call(this,t,a,e))}isRanged(){return this.equipments[be.Weapon].ranged}hasWeapon(){return this.equipments[be.Weapon].exists()}hasKeyboardMovement(){return this.moveLeft||this.moveRight||this.moveUp||this.moveDown}onExperience(t){this.experienceCallback=t}onSync(t){this.syncCallback=t}}class g2 extends fl{constructor(t){super(t,ne.Chest)}idle(){this.setAnimation("idle_down",150)}}class Lu extends fl{constructor(t,e=1,a=-1,l=-1){super(t,ne.Item);this.count=e,this.ability=a,this.abilityLevel=l,this.dropped=!1}idle(){this.setAnimation("idle",150)}hasShadow(){return!0}}class w2{constructor(t){this.map=t,this.renderingGrid=[],this.load()}load(){for(let t=0;t<this.map.height;t++){this.renderingGrid[t]=[];for(let e=0;e<this.map.width;e++)this.renderingGrid[t][e]={}}se.debug("Finished generating the rendering grid.")}addToRenderingGrid(t){let{instance:e,gridX:a,gridY:l}=t;this.map.isOutOfBounds(a,l)||(this.renderingGrid[l][a][e]=t)}removeFromRenderingGrid({instance:t,gridX:e,gridY:a}){delete this.renderingGrid[a][e][t]}}class Bg extends fl{constructor(t,e){super(t,ne.Projectile);this.owner=e,this.type=ne.Projectile,this.speed=150,this.fadingDuration=100}impact(){var t;(t=this.impactCallback)==null||t.call(this)}setStart(t,e){this.setGridPosition(Math.floor(t/16),Math.floor(e/16))}setTarget(t){!t||(this.target=t,this.updateAngle())}getSpeed(){return 1}getTimeDiff(){return(Date.now()-this.lastUpdate)/1e3}updateAngle(){!this.target||(this.angle=Math.atan2(this.target.y-this.y,this.target.x-this.x)*(180/Math.PI)-90)}getAngle(){return this.angle*Math.PI/180}onImpact(t){this.impactCallback=t}}class c2{constructor(t){this.game=t,this.grids=new w2(this.game.map),this.sprites=this.game.sprites,this.entities={},this.decrepit=[],this.game.input.loadCursors()}create(t){if(this.isPlayer(t.instance)||t.instance in this.entities)return;let e;switch(t.type){case ne.Chest:e=this.createChest(t.instance);break;case ne.NPC:e=this.createNPC(t.instance);break;case ne.Item:e=this.createItem(t);break;case ne.Mob:e=this.createMob(t);break;case ne.Projectile:e=this.createProjectile(t);break;case ne.Player:e=this.createPlayer(t);break}if(!e)return se.error(`Failed to create entity ${t.instance}`);let a=this.game.sprites.get(e.isItem()?`item-${t.key}`:t.key);if(!a)return se.error(`Failed to create sprite for entity ${t.key}.`);e.name=t.name,e.setGridPosition(t.x,t.y),e.setSprite(a),e.setIdleSpeed(a.idleSpeed),e.idle(),this.addEntity(e),e.handler&&(e.handler.setGame(this.game),e.handler.load())}createChest(t){return new g2(t)}createNPC(t){return new s2(t)}createItem(t){return new Lu(t.instance,t.count,t.ability,t.abilityLevel)}createMob(t){let e=new a2(t.instance);return e.setHitPoints(t.hitPoints,t.maxHitPoints),e.attackRange=t.attackRange,e.level=t.level,e.hiddenName=t.hiddenName,e.movementSpeed=t.movementSpeed,e}createProjectile(t){let e=this.get(t.ownerInstance),a=this.get(t.targetInstance);if(!e||!a)return;e.lookAt(a);let l=new Bg(t.instance,e);return l.name=t.name,l.setStart(e.x,e.y),l.setTarget(a),l.setSprite(this.game.sprites.get(l.name)),l.setAnimation("travel",l.getSpeed()),l.angled=!0,l.type=t.type,l.onImpact(()=>{(this.isPlayer(l.owner.instance)||this.isPlayer(a.instance))&&this.game.socket.send(dt.Projectile,{opcode:Dg.Impact,instance:t.instance,target:a.instance}),t.hitType===Xe.Explosive&&(a.explosion=!0),this.game.info.create(Xe.Damage,t.damage,a.x,a.y,this.isPlayer(a.instance)),a.triggerHealthBar(),this.unregisterPosition(l),delete this.entities[l.instance]}),e.performAction(e.orientation,ni.Attack),e.triggerHealthBar(),l}createPlayer(t){let e=new Mg(t.instance);return e.load(t),e.loadHandler(this.game),e.setSprite(this.game.sprites.get(e.getSpriteName())),e}isPlayer(t){return this.game.player.instance===t}get(t){return this.entities[t]}addEntity(t){this.entities[t.instance]=t,this.registerPosition(t),t instanceof Lu&&t.dropped||t.fadeIn(this.game.time)}removeEntity(t){this.unregisterPosition(t),delete this.entities[t.instance]}removeItem(t){this.unregisterPosition(t),delete this.entities[t.instance]}removeChest(t){t.setSprite(this.game.sprites.getDeath()),t.animateDeath(()=>{this.unregisterPosition(t),delete this.entities[t.instance]})}registerPosition(t){this.grids.addToRenderingGrid(t)}unregisterPosition(t){this.grids.removeFromRenderingGrid(t)}clean(){this.decrepit.length!==0&&vt.each(this.decrepit,t=>this.removeEntity(t))}cleanDisplayInfo(){vt.each(this.entities,t=>{t.nameColour="",t.customScale=0})}clearPlayers(t){vt.each(this.entities,e=>{e.isPlayer()&&e.instance!==t.instance&&this.removeEntity(e)})}getAll(){return this.entities}forEachEntity(t){vt.each(this.entities,t)}}class p2{constructor(t,e,a,l,g,p=!1){this.id=t,this.type=e,this.value=a,this.x=l,this.y=g,this.opacity=1,this.text=`${this.value}`,this.prefix="",this.suffix="",this.lastTime=0,this.speed=100,this.updateY=this.isHeal()?2:1,this.duration=this.isHeal()?400:1e3,this.colour=j1[this.type],this.fill=this.colour.fill,this.stroke=this.colour.stroke,p&&this.hasInflicted()&&(this.fill=this.colour.inflicted.fill,this.stroke=this.colour.inflicted.stroke),this.isDamage()&&a<1&&(this.text="MISS"),this.isPoison()&&(this.prefix="--"),this.isPoints()&&(this.prefix="++"),this.isExperience()&&(this.prefix="+",this.suffix="EXP")}update(t){var e;t-this.lastTime>this.speed&&(this.y-=this.updateY,this.lastTime=t,this.opacity-=70/this.duration,this.opacity<0&&((e=this.destroyCallback)==null||e.call(this,this.id)))}getText(){return`${this.prefix}${this.text} ${this.suffix}`}isHeal(){return this.type===Xe.Heal}isPoison(){return this.type===Xe.Poison}isExperience(){return this.type===Xe.Experience||this.type===Xe.Profession}isPoints(){return this.type===Xe.Heal||this.type===Xe.Mana}isDamage(){return this.type===Xe.Damage||this.type===Xe.Stun||this.type===Xe.Critical}hasInflicted(){return this.colour.inflicted!==void 0}onDestroy(t){this.destroyCallback=t}}class _2{constructor(){this.infos={}}create(t,e,a,l,g=!1){let p=ye.createId(Date.now(),a,l);this.addInfo(new p2(p,t,e,a,l,g))}addInfo(t){this.infos[t.id]=t,t.onDestroy(e=>delete this.infos[e])}isEmpty(){return vt.size(this.infos)===0}update(t){this.forEachInfo(e=>e.update(t))}forEachInfo(t){vt.each(this.infos,t)}}class m2{constructor(t){this.game=t,this.chatBox=Oe("#chat"),this.log=Oe("#chat-log"),this.input=Oe("#chat-input"),this.button=Oe("#chat-button"),this.fadingDuration=5e3,this.button.on("click",()=>this.toggle())}keyDown(t){if(t==="Enter"&&this.input.val()!=="")return this.send();(t==="Escape"||t==="Enter")&&this.toggle()}add(t,e,a="",l=!1){let g=this.createElement(t,e);g.css("color",a||"white"),this.log.append(g).scrollTop(this.log.prop("scrollHeight")),this.displayChatBox(),this.hideChatBox(),l&&(this.clearTimeout(),this.hide())}createElement(t,e){return Oe(`<p>${t} \xBB ${e}</p>`)}send(){this.game.socket.send(dt.Chat,[this.input.val()]),this.hide()}toggle(){this.clearTimeout(),this.inputVisible()?this.hide():this.display()}display(){this.button.addClass("active"),this.displayChatBox(),this.input.fadeIn("fast").val("").trigger("focus")}displayChatBox(){this.chatBox.fadeIn("fast")}hide(){this.button.removeClass("active"),this.hideChatBox(),this.input.fadeOut("fast").val("").trigger("blur")}hideChatBox(){this.fadingTimeout=window.setTimeout(()=>{this.inputVisible()||this.chatBox.fadeOut("slow")},this.fadingDuration)}inputVisible(){return this.input.is(":visible")}clear(){this.inputVisible()&&this.toggle(),this.clearTimeout()}clearTimeout(){clearTimeout(this.fadingTimeout),window.clearTimeout(this.fadingTimeout),this.fadingTimeout=void 0}}class k2{constructor(t){this.input=t,this.attackInfo=Oe("#attack-info"),this.name=this.attackInfo.find(".name"),this.details=this.attackInfo.find(".details"),this.health=this.attackInfo.find(".health"),this.onUpdate(this.handleUpdate.bind(this))}update(t){let{name:e,health:a,details:l}=this;if(!t||!this.validEntity(t))return this.hovering=void 0,this.hide();this.isVisible()||this.display(),this.hovering=t,e.html(t.name),this.hasHealth()?this.setHealth(t.hitPoints):(a.hide(),l.html(""))}handleUpdate(t,e){!this.hasHealth()||this.hovering.instance===t&&(e<1?this.hide():this.setHealth(e))}setHealth(t){if(!this.hasHealth())return;this.health.show();let{maxHitPoints:e}=this.hovering;this.health.css("width",`${Math.ceil(t/e*100)-10}%`),this.details.html(`${t} / ${e}`)}validEntity(t){return t.instance!==this.input.player.instance&&!t.isProjectile()}hasHealth(){return this.hovering?this.hovering.isMob()||this.hovering.isPlayer():!1}display(){this.attackInfo.fadeIn("fast")}hide(){this.attackInfo.fadeOut("fast")}isVisible(){return this.attackInfo.css("display")==="block"}onUpdate(t){this.updateCallback=t}}class v2{constructor(t){this.game=t,this.app=this.game.app,this.map=this.game.map,this.camera=this.game.camera,this.player=this.game.player,this.selectedCellVisible=!1,this.keyMovement=!1,this.targetVisible=!0,this.selectedX=-1,this.selectedY=-1,this.targetColour="rgba(255, 255, 255, 0.5)",this.cursors={},this.lastMousePosition={x:0,y:0},this.mouse={x:0,y:0},this.targetAnimation=new Un("move",4,0,16,16),this.chatHandler=new m2(this.game),this.hud=new k2(this),this.app.onLeftClick(this.handleLeftClick.bind(this)),this.app.onRightClick(this.handleRightClick.bind(this)),this.app.onKeyDown(this.handleKeyDown.bind(this)),this.app.onKeyUp(this.handleKeyUp.bind(this)),this.app.onMouseMove(e=>{!this.game.started||(this.setCoords(e),this.moveCursor())}),this.targetAnimation.setSpeed(50)}loadCursors(){this.cursors.hand=this.game.sprites.get("hand"),this.cursors.sword=this.game.sprites.get("sword"),this.cursors.loot=this.game.sprites.get("loot"),this.cursors.target=this.game.sprites.get("target"),this.cursors.arrow=this.game.sprites.get("arrow"),this.cursors.talk=this.game.sprites.get("talk"),this.cursors.spell=this.game.sprites.get("spell"),this.cursors.bow=this.game.sprites.get("bow"),this.cursors.axe=this.game.sprites.get("axe_cursor"),se.debug("Loaded Cursors!")}handleLeftClick(t){if(this.setCoords(t),this.keyMovement=!1,this.game.player.disableAction=!1,this.isCtrlKey())return this.game.socket.send(dt.Command,[Ng.CtrlClick,this.getCoords()]);this.move(this.getCoords())}handleRightClick(t){this.setCoords(t);let e=this.getCoords(),a=this.game.getEntityAt(e.x,e.y);!a||console.log(a)}handleKeyDown(t){if(this.chatHandler.inputVisible())return this.chatHandler.keyDown(t.key);switch(t.key){case"w":case"ArrowUp":this.game.player.moveUp=!0;return;case"a":case"ArrowLeft":this.game.player.moveLeft=!0;return;case"s":case"ArrowDown":this.game.player.moveDown=!0;return;case"d":case"ArrowRight":this.game.player.moveRight=!0;return;case"Enter":this.chatHandler.toggle();return;case"i":this.game.menu.getInventory().toggle();return;case"m":return;case"p":return;case"Escape":this.game.menu.hide();return;case"+":case"=":this.game.camera.zoom(.1),this.game.renderer.resize();return;case"-":case"_":this.game.camera.zoom(-.1),this.game.renderer.resize();return}}handleKeyUp(t){switch(t.key){case"w":case"ArrowUp":this.game.player.moveUp=!1;return;case"a":case"ArrowLeft":this.game.player.moveLeft=!1;return;case"s":case"ArrowDown":this.game.player.moveDown=!1;return;case"d":case"ArrowRight":this.game.player.moveRight=!1;return}this.game.player.disableAction=!1}keyMove(t){this.game.player.hasPath()||(this.move(t),this.keyMovement=!0)}move(t){if(!this.player.stunned&&(this.setPassiveTarget(),!(this.player.disableAction||this.game.zoning.direction)&&!this.game.map.isOutOfBounds(t.x,t.y))){if(mo()&&this.chatHandler.inputVisible()&&this.chatHandler.toggle(),this.game.menu.hide(),this.game.map.isObject(t.x,t.y))return this.player.setObjectTarget(t);if(this.player.removeTarget(),this.entity=this.game.getEntityAt(t.x,t.y),this.entity&&(this.setAttackTarget(),this.isTargetable(this.entity))){this.player.setTarget(this.entity),this.player.follow(this.entity),this.game.socket.send(dt.Target,[xr.Attack,this.entity.instance]);return}this.player.go(t.x,t.y)}}moveCursor(){if(mo())return;let t=this.getCoords();if(this.entity=this.game.getEntityAt(t.x,t.y),this.hud.update(this.entity),!this.entity){if(this.map.isObject(t.x,t.y)){let e=this.map.getTileCursor(t.x,t.y);this.setCursor(this.cursors[e||"talk"]),this.hovering=wo.Object;return}this.setCursor(this.cursors.hand),this.hovering=null;return}switch(this.entity.type){case ne.Item:case ne.Chest:this.setCursor(this.cursors.loot),this.hovering=wo.Item;break;case ne.Mob:this.setCursor(this.getAttackCursor()),this.hovering=wo.Mob;break;case ne.NPC:this.setCursor(this.cursors.talk),this.hovering=wo.NPC;break;case ne.Player:this.entity.pvp&&this.game.pvp&&(this.setCursor(this.getAttackCursor()),this.hovering=wo.Player);break}}saveMouse(){this.lastMousePosition.x=this.mouse.x,this.lastMousePosition.y=this.mouse.y}setPosition(t,e){this.selectedX=t,this.selectedY=e}setCursor(t){t&&(this.cursor=t)}setPassiveTarget(){this.targetAnimation.setRow(0)}setAttackTarget(){this.targetAnimation.setRow(1)}setCoords(t){let{width:e,height:a}=this.game.renderer.background;this.mouse.x=t.pageX,this.mouse.y=t.pageY,this.mouse.x>=e?this.mouse.x=e-1:this.mouse.x<=0&&(this.mouse.x=0),this.mouse.y>=a?this.mouse.y=a-1:this.mouse.y<=0&&(this.mouse.y=0)}getAttackCursor(){return this.cursors[this.player.isRanged()?"bow":"sword"]}getCoords(){let t=this.map.tileSize*this.camera.zoomFactor,e=this.mouse.x%t,a=this.mouse.y%t,l=(this.mouse.x-e)/t+this.game.camera.gridX,g=(this.mouse.y-a)/t+this.game.camera.gridY;return{x:l,y:g}}getTargetData(){let t=this.game.sprites.get("target");if(!t)return;let e=this.targetAnimation.currentFrame,{tileSize:a}=this.game.map,{zoomFactor:l}=this.game.camera;return t.loaded||t.load(),{sprite:t,x:e.x,y:e.y,width:t.width,height:t.height,dx:this.selectedX*a*l,dy:this.selectedY*a*l,dw:t.width*l,dh:t.height*l}}isCtrlKey(){return window.event.ctrlKey}isTargetable(t){return this.isAttackable(t)||t.isNPC()||t.isChest()}isAttackable(t){return t.isMob()||t.isPlayer()&&t.pvp&&this.game.pvp}isMouseRendered(){return this.mouse.x===this.lastMousePosition.x&&this.mouse.y===this.lastMousePosition.y}}class yi{constructor(t,e,a){var l,g;this.containerName=t,this.closeButton=e,this.toggleButton=a,this.body=document.querySelector(this.containerName),this.close=document.querySelector(this.closeButton),this.button=document.querySelector(this.toggleButton),(l=this.close)==null||l.addEventListener("click",this.hide.bind(this)),(g=this.button)==null||g.addEventListener("click",this.toggle.bind(this))}batch(t){se.debug("Unimplemented menu batch() function.")}synchronize(t){}add(t){se.debug("Unimplemented menu add() function.")}remove(t){se.debug("Unimplemented menu remove() function.")}show(t,e,a){var l,g;(l=this.showCallback)==null||l.call(this),this.body.style.display="block",(g=this.button)==null||g.classList.add("active")}hide(){var t;this.body.style.display="none",(t=this.button)==null||t.classList.remove("active")}toggle(){this.isVisible()?this.hide():this.show()}resize(){}isVisible(){return this.body.style.display==="block"}onShow(t){this.showCallback=t}}class b2 extends yi{constructor(){super();this.body=document.querySelector("#action-container"),this.list=document.querySelector("#action-container > ul")}show(t,e,a){this.clear(),vt.each(t,l=>this.add(l)),this.body.style.left=`${e}px`,this.body.style.top=`${a}px`,super.show()}add(t){let e=document.createElement("li"),a=document.createElement("div");a.classList.add("action-button"),a.textContent=t,a.addEventListener("click",()=>{var l;return(l=this.buttonCallback)==null?void 0:l.call(this,t)}),e.append(a),this.list.append(e)}clear(){this.list.innerHTML=""}onButton(t){this.buttonCallback=t}}class y2 extends yi{constructor(t){super("#inventory",void 0,"#inventory-button");this.actions=t,this.list=document.querySelector("#inventory > ul"),this.selectedSlot=-1,this.load(),this.actions.onButton(e=>this.handleAction(e))}load(){if(!this.list)return se.error("Could not create the skeleton for the inventory.");for(let t=0;t<ba.INVENTORY_SIZE;t++)this.list.append(this.createSlot(t))}handleAction(t){var e;(e=this.selectCallback)==null||e.call(this,this.selectedSlot,ye.getContainerAction(t)),this.actions.hide()}batch(t){vt.each(t,e=>{!e.key||this.setSlot(e.index,e.key,e.count,e.edible,e.equippable)})}add(t){this.setSlot(t.index,t.key,t.count,t.edible,t.equippable)}remove(t){this.setSlot(t.index,t.key,t.count,t.edible,t.equippable)}select(t,e=!1){let a=this.getElement(t);if(this.isEmpty(a))return this.actions.hide();if(this.selectedSlot=t,e){a.edible?this.handleAction(Oi.Eat):a.equippable&&this.handleAction(Oi.Equip);return}let l=[];a.edible&&l.push(Oi.Eat),a.equippable&&l.push(Oi.Equip),l.push(Oi.Drop);let g=this.getPosition(a);this.actions.show(l,g.x,g.y)}dragStart(t){this.isEmpty(this.getElement(t))||(this.selectedSlot=t)}dragDrop(t,e){var l;let a=t.target;!a||(a.classList.remove("item-slot-focused"),this.selectedSlot!==-1&&((l=this.selectCallback)==null||l.call(this,this.selectedSlot,Cn.Swap,e),this.selectedSlot=-1))}dragOver(t){!t.target||!t.target.draggable||(t.preventDefault(),t.target.classList.add("item-slot-focused"))}dragLeave(t){t.target.classList.remove("item-slot-focused")}setSlot(t,e="",a=1,l=!1,g=!1){let p=this.getElement(t);if(!p)return se.error(`Could not find slot element at: ${t}`);let x=p.querySelector(".inventory-item-count");x&&(x.textContent=ye.getCount(a)),p.style.backgroundImage=e?ye.getImageURL(e):"",p.edible=l,p.equippable=g}createSlot(t){let e=document.createElement("li"),a=document.createElement("div"),l=document.createElement("div");return a.draggable=!0,a.classList.add("item-slot"),l.classList.add("inventory-item-count"),a.append(l),e.append(a),e.addEventListener("click",()=>this.select(t)),e.addEventListener("dblclick",()=>this.select(t,!0)),e.addEventListener("dragstart",()=>this.dragStart(t)),e.addEventListener("drop",g=>this.dragDrop(g,t)),e.addEventListener("dragover",g=>this.dragOver(g)),e.addEventListener("dragleave",g=>this.dragLeave(g)),e}hide(){super.hide(),this.selectedSlot=-1,this.actions.hide()}isEmpty(t){return t.style.backgroundImage===""}getElement(t){return this.list.children[t].querySelector("div")}getPosition(t){let e=t.getBoundingClientRect();return{x:e.left-e.width,y:e.top-e.height*2}}forEachSlot(t){for(let e=0;e<this.list.children.length;e++)t(e,this.getElement(e))}onSelect(t){this.selectCallback=t}}class x2 extends yi{constructor(t){super("#bank","#close-bank");this.inventory=t,this.bankList=document.querySelector("#bank-slot > ul"),this.inventoryList=document.querySelector("#bank-inventory-slots > ul"),this.load()}load(){if(!this.bankList)return se.error("[Bank] Could not find the bank slot list.");if(!this.inventoryList)return se.error("[Bank] Could not find the inventory slot list.");for(let t=0;t<ba.BANK_SIZE;t++)this.bankList.append(ye.createSlot(Er.Bank,t,this.select.bind(this)));for(let t=0;t<ba.INVENTORY_SIZE;t++)this.inventoryList.append(ye.createSlot(Er.Inventory,t,this.select.bind(this)))}select(t,e){var a;(a=this.selectCallback)==null||a.call(this,t,e)}setSlot(t,e="",a=0){let l=this.getBankElement(t).querySelector(".bank-image"),g=this.getBankElement(t).querySelector(".item-count");l.style.backgroundImage=ye.getImageURL(e),g.textContent=ye.getCount(a)}synchronize(){!this.isVisible()||this.inventory.forEachSlot((t,e)=>{let a=this.getInventoryElement(t).querySelector(".bank-image"),l=this.getInventoryElement(t).querySelector(".item-count");a.style.backgroundImage=e.style.backgroundImage,l.textContent=e.textContent})}add(t){this.setSlot(t.index,t.key,t.count)}remove(t){this.setSlot(t.index,t.key,t.count)}show(t){super.show(),this.synchronize(),vt.each(t,e=>this.setSlot(e.index,e.key,e.count))}hide(){super.hide()}getBankElement(t){return this.bankList.children[t].querySelector("div")}getInventoryElement(t){return this.inventoryList.children[t].querySelector("div")}onSelect(t){this.selectCallback=t}}class S2 extends yi{constructor(t){super("#store","#close-store");this.inventory=t,this.key="",this.currency="gold",this.selectedIndex=-1,this.selectedCount=-1,this.confirmSell=document.querySelector("#confirm-sell"),this.sellSlot=document.querySelector("#store-sell-slot"),this.sellSlotText=document.querySelector("#store-sell-slot-text"),this.sellSlotReturn=document.querySelector("#store-sell-slot-return"),this.sellSlotReturnText=document.querySelector("#store-sell-slot-return-text"),this.storeList=document.querySelector("#store-container > ul"),this.inventoryList=document.querySelector("#store-inventory-slots > ul"),this.load(),this.sellSlot.addEventListener("click",this.synchronize.bind(this)),this.confirmSell.addEventListener("click",this.sell.bind(this))}load(){for(let t=0;t<ba.INVENTORY_SIZE;t++)this.inventoryList.append(ye.createSlot(Er.Inventory,t,this.select.bind(this)))}update(t){this.clear(),this.key=t.key,this.currency=t.currency;for(let e=0;e<t.items.length;e++)this.storeList.append(this.createStoreItem(t.items[e],e))}select(t,e){var a;(a=this.selectCallback)==null||a.call(this,Ir.Select,this.key,e)}sell(){var t;(t=this.selectCallback)==null||t.call(this,Ir.Sell,this.key,this.selectedIndex,this.selectedCount)}buy(t,e=1){var a;(a=this.selectCallback)==null||a.call(this,Ir.Buy,this.key,t,e)}synchronize(){!this.isVisible()||(this.clearSellSlot(),this.inventory.forEachSlot((t,e)=>{let a=this.getElement(t).querySelector(".bank-image"),l=this.getElement(t).querySelector(".item-count");a.style.backgroundImage=e.style.backgroundImage,l.textContent=e.textContent}))}show(t){super.show(),this.update(t),this.synchronize()}clear(){this.key="",this.currency="gold",this.storeList.innerHTML=""}clearSellSlot(){this.selectedIndex=-1,this.selectedCount=-1,this.sellSlot.style.backgroundImage="",this.sellSlotText.textContent="",this.sellSlotReturn.style.backgroundImage="",this.sellSlotReturnText.textContent=""}move(t){if(t.key!==this.key)return se.error("Invalid store key provided for the select.");this.synchronize();let e=this.getElement(t.item.index).querySelector(".bank-image"),a=this.getElement(t.item.index).querySelector(".item-count");if(!e||!a)return se.error("[Store] Could not find image and count elements.");this.sellSlot.style.backgroundImage=e.style.backgroundImage,this.sellSlot.textContent=a.textContent,this.sellSlotReturn.style.backgroundImage=ye.getImageURL(this.currency),this.sellSlotReturnText.textContent=t.item.price.toString()||"",e.style.backgroundImage="",a.textContent="",this.selectedIndex=t.item.index,this.selectedCount=t.item.count}createStoreItem(t,e){let a=document.createElement("li"),l=document.createElement("div"),g=document.createElement("div"),p=document.createElement("div"),x=document.createElement("div"),N=document.createElement("div"),b=document.createElement("div");return l.classList.add("store-item"),g.classList.add("store-item-image"),p.classList.add("store-item-name"),x.classList.add("store-item-count"),N.classList.add("store-item-price"),b.classList.add("store-item-buy"),x.textContent=t.count.toString(),p.textContent=t.name,N.textContent=t.price.toString(),b.textContent="Buy",g.style.backgroundImage=ye.getImageURL(t.key),b.addEventListener("click",()=>this.buy(e)),l.append(g,p,x,N,b),a.append(l),a}getElement(t){return this.inventoryList.children[t].querySelector("div")}onSelect(t){this.selectCallback=t}}class C2{constructor(t){this.player=t,this.health=document.querySelector("#health"),this.healthBar=document.querySelector("#health-bar"),this.text=document.querySelector("#health-bar-text"),this.experience=document.querySelector("#exp"),this.experienceBar=document.querySelector("#exp-bar"),this.player.onHitPoints(this.handleHitPoints.bind(this)),this.player.onExperience(this.handleExperience.bind(this))}handleHitPoints(t,e,a){let l=t/e;a&&this.flash("white"),this.health.style.width=`${Math.floor(this.healthBar.offsetWidth*l).toString()}px`,this.text.textContent=`${t}/${e}`}handleExperience(t,e,a){let l=(t-e)/(a-e);this.experience.style.width=`${Math.floor(this.experienceBar.offsetWidth*l).toString()}px`}flash(t){this.health.classList.add(t),window.setTimeout(()=>this.health.classList.remove(t),500)}}class I2 extends yi{constructor(){super("#state-page");this.name=document.querySelector("#profile-name"),this.level=document.querySelector("#profile-level"),this.experience=document.querySelector("#profile-experience"),this.weapon=document.querySelector("#weapon-slot"),this.weaponInfo=document.querySelector("#weapon-slot-info"),this.armour=document.querySelector("#armour-slot"),this.armourInfo=document.querySelector("#armour-slot-info"),this.pendant=document.querySelector("#pendant-slot"),this.ring=document.querySelector("#ring-slot"),this.boots=document.querySelector("#boots-slot"),this.weapon.addEventListener("click",()=>{var t;return(t=this.selectCallback)==null?void 0:t.call(this,be.Weapon)}),this.armour.addEventListener("click",()=>{var t;return(t=this.selectCallback)==null?void 0:t.call(this,be.Armour)}),this.pendant.addEventListener("click",()=>{var t;return(t=this.selectCallback)==null?void 0:t.call(this,be.Pendant)}),this.ring.addEventListener("click",()=>{var t;return(t=this.selectCallback)==null?void 0:t.call(this,be.Ring)}),this.boots.addEventListener("click",()=>{var t;return(t=this.selectCallback)==null?void 0:t.call(this,be.Boots)})}synchronize(t){this.name.textContent=t.name,this.level.textContent=`Level ${t.level}`,this.experience.textContent=`${t.experience}`,this.weapon.style.backgroundImage=ye.getImageURL(t.getWeapon().key),this.armour.style.backgroundImage=ye.getImageURL(t.getArmour().key==="clotharmor"?"":t.getArmour().key),this.pendant.style.backgroundImage=ye.getImageURL(t.getPendant().key),this.ring.style.backgroundImage=ye.getImageURL(t.getRing().key),this.boots.style.backgroundImage=ye.getImageURL(t.getBoots().key)}onSelect(t){this.selectCallback=t}}class E2 extends yi{constructor(){super("#quest-page");this.questList=document.querySelector("#quest-list > ul"),this.achievementList=document.querySelector("#achievement-list > ul")}synchronize(t){this.questList.innerHTML="",this.achievementList.innerHTML="",vt.each(t.quests,e=>this.questList.append(this.createElement(e))),vt.each(t.achievements,e=>this.achievementList.append(this.createElement(e)))}createElement(t){let e=document.createElement("li"),a=document.createElement("div"),l=document.createElement("div");return a.classList.add("quest-item"),l.classList.add("quest-name"),l.textContent=t.name,l.style.background=this.getColour(t),a.append(l),e.append(a),e}getColour(t){return t.isFinished()?"rgba(10, 255, 10, 0.3)":t.isStarted()?"rgba(255, 255, 10, 0.4)":"rgba(255, 10, 10, 0.3)"}}class T2 extends yi{constructor(){super("#skills-page");this.list=document.querySelector("#skills-list > ul")}synchronize(t){this.list.innerHTML="",vt.each(t.skills,e=>this.list.append(this.createElement(e)))}createElement(t){let e=document.createElement("li"),a=document.createElement("div"),l=document.createElement("div"),g=document.createElement("p");return a.classList.add("profession-item"),l.classList.add("profession-name"),l.textContent=t.name,g.textContent=`Level ${t.level} | ${t.percentage.toFixed(1)}%`,l.append(g),a.append(l),e.append(a),e}}class A2 extends yi{constructor(t){super("#profile-dialog",void 0,"#profile-button");this.player=t,this.state=new I2,this.tasks=new E2,this.skills=new T2,this.pages=[this.state,this.tasks,this.skills],this.activePage=0,this.previous=document.querySelector("#previous"),this.next=document.querySelector("#next"),this.handleNavigation(),this.previous.addEventListener("click",()=>this.handleNavigation("previous")),this.next.addEventListener("click",()=>this.handleNavigation("next")),this.state.onSelect(e=>{var a;return(a=this.unequipCallback)==null?void 0:a.call(this,e)})}handleNavigation(t="previous"){var e,a;this.isDisabled(t)||(this.previous.classList.remove("disabled"),this.next.classList.remove("disabled"),(e=this.pages[this.activePage])==null||e.hide(),this.activePage+=t==="previous"?-1:1,this.activePage<=0&&(this.activePage=0,this.previous.classList.add("disabled")),this.activePage>=this.pages.length-1&&(this.activePage=this.pages.length-1,this.next.classList.add("disabled")),(a=this.pages[this.activePage])==null||a.show())}synchronize(){this.forEachPage(t=>t.synchronize(this.player))}isDisabled(t){return t==="previous"&&this.previous.classList.contains("disabled")||t==="next"&&this.next.classList.contains("disabled")}forEachPage(t){vt.each(this.pages,t)}onUnequip(t){this.unequipCallback=t}}class X2 extends yi{constructor(){super("#enchant","#close-enchant")}}class Y2 extends yi{constructor(t){super("#map-frame","#close-map-frame","#warp-button");this.socket=t,this.list=document.querySelectorAll(".map-button"),vt.each(this.list,e=>e.addEventListener("click",()=>this.handleWarp(e)))}handleWarp(t){let e=parseInt(t.id.replace("warp",""));if(isNaN(e))return se.error("Invalid warp element clicked.");this.socket.send(dt.Warp,{id:e}),this.hide()}}class L2 extends yi{constructor(){super("#notification");this.title=document.querySelector("#notification-text-title"),this.description=document.querySelector("#notification-text-description")}show(t,e,a){if(this.isVisible()){this.hide(!1),window.setTimeout(()=>this.show(t,e,a),700);return}this.body.classList.add("active"),this.setPosition(),this.title.style.color=a,this.title.innerHTML=t,this.description.innerHTML=e,clearTimeout(this.timeout),this.timeout=window.setTimeout(()=>this.hide(!1),7e3)}hide(t=!0){t||(this.body.classList.remove("active"),this.body.style.top="100%")}resize(){!this.isVisible()||this.setPosition()}isVisible(){return this.body.classList.contains("active")}getPosition(){return window.innerHeight-this.body.offsetHeight}setPosition(){this.body.style.top=`${this.getPosition()}px`}}class R2 extends yi{constructor(t){super("#settings-page",void 0,"#settings-button");this.game=t,this.volumeSlider=document.querySelector("#volume"),this.sfxSlider=document.querySelector("#sfx"),this.brightnessSlider=document.querySelector("#brightness"),this.soundCheckbox=document.querySelector("#sound-check > input"),this.cameraCheckbox=document.querySelector("#camera-check > input"),this.debugCheckbox=document.querySelector("#debug-check > input"),this.nameCheckbox=document.querySelector("#name-check > input"),this.levelCheckbox=document.querySelector("#level-check > input"),this.volumeSlider.addEventListener("input",this.handleVolume.bind(this)),this.sfxSlider.addEventListener("input",this.handleSFX.bind(this)),this.brightnessSlider.addEventListener("input",this.handleBrightness.bind(this)),this.soundCheckbox.addEventListener("change",this.handleSound.bind(this)),this.cameraCheckbox.addEventListener("change",this.handleCamera.bind(this)),this.debugCheckbox.addEventListener("change",this.handleDebug.bind(this)),this.nameCheckbox.addEventListener("change",this.handleName.bind(this)),this.levelCheckbox.addEventListener("change",this.handleLevel.bind(this)),this.load()}load(){let t=this.game.storage.getSettings();this.volumeSlider.value=t.music.toString(),this.sfxSlider.value=t.sfx.toString(),this.brightnessSlider.value=t.brightness.toString(),this.soundCheckbox.checked=t.soundEnabled,this.cameraCheckbox.checked=t.centerCamera,this.debugCheckbox.checked=t.debug,this.nameCheckbox.checked=t.showNames,this.levelCheckbox.checked=t.showLevels,this.handleBrightness(),this.handleDebug(),this.handleCamera(),this.handleName(),this.handleLevel()}handleVolume(){this.game.storage.setVolume(this.volumeSlider.valueAsNumber)}handleSFX(){this.game.storage.setSFX(this.sfxSlider.valueAsNumber)}handleBrightness(){this.game.storage.setBrightness(this.brightnessSlider.valueAsNumber),this.game.renderer.setBrightness(this.brightnessSlider.valueAsNumber)}handleSound(){this.game.storage.setSoundEnabled(this.soundCheckbox.checked)}handleCamera(){this.game.storage.setCenterCamera(this.cameraCheckbox.checked),this.cameraCheckbox.checked?(this.game.camera.center(),this.game.camera.centreOn(this.game.player)):this.game.camera.decenter()}handleDebug(){this.game.storage.setDebug(this.debugCheckbox.checked),this.game.renderer.debugging=this.debugCheckbox.checked}handleName(){this.game.storage.setShowNames(this.nameCheckbox.checked),this.game.renderer.drawNames=this.nameCheckbox.checked}handleLevel(){this.game.storage.setShowLevels(this.levelCheckbox.checked),this.game.renderer.drawLevels=this.levelCheckbox.checked}}class D2{constructor(t){this.game=t,this.actions=new b2,this.inventory=new y2(this.actions),this.bank=new x2(this.inventory),this.store=new S2(this.inventory),this.profile=new A2(this.game.player),this.enchant=new X2,this.warp=new Y2(this.game.socket),this.notification=new L2,this.settings=new R2(this.game),this.menu=[this.inventory,this.bank,this.store,this.profile,this.enchant,this.warp,this.notification,this.settings],this.inventory.onSelect(this.handleInventorySelect.bind(this)),this.bank.onSelect(this.handleBankSelect.bind(this)),this.store.onSelect(this.handleStoreSelect.bind(this)),this.profile.onUnequip(this.handleProfileUnequip.bind(this)),this.load()}load(){new C2(this.game.player),this.forEachMenu(t=>t.onShow(()=>this.hide()))}hide(){this.forEachMenu(t=>t.hide())}synchronize(){this.forEachMenu(t=>t.synchronize())}resize(){this.forEachMenu(t=>t.resize())}getInventory(){return this.inventory}getBank(){return this.bank}getStore(){return this.store}getProfile(){return this.profile}getNotification(){return this.notification}handleInventorySelect(t,e,a){this.game.socket.send(dt.Container,{opcode:e,type:Er.Inventory,index:t,tIndex:a})}handleBankSelect(t,e){this.game.socket.send(dt.Container,{opcode:Cn.Select,type:Er.Bank,subType:t,index:e})}handleStoreSelect(t,e,a,l=1){this.game.socket.send(dt.Store,{opcode:t,key:e,index:a,count:l})}handleProfileUnequip(t){this.game.socket.send(dt.Equipment,{opcode:_a.Unequip,type:t})}forEachMenu(t){vt.each(this.menu,t)}}class O2{constructor(t){this.sprite=t,this.loaded=!1,this.loadHurt=!1,this.offsetX=0,this.offsetY=0,this.hurtSprite={loaded:!1},this.id=t.id}load(){this.image=new Image;let{image:t,filepath:e}=this;t.crossOrigin="Anonymous",t.src=e,t.addEventListener("load",()=>{var l;let{loadHurt:a}=this;this.loaded=!0,a&&this.createHurtSprite(),(l=this.loadCallback)==null||l.call(this)})}loadSprite(){var l,g,p,x,N;let{sprite:t,id:e}=this,a=`/img/sprites/${e}.png`;this.filepath=a,this.animationData=t.animations,this.width=(l=t.width)!=null?l:16,this.height=(g=t.height)!=null?g:16,this.offsetX=(p=t.offsetX)!=null?p:-16,this.offsetY=(x=t.offsetY)!=null?x:-16,this.idleSpeed=(N=t.idleSpeed)!=null?N:450}createAnimations(){let{animationData:t,width:e,height:a}=this,l={};for(let g in t){if(!Object.prototype.hasOwnProperty.call(t,g))continue;g==="death"&&(this.hasDeathAnimation=!0);let{length:p,row:x}=t[g];l[g]=new Un(g,p,x,e,a)}return l}createHurtSprite(){if(this.loaded||this.load(),this.hurtSprite.loaded)return;let t=document.createElement("canvas"),e=t.getContext("2d"),a;t.width=this.image.width,t.height=this.image.height;try{e.drawImage(this.image,0,0,this.image.width,this.image.height),a=e.getImageData(0,0,this.image.width,this.image.height);for(let l=0;l<a.data.length;l+=4)a.data[l]=255,a.data[l+1]=a.data[l+2]=75;e.putImageData(a,0,0),this.hurtSprite={image:t,loaded:!0,offsetX:this.offsetX,offsetY:this.offsetY,width:this.width,height:this.height,type:"hurt"}}catch(l){se.error("Could not load hurt sprite.",l)}}onLoad(t){this.loadCallback=t}}var N2=[{id:"adhererarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"adherer",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"adhererrobe",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"adminarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"agent",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"ancientmanumentnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"angelnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"ant",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"archerarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"archerschooluniform",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"axe",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"fireaxe",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"poisonaxe",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"rustedaxe",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"babyspider",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"bamboospear",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"bastardsword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"bat",idleSpeed:100,width:32,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:5,row:1},idle_right:{length:5,row:2},atk_up:{length:5,row:3},walk_up:{length:5,row:4},idle_up:{length:5,row:5},atk_down:{length:5,row:6},walk_down:{length:5,row:7},idle_down:{length:5,row:8}},offsetX:-8,offsetY:-24},{id:"icebat",idleSpeed:100,width:32,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:5,row:1},idle_right:{length:5,row:2},atk_up:{length:5,row:3},walk_up:{length:5,row:4},idle_up:{length:5,row:5},atk_down:{length:5,row:6},walk_down:{length:5,row:7},idle_down:{length:5,row:8}},offsetX:-8,offsetY:-24},{id:"beachnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"bearseonbiarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"beautifullife",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"beearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"bee",width:20,height:19,animations:{death:{length:1,row:4},atk_right:{length:4,row:1},walk_right:{length:4,row:1},idle_right:{length:2,row:1},atk_up:{length:4,row:3},idle_up:{length:2,row:3},walk_up:{length:4,row:3},atk_down:{length:4,row:2},walk_down:{length:4,row:2},idle_down:{length:2,row:2}},offsetX:-8,offsetY:-8},{id:"beetlearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"beetle",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-54},{id:"blackpirateskeleton",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-8,offsetY:-15},{id:"blackspiderarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"blackwizard",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"blazespider",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"bloodbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"bluebikinigirlnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"bluecockroach",width:42,height:42,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:3,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:3,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"bluedamboarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"bluepiratearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"bluepreta",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:3,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:3,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"bluescimitar",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"bluestoremannpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"bluesword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"bluewingarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"bluewingarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"boss",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:3,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-36},{id:"boxingman",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"breaker",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"bridalmask",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"bronzemedal",width:12,height:12},{id:"brownmouse",width:26,height:26,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-8},{id:"bucklerbenef",width:32,height:32,animations:{atk_right:{length:10,row:0},walk_right:{length:10,row:0},idle_right:{length:10,row:0},atk_up:{length:10,row:0},walk_up:{length:10,row:0},idle_up:{length:10,row:0},atk_down:{length:10,row:0},walk_down:{length:10,row:0},idle_down:{length:10,row:0}},offsetX:-9,offsetY:-32},{id:"burgerarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-16},{id:"butcherknife",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"cactusaxe",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"goldaxe",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"carnelianaxe",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"cactus",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:3,row:1},idle_right:{length:1,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:1,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:1,row:8}},offsetX:-16,offsetY:-28},{id:"candybar",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"captainbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"catarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"cat",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:4,row:2},atk_up:{length:3,row:3},walk_up:{length:6,row:4},idle_up:{length:4,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:4,row:8}},offsetX:-16,offsetY:-25},{id:"cheoliarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"cheoliarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"chest",animations:{idle_down:{length:1,row:0}},offsetX:0,offsetY:0},{id:"christmasarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"clam",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:3,row:1},idle_right:{length:4,row:2},atk_up:{length:4,row:3},walk_up:{length:3,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:3,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"pickle",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"clotharmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"ghost",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"cobra",width:28,height:28,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:6,row:8}},offsetX:-6,offsetY:-10},{id:"cockroachsuit",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"coder",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-7},{id:"cokearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-16},{id:"combatuniform",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"comb",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"conferencecall",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"crab",width:32,height:32,idleSpeed:300,animations:{death:{length:8,row:0},atk_right:{length:7,row:1},walk_right:{length:6,row:2},idle_right:{length:4,row:3},atk_up:{length:8,row:4},idle_up:{length:4,row:5},walk_up:{length:6,row:6},atk_down:{length:8,row:7},walk_down:{length:6,row:8},idle_down:{length:7,row:9}},offsetX:-8,offsetY:-8},{id:"icecrab",width:32,height:32,idleSpeed:300,animations:{death:{length:8,row:0},atk_right:{length:7,row:1},walk_right:{length:6,row:2},idle_right:{length:4,row:3},atk_up:{length:8,row:4},idle_up:{length:4,row:5},walk_up:{length:6,row:6},atk_down:{length:8,row:7},walk_down:{length:6,row:8},idle_down:{length:7,row:9}},offsetX:-8,offsetY:-8},{id:"criticaleffect",width:48,height:48,animations:{atk_right:{length:10,row:0},walk_right:{length:10,row:0},idle_right:{length:10,row:0},atk_up:{length:10,row:0},walk_up:{length:10,row:0},idle_up:{length:10,row:0},atk_down:{length:10,row:0},walk_down:{length:10,row:0},idle_down:{length:10,row:0}},offsetX:-17,offsetY:-21},{id:"crystalarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"crystalarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"crystalbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"crystalscolpion",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-24,offsetY:-32},{id:"cursedhahoemask",width:64,height:72,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-21,offsetY:-49},{id:"cursedjangseung",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-30},{id:"damboarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"darkogre",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"darkregionillusion",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"darkregion",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"darkscolpion",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-24,offsetY:-32},{id:"darkskeleton",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-16,offsetY:-22},{id:"daywalker",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"deathbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"death",width:24,height:24,animations:{death:{length:6,row:0}},offsetX:-4,offsetY:-4},{id:"deathknight",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-13,offsetY:-17},{id:"desertnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"desertscolpion",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-24,offsetY:-32},{id:"devilkazyaarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"devilkazya",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"devilkazyasword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"dinosaurarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"doctor",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"dovakinarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"dovakinarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"dragonarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"earthworm",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:3,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-16,offsetY:-22},{id:"elfnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"eliminator",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"enelarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"enel",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"eneltrident",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"evilarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"eye",width:40,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:14,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:14,row:5},atk_down:{length:8,row:6},walk_down:{length:4,row:7},idle_down:{length:14,row:8}},offsetX:-12,offsetY:-18},{id:"fairynpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"fallenarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"fallenarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"firebenef",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:5,row:0},idle_right:{length:5,row:0},atk_up:{length:5,row:0},walk_up:{length:5,row:0},idle_up:{length:5,row:0},atk_down:{length:5,row:0},walk_down:{length:5,row:0},idle_down:{length:5,row:0}},offsetX:-17,offsetY:-21},{id:"firefox",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:5,row:2},atk_up:{length:5,row:3},walk_up:{length:8,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"fireplay",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"fireshot",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"firespider",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"firesword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"firstsonangelnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"fisherman",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"flaredanceeffect",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:0},idle_right:{length:4,row:0},atk_up:{length:4,row:0},walk_up:{length:4,row:0},idle_up:{length:4,row:0},atk_down:{length:4,row:0},walk_down:{length:4,row:0},idle_down:{length:4,row:0}},offsetX:-17,offsetY:-21},{id:"flaredeathknight",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-13,offsetY:-17},{id:"fluffy",width:28,height:32,animations:{death:{length:1,row:8},atk_right:{length:4,row:7},walk_right:{length:6,row:3},idle_right:{length:1,row:3},atk_up:{length:4,row:6},idle_up:{length:1,row:2},walk_up:{length:6,row:2},atk_down:{length:4,row:4},walk_down:{length:6,row:0},idle_down:{length:1,row:0}},offsetX:-8,offsetY:-8},{id:"forestbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"forestdragon",width:64,height:72,animations:{atk_right:{length:7,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:7,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:7,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-30,offsetY:-30},{id:"forestguardiansword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"forestnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"frankensteinarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"friedpotatoarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-16},{id:"frogarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"frog",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:3,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-5,offsetY:-13},{id:"frostarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"frostqueen",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-16,offsetY:-22},{id:"gayarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"gayarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"gaybow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"gbwingarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"gbwingarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"ghostrider",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"goblin",width:26,height:26,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-9},{id:"goldenarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"goldenarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"platinumarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"goldenbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"goldensword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"platinumsword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"goldgolem",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"goldmedal",width:12,height:12},{id:"pointer",width:32,height:32},{id:"golem",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-17},{id:"greenarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"greenarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"greenbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"greendamboarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"greenfish",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"greenlightbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"greenlightsaber",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"greenpirateskeleton",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-8,offsetY:-15},{id:"greenwingarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"greenwingarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"guardarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"guardarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"guard",width:25,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-5,offsetY:-8},{id:"royalguard",width:25,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-5,offsetY:-8},{id:"halberd",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"halloweenjkarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"hammer",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"hand",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"healeffect",width:32,height:32,animations:{atk_down:{length:10,row:0}},offsetX:-8,offsetY:-10},{id:"hellspider",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-33},{id:"hermitcrab",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-8,offsetY:-10},{id:"hobgoblin",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-7,offsetY:-13},{id:"hongcheolarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-15},{id:"hongcheol",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-15},{id:"huniarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"hunterbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"iamverycoldnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"iceelfnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"icegolem",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"iceknight",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-13,offsetY:-17},{id:"icerose",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"icevulture",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"infectedguard",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"ironbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"ironknightarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"ironogre",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"item-adhererarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-logs",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-palmlogs",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-icelogs",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-icepalmlogs",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-pickle",width:8,height:16,animations:{idle:{length:12,row:0}},offsetX:0,offsetY:0},{id:"item-adhererrobe",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-adminarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-archerarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-archerschooluniform",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-axe",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bamboospear",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bastardsword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bearseonbiarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-beautifullife",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-beearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-beetlearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-blackpotion",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-blackspiderarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bloodbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bluedamboarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bluepiratearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bluescimitar",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bluesword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bluewingarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bluewingarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-book",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-breaker",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bridalmask",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-burgerarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-burger",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-butcherknife",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-cactusaxe",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-cake",width:24,height:24,animations:{idle:{length:3,row:0}},offsetX:-4,offsetY:-6},{id:"item-candybar",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-captainbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-catarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-cd",animations:{idle:{length:4,row:0}},offsetX:0,offsetY:0},{id:"item-cheoliarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-cheoliarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-christmasarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-clotharmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-cockroachsuit",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-cokearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-combatuniform",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-comb",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-conferencecall",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-crystalarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-crystalarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-crystalbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-damboarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-daywalker",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-deathbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-devilkazyaarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-devilkazyasword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-diamondring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-dinosaurarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-dolring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-dovakinarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-dovakinarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-dragonarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-emeraldring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-enelarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-eneltrident",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-essentialrage",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-evilarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-fallenarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-fallenarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-fireplay",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-firepotion",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-fireshot",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-firesword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-manaflask",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bigflask",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-gold",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-mountseadragon",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-mountforestdragon",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-mountwhitetiger",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-forestbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"lightningguardian",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-49},{id:"item-forestguardiansword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-frankensteinarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-friedpotatoarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-frogarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-frostarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-gayarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-gayarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-gaybow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-gbwingarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-gbwingarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-ghostrider",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-goldenarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-goldenarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-goldenbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-goldensword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-goldring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greendamboarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenlightbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenlightsaber",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenpendant",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenwingarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenwingarmor",width:18,height:18,animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-guardarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-guardarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-halberd",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-halloweenjkarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-hammer",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-hongcheolarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-huniarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-hunterbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-icerose",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-ironbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-ironknightarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-justicebow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-justicehammer",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-leatherarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-leatherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-legolasarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-loveactring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-machete",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-magicspear",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-mailarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-mailarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-marblependant",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-marinebow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-memme",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-mermaidbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-miniseadragonarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-morningstar",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-ninjaarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-paewoldo",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-paladinarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-pearlpendant",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-pearlring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-pendant1",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-pinkcockroacharmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-pinksword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-piratearcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-pirateking",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-plasticbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-platearcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-platearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-plunger",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-portalarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-powerarmour",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-powersword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-purplecloudkallege",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-rabbitarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-radisharmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-rainbowapro",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-rainbowsword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-ratarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-ratarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bluearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-reddamboarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redenelbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redguardarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redguardarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redlightbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redlightsaber",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redmetalbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redmetalsword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redsicklebow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redsickle",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redsword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-icesword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redwingarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redwingarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-regionarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-ring1",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-robocoparmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-rosebow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-rose",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-royalazalea",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-rubyring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-rudolfarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-sapphirering",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-schooluniform",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-scimitar",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-seadragonarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-seahorsebow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-searage",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-shadowregionarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-sicklebow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-sickle",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-sidesword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-skylightbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-skylightsaber",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-snowfoxarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-snowfoxarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-snowmanarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-snowpotion",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-spear",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-spiritring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-sproutring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-squeakyhammer",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-squidarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-sword1",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-sword2",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-taekwondo",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-tamagotchiring",width:22,height:16,animations:{idle:{length:5,row:0}},offsetX:0,offsetY:0},{id:"item-thiefarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-tigerarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-topazring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-trident",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-typhoon",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-violetbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-watermelonbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-weastaff",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-whip",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-whitearcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-whitearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-wizardrobe",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-wolfarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-wolfarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-woodenbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"jirisanmoonbear",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-26},{id:"justicebow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"justicehammer",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"kaonashi",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"king",width:32,height:32,animations:{idle_down:{length:2,row:0}},offsetX:-8,offsetY:-12},{id:"lavanpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"leatherarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"leatherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"legolasarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"windguardian",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-49},{id:"livingarmor",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"loot",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"machete",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"magicspear",width:52,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-19,offsetY:-21},{id:"mailarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"mailarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"item-flask",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-shardt1",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-shardt2",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-shardt3",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-shardt4",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-shardt5",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-orange",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-watermelon",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-apple",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-banana",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"mantis",width:42,height:42,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"marinebow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"memme",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"mermaidbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"mermaid",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"mermaidnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"mimic",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:1,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:1,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:1,row:8}},offsetX:-8,offsetY:-11},{id:"minidragon",width:32,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-8,offsetY:-22},{id:"miniemperor",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"miniiceknight",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"miniknight",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"miniseadragonarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"miniseadragon",width:32,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-8,offsetY:-22},{id:"mojojojonpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"moleking",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"momangelnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"morningstar",width:38,height:38,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-11,offsetY:-15},{id:"nightmareregion",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"ninjaarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"nyan",width:49,height:24,animations:{idle_down:{length:6,row:0}},offsetX:-22,offsetY:-6},{id:"octocat",width:32,height:32,animations:{idle_down:{length:4,row:0}},offsetX:-8,offsetY:-12},{id:"octopus",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"oddeyecat",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"ogre",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-24},{id:"ogrelord",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"oldogre",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"orc",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"paewoldo",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"pain",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"paladinarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"penguin",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"pierrot",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"pinkcockroacharmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"pinkelf",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"pinksword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"piratearcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"piratecaptain",width:64,height:64,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-36},{id:"pirategirlnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"pirateking",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"pirateskeleton",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-5,offsetY:-13},{id:"plasticbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"platearcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"platearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"plunger",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"poisonspider",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"portalarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"powerarmour",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"powersword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"preta",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:3,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:3,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"priest",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"provocationeffect",width:32,height:64,animations:{atk_right:{length:10,row:0},walk_right:{length:10,row:0},idle_right:{length:10,row:0},atk_up:{length:10,row:0},walk_up:{length:10,row:0},idle_up:{length:10,row:0},atk_down:{length:10,row:0},walk_down:{length:10,row:0},idle_down:{length:10,row:0}},offsetX:-8,offsetY:-42},{id:"purplecloudkallege",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"purplepreta",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:3,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:3,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"queenant",width:64,height:72,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-54},{id:"queenspider",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"rabbitarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"radisharmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-17},{id:"rainbowapro",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"rainbowsword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"ratarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"ratarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"rat",width:48,height:48,idleSpeed:250,animations:{death:{length:4,row:0},atk_right:{length:6,row:1},walk_right:{length:3,row:2},idle_right:{length:2,row:3},atk_up:{length:4,row:4},walk_up:{length:4,row:5},idle_up:{length:4,row:6},atk_down:{length:4,row:7},walk_down:{length:4,row:8},idle_down:{length:4,row:9}}},{id:"icerat",width:48,height:48,idleSpeed:200,animations:{death:{length:4,row:0},atk_right:{length:6,row:1},walk_right:{length:3,row:2},idle_right:{length:2,row:3},atk_up:{length:4,row:4},walk_up:{length:4,row:5},idle_up:{length:4,row:6},atk_down:{length:4,row:7},walk_down:{length:4,row:8},idle_down:{length:4,row:9}}},{id:"redarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"bluearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redbikinigirlnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"redbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redcockroach",width:42,height:42,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:3,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:3,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"reddamboarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redelf",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redenelbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redfish",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"redguardarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redguardarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redguard",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"redlightbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redlightsaber",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redmetalbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redmetalsword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redmouse",width:26,height:26,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-8},{id:"redpirateskeleton",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-16,offsetY:-23},{id:"redsicklebow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redsickle",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redstoremannpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"redsword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"icesword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"redwingarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redwingarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"regionarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"regionhenchman",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:5,row:7},idle_down:{length:2,row:8}},offsetX:-24,offsetY:-39},{id:"rhaphidophoridae",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"rick",width:32,height:32,animations:{idle_down:{length:4,row:0}},offsetX:-8,offsetY:-12},{id:"robocoparmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"rosebow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"rose",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"rudolfarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-16},{id:"rudolf",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"santaelf",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"santa",width:64,height:72,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-24,offsetY:-55},{id:"schooluniform",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"scientist",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"scimitar",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"seadragonarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"seadragon",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-39},{id:"seahorsebow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"searage",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"secondsonangelnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"shadow16",width:16,height:16},{id:"shadowregionarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"shadowregion",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"shepherdboy",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"shieldbenef",width:32,height:30,animations:{atk_right:{length:8,row:0},walk_right:{length:8,row:0},idle_right:{length:8,row:0},atk_up:{length:8,row:0},walk_up:{length:8,row:0},idle_up:{length:8,row:0},atk_down:{length:8,row:0},walk_down:{length:8,row:0},idle_down:{length:8,row:0}},offsetX:-6,offsetY:-10},{id:"sicklebow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"sickle",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"sidesword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"silvermedal",width:12,height:12},{id:"skeleton2",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-16,offsetY:-20},{id:"skeleton",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-16,offsetY:-20},{id:"skeletonking",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:3,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-36},{id:"skydinosaur",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:5,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-49},{id:"skyelf",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"skylightbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"skylightsaber",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"slime",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"smalldevil",width:42,height:42,animations:{atk_right:{length:4,row:0},walk_right:{length:2,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:2,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:2,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"snek",width:28,height:28,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:6,row:8}},offsetX:-6,offsetY:-10},{id:"snowelf",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"snowfoxarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"snowfoxarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"snowlady",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"snowmanarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"snowman",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:3,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-5,offsetY:-13},{id:"snowrabbit",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"snowshepherdboy",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"snowwolf",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"soldierant",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-27},{id:"soldier",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"sorcerer",width:26,height:26,animations:{idle_down:{length:6,row:0}},offsetX:-5,offsetY:-9},{id:"soybeanbug",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-30},{id:"sparks",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"spear",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"spectre",width:34,height:34,animations:{atk_right:{length:8,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:8,row:4},idle_up:{length:8,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-9,offsetY:-13},{id:"spider",width:35,height:35,animations:{death:{length:1,row:8},atk_right:{length:2,row:7},walk_right:{length:5,row:3},idle_right:{length:1,row:3},atk_up:{length:2,row:6},idle_up:{length:1,row:2},walk_up:{length:5,row:2},atk_down:{length:2,row:4},walk_down:{length:5,row:0},idle_down:{length:1,row:0}},offsetX:-8,offsetY:-8},{id:"sponge",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"squeakyhammer",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"squidarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"squid",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-30},{id:"stuneffect",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:0},idle_right:{length:6,row:0},atk_up:{length:6,row:0},walk_up:{length:6,row:0},idle_up:{length:6,row:0},atk_down:{length:6,row:0},walk_down:{length:6,row:0},idle_down:{length:6,row:0}},offsetX:-15,offsetY:-38},{id:"suicideghost",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-30},{id:"supercateffect",width:32,height:64,animations:{atk_right:{length:10,row:0},walk_right:{length:10,row:0},idle_right:{length:10,row:0},atk_up:{length:10,row:0},walk_up:{length:10,row:0},idle_up:{length:10,row:0},atk_down:{length:10,row:0},walk_down:{length:10,row:0},idle_down:{length:10,row:0}},offsetX:-8,offsetY:-42},{id:"superiorangelnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"sword1",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"sword2",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"sword",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"taekwondo",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"talk",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"axe_cursor",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"target",animations:{move:{length:4,row:0},atk:{length:4,row:1}}},{id:"thiefarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"tigerarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"trident",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"typhoon",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"vampire",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"vendingmachine",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"villagegirl",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"villager",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"violetbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"vulture",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"watermelonbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"weastaff",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"whip",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"whitearcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"whitearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"whitebear",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"whitemouse",width:26,height:26,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-8},{id:"whitetiger",width:64,height:72,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:4,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:4,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-54},{id:"wizard",width:26,height:26,animations:{death:{length:3,row:0},atk_right:{length:4,row:1},atk_up:{length:4,row:2},atk_down:{length:4,row:3},walk_right:{length:4,row:4},walk_up:{length:4,row:5},walk_down:{length:4,row:6},idle_right:{length:6,row:7},idle_up:{length:6,row:8},idle_down:{length:6,row:9}},offsetX:-5,offsetY:-9},{id:"wizardrobe",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"wolfarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"wolfarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"wolf",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:3,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-8,offsetY:-13},{id:"woodenbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"yellowbat",width:32,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:5,row:1},idle_right:{length:5,row:2},atk_up:{length:5,row:3},walk_up:{length:5,row:4},idle_up:{length:5,row:5},atk_down:{length:5,row:6},walk_down:{length:5,row:7},idle_down:{length:5,row:8}},offsetX:-8,offsetY:-24},{id:"yellowfish",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"yellowmouse",width:26,height:26,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-8},{id:"yellowpreta",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:3,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:3,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"zombiegf",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"zombie",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"redbikinigirlnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"item-armorbinding",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-armorcommon",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-armorpatches",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-armorrare",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-armoruncommon",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-branch",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-cloth",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-element",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-leaf",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-mineral",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-rock",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-seed",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-weaponblade",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-weaponcommon",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-weaponhilt",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-weaponrare",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-weaponuncommon",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-bowcommon",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-bowlimb",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-bowrare",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-bowstring",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-bowuncommon",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-wood",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"projectile-fireball",width:48,height:48,animations:{travel:{length:8,row:0}},offsetX:-24,offsetY:-24,offsetAngle:180},{id:"projectile-iceball",width:48,height:48,animations:{travel:{length:8,row:0}},offsetX:-24,offsetY:-24,offsetAngle:180},{id:"projectile-boulder",width:32,height:32,animations:{travel:{length:8,row:0}},offsetX:-16,offsetY:-16,offsetAngle:-45},{id:"projectile-pinearrow",width:24,height:24,animations:{travel:{length:1,row:0}},offsetX:-12,offsetY:-12,offsetAngle:180},{id:"projectile-none",width:64,height:64,animations:{travel:{length:1,row:0}},offsetX:-32,offsetY:-32,offsetAngle:0},{id:"projectile-tornado",width:48,height:64,animations:{travel:{length:8,row:0}},offsetX:-29,offsetY:-37,offsetAngle:0},{id:"projectile-terror",width:64,height:64,animations:{travel:{length:8,row:0}},offsetX:-32,offsetY:-32,offsetAngle:180},{id:"explosion-fireball",width:48,height:48,animations:{explosion:{length:8,row:0}},offsetX:-17,offsetY:-16},{id:"explosion-heal",width:48,height:48,animations:{explosion:{length:8,row:0}},offsetX:-16,offsetY:-16},{id:"explosion-iceball",width:48,height:48,animations:{explosion:{length:9,row:0}},offsetX:-24,offsetY:-24},{id:"explosion-boulder",width:32,height:32,animations:{explosion:{length:7,row:0}},offsetX:-16,offsetY:-16},{id:"spell",animations:{idle_down:{length:1,row:0}}},{id:"bow",animations:{idle_down:{length:1,row:0}}},{id:"explosion-terror",width:64,height:64,animations:{explosion:{length:8,row:0}},offsetX:-24,offsetY:-32},{id:"explosion-lavaball",width:48,height:48,animations:{explosion:{length:8,row:0}},offsetX:-24,offsetY:-40},{id:"icegoblin",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-7,offsetY:-13}];class P2{constructor(){this.sprites={},this.sparksAnimation=new Un("idle_down",6,0,16,16),this.sparksAnimation.setSpeed(120),this.load()}load(){for(let t of N2){let e=new O2(t);e.loadSprite(),this.sprites[t.id]=e}se.debug("Finished loading sprite data...")}get(t){return this.sprites[t]}getDeath(){return this.get("death")}}class Ru{constructor(t,e,a){this.id=t,this.element=e,this.type=a,this.x=-1,this.y=-1,this.visible=!0,this.load()}load(){this.blinkInterval=window.setInterval(()=>{this.visible?this.hide():this.show(),this.visible=!this.visible},600)}setPosition(t,e){this.x=t,this.y=e}destroy(){clearInterval(this.blinkInterval),this.type===ri.Button?this.hide():this.element.remove()}show(){this.type===ri.Button?this.element.addClass("active"):this.element.show()}hide(){this.type===ri.Button?this.element.removeClass("active"):this.element.hide()}}class M2{constructor(t){this.game=t,this.pointers={},this.container=Oe("#bubbles")}create(t,e,a){let{pointers:l,container:g}=this;if(!(t in l))switch(e){case ri.Button:l[t]=new Ru(t,Oe(`#${a}`),e);break;default:{let p=Oe(`<div id="${t}" class="pointer"></div>`);this.setSize(p),g.append(p),l[t]=new Ru(t,p,e);break}}}resize(){vt.each(this.pointers,({type:t,x:e,y:a,element:l})=>{switch(t){case ri.Relative:{let g=this.getZoom(),p=0,x=0;l.css({left:`${e*g-p}px`,top:`${a*g-x}px`});break}}})}setSize(t){let e="/img/pointer.png";t.css({top:"30px",width:"64px",height:"64px",margin:"inherit",marginTop:"-18px",background:`url("${e}") no-repeat`})}clean(){vt.each(this.pointers,t=>t.destroy()),this.pointers={}}destroy(t){delete this.pointers[t.id],t.destroy()}set(t,e,a){this.updateCamera();let{camera:l,game:g}=this;if(!l)return;let{element:p}=t,{canvasWidth:x,canvasHeight:N}=g.renderer,b=48,I=(e-l.x)*this.getZoom(),U=parseInt(p.css("width")+24),z=U/2-b/2,q=(a-l.y)*this.getZoom()-b,G=I/x,et=q/N;G>=1.5?p.css({left:"",right:0,top:"50%",bottom:"",transform:"rotate(-90deg)"}):et>=1.5?p.css({left:"50%",right:"",top:"",bottom:0,transform:""}):G<=0?p.css({left:0,right:"",top:"50%",bottom:"",transform:"rotate(90deg)"}):et<=0?p.css({left:"",right:"50%",top:0,bottom:"",transform:"rotate(180deg)"}):p.css({left:`${I-z}px`,right:"",top:`${q}px`,bottom:"",transform:""})}setToEntity(t){let e=this.get(t.instance);!e||this.set(e,t.x,t.y)}setToPosition(t,e,a){let l=this.get(t);!l||(l.setPosition(e,a),this.set(l,e,a))}setRelative(t,e,a){let l=this.get(t);if(!l)return;let g=this.getZoom(),p=0,x=0;l.setPosition(e,a),l.element.css({left:`${e*g-p}px`,top:`${a*g-x}px`})}update(){vt.each(this.pointers,t=>{switch(t.type){case ri.Entity:{let e=this.game.entities.get(t.id);e?this.setToEntity(e):this.destroy(t);break}case ri.Location:t.x!==-1&&t.y!==-1&&this.set(t,t.x,t.y);break}})}get(t){let{pointers:e}=this;return t in e?e[t]:null}updateCamera(){this.camera=this.game.camera}getZoom(){return this.game.camera.zoomFactor}}class B2{reset(){this.direction=null}setUp(){this.direction=Gt.Up}setDown(){this.direction=Gt.Down}setRight(){this.direction=Gt.Right}setLeft(){this.direction=Gt.Left}getDirection(){return this.direction}}class z2{constructor(t,e){this.game=t,this.player=e,this.map=this.game.map,this.camera=this.game.camera,this.input=this.game.input,this.entities=this.game.entities,this.socket=this.game.socket,this.renderer=this.game.renderer,this.load()}load(){let{player:t,game:e,map:a,camera:l,input:g,entities:p,socket:x,renderer:N}=this;t.onRequestPath((b,I)=>{if(t.dead||t.frozen)return null;let U=a.isObject(b,I);if(t.gridX===b&&t.gridY===I)return[];let z=[];return!a.isColliding(b,I)&&!U&&x.send(dt.Movement,{opcode:gi.Request,requestX:b,requestY:I,playerX:t.gridX,playerY:t.gridY}),U&&z.push({hasPath(){return!1},gridX:b,gridY:I}),e.findPath(t,b,I,z)}),t.onStartPathing(b=>{if(!g)return;let I=b.length-1;t.moving=!0,[g.selectedX,g.selectedY]=b[I],g.selectedCellVisible=!0,x.send(dt.Movement,{opcode:gi.Started,requestX:g.selectedX,requestY:g.selectedY,playerX:t.gridX,playerY:t.gridY,movementSpeed:t.movementSpeed,targetInstance:this.getTargetId()})}),t.onStopPathing((b,I)=>{if(!g)return;p.registerPosition(t),g.selectedCellVisible=!1,l.clip();let U="",z=e.getEntityAt(b,I);z&&({instance:U}=z),x.send(dt.Movement,{opcode:gi.Stop,playerX:b,playerY:I,targetInstance:U,hasTarget:!!t.target,orientation:t.orientation}),x.send(dt.Target,[this.getTargetType(),t.target?t.target.instance:""]),t.target&&(t.lookAt(t.target),t.target.isObject()&&t.removeTarget()),g.setPassiveTarget(),e.storage.setOrientation(t.orientation),t.hasKeyboardMovement()||e.renderer.resetAnimatedTiles(),t.moving=!1}),t.onBeforeStep(()=>p.unregisterPosition(t)),t.onStep(()=>{t.hasNextStep()&&p.registerPosition(t),(!l.isCentered()||l.lockX||l.lockY)&&this.checkBounds(),x.send(dt.Movement,{opcode:gi.Step,playerX:t.gridX,playerY:t.gridY}),!!this.isAttackable()&&t.target&&(t.isRanged()?t.getDistance(t.target)<7&&t.stop(!0):g.setPosition(t.target.gridX,t.target.gridY))}),t.onSecondStep(()=>N.updateAnimatedTiles()),t.onMove(()=>{l.isCentered()&&l.centreOn(t)})}isAttackable(){let{target:t}=this.player;return t?t.isMob()||t.isPlayer()&&t.pvp:!1}checkBounds(){let{player:t,camera:e,game:a,socket:l,renderer:g}=this,{zoning:p}=a;if(!p)return;let x=t.gridX-e.gridX,N=t.gridY-e.gridY;if(x===0?p.setLeft():N===0?p.setUp():x===e.gridWidth-2?p.setRight():N===e.gridHeight-2&&p.setDown(),p.direction!==null){let b=p.getDirection();e.zone(b),l.send(dt.Movement,{opcode:gi.Zone,direction:b}),g.updateAnimatedTiles(),p.reset()}}getTargetId(){let{target:t}=this.player;return t?t.instance:null}getTargetType(){let{target:t}=this.player;return t?this.isAttackable()?xr.Attack:t.isNPC()||t.isChest()?xr.Talk:t.isObject()?xr.Object:xr.None:xr.None}}const F2=704,q2=512,H2=16,U2=1655064478866,W2=[5,18,19,20,132,133,134,135,136,137,138,139,185,186,187,193,196,197,198,199,200,201,202,203,321,646,647,648,653,654,655,656,709,710,711,712,713,717,718,719,720,739,740,772,773,774,775,776,777,778,781,782,783,784,802,803,804,805,845,848,865,866,867,868,869,870,897,898,928,929,930,931,932,933,934,935,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,961,962,1036,1037,1100,1101,1109,1110,1111,1173,1174,1175,1217,1218,1219,1281,1282,1283,1434,1435,1437,1438,1439,1446,1447,1448,1510,1511,1512,1537,1538,1665,1793,1901,1914,1915,1916,1921,1922,1923,1938,1939,1941,1942,1943,1985,1986,1987,2001,2002,2003,2004,2005,2006,2007,2021,2022,2023,2065,2066,2067,2068,2069,2070,2071,2085,2086,2087,2089,2133,2158,2160,2217,2221,2222,2223,2224,2225,2241,2242,2243,2244,2285,2286,2287,2288,2289,2290,2291,2305,2306,2307,2308,2349,2350,2351,2352,2353,2354,2355,2369,2370,2371,2372,2385,2386,2387,2389,2390,2391,2429,2430,2431,2432,2453,2454,2455,2493,2494,2495,2496,2497,2498,2499,2500,2511,2549,2550,2551,2552,2557,2558,2559,2560,2561,2562,2564,2574,2575,2576,2613,2614,2615,2616,2638,2639,2640,2671,2673,2677,2678,2679,2680,2709,2710,2711,2712,2734,2735,2736,2737,2738,2741,2744,2773,2774,2775,2776,2793,2794,2796,2797,2798,2799,2800,2801,2802,2821,2822,2823,2837,2838,2839,2840,2857,2858,2932,2933,2979,2996,2997,3042,3043,3044,3106,3107,3108,3113,3114,3115,3177,3178,3179,3289,3290,3291,3433,3434,3561,3562,3996,5199,5200,5262,5263,5264,5265,5271,5272,5275,5276,5325,5326,5327,5328,5329,5330,5335,5336,5388,5389,5390,5391,5392,5393,5394,5395,5569,5570,5571,5633,5634,5635,5697,5698,5699,5906,5907,5908,5970,5971,5972,6401,6402,6403,6465,6466,6467,6481,6482,6483,6529,6530,6531,6593,7110,7111,7112,7126,7127,7128,7129,7134,7135,7136,7137,7138,7139,7140,7141,7144,7173,7174,7175,7176,7190,7191,7192,7193,7198,7199,7200,7201,7202,7203,7204,7205,7237,7238,7239,7240,7241,7242,7243,7244,7369,7370,7371,7372,7433,7434,7435,7436,7497,7498,7499,7500,9613,9614,9615,9616,9617,9618,9619,9677,9678,9679,9680,9681,9682,9683,13819,13884,13948,14005,14012,14070,14076,14134,14140,14198,14204,14268,14326,14332,14390,14396,14454,16451,16452,16513,16514,16515,16516,16517,16518,16577,16578,16579,16580,16581,16582,16641,16642,16643,16644,16645,16705,16706,16707,16708,16709,17039,17040,17094,17111,17112,17224,17225,17226,17227,17228,17229,17230,17231,17288,17289,17290,17291,17292,17293,17294,17295,17494,17495,17557,17558,17559,17560,17561,17562,17563,17564,17621,17622,17623,17624,17625,17626,17627,17628,17630,17631,17632,17634,17635,17636,17637,17665,17666,17667,17668,17669,17670,17671,17685,17686,17687,17688,17689,17690,17691,17692,17693,17694,17695,17696,17697,17698,17699,17700,17701,17702,17729,17730,17731,17732,17733,17734,17735,17757,17758,17759,17760,17761,17762,17763,17764,17765,17766,17793,17794,17795,17796,17797,17798,17799,17821,17825,18017,18018,18019,18020,18081,18082,18083,18084,18145,18146,18147,18148,18209,18212,18246,18247,18248,18305,18306,18307,18369,18370,18371,18563,18564,18565,18566,18567,18568,18569,18627,18628,18629,18630,18631,18632,18633,18634,18753,18754,18762,18763,18765,18766,18915,18916,18917,19021,19022,19023,19024,19025,19026,19027,19028,19085,19086,19087,19088,19089,19090,19091,19092,19101,19102,19103,19104,19105,19165,19166,19167,19168,19169,19213,19216,19217,19220,19405,19406,19407,20743,20744,20745,20806,20807,20808,20809,20810,20869,20870,20871,20872,20873,20874,20875,20933,20934,20935,20936,20937,20938,20939],$2={"0":0,"1":4096,"2":8192,"3":12288,"4":16384,"5":20740},G2={"1":[{duration:150,tileId:0},{duration:150,tileId:1},{duration:150,tileId:2}],"37":[{duration:200,tileId:36},{duration:200,tileId:37},{duration:200,tileId:38},{duration:200,tileId:39}],"95":[{duration:200,tileId:94},{duration:200,tileId:95},{duration:200,tileId:96},{duration:200,tileId:97},{duration:200,tileId:98},{duration:200,tileId:99}],"101":[{duration:200,tileId:100},{duration:200,tileId:101},{duration:200,tileId:102},{duration:200,tileId:103}],"159":[{duration:200,tileId:158},{duration:200,tileId:159},{duration:200,tileId:160},{duration:200,tileId:161},{duration:200,tileId:162},{duration:200,tileId:163}],"223":[{duration:200,tileId:222},{duration:200,tileId:223},{duration:200,tileId:224},{duration:200,tileId:225}],"287":[{duration:200,tileId:286},{duration:200,tileId:287},{duration:200,tileId:288},{duration:200,tileId:289}],"351":[{duration:200,tileId:350},{duration:200,tileId:351},{duration:200,tileId:352},{duration:200,tileId:353}],"570":[{duration:150,tileId:569},{duration:150,tileId:570},{duration:150,tileId:571},{duration:150,tileId:572},{duration:150,tileId:573},{duration:150,tileId:574}],"597":[{duration:200,tileId:596},{duration:200,tileId:597},{duration:200,tileId:598},{duration:200,tileId:599},{duration:200,tileId:600},{duration:200,tileId:601},{duration:200,tileId:602},{duration:200,tileId:603},{duration:200,tileId:604},{duration:200,tileId:605},{duration:200,tileId:606},{duration:200,tileId:607},{duration:200,tileId:608},{duration:200,tileId:609},{duration:200,tileId:610},{duration:200,tileId:611},{duration:200,tileId:612}],"634":[{duration:150,tileId:633},{duration:150,tileId:634},{duration:150,tileId:635},{duration:150,tileId:636},{duration:150,tileId:637},{duration:150,tileId:638}],"661":[{duration:200,tileId:660},{duration:200,tileId:661},{duration:200,tileId:662},{duration:200,tileId:663},{duration:200,tileId:664},{duration:200,tileId:665},{duration:200,tileId:666},{duration:200,tileId:667},{duration:200,tileId:668},{duration:200,tileId:669},{duration:200,tileId:670},{duration:200,tileId:671},{duration:200,tileId:672},{duration:200,tileId:673},{duration:200,tileId:674}],"762":[{duration:150,tileId:761},{duration:150,tileId:762},{duration:150,tileId:763},{duration:150,tileId:764},{duration:150,tileId:765},{duration:150,tileId:766}],"769":[{duration:150,tileId:768},{duration:150,tileId:769},{duration:150,tileId:770}],"826":[{duration:150,tileId:825},{duration:150,tileId:826},{duration:150,tileId:827},{duration:150,tileId:828},{duration:150,tileId:829},{duration:150,tileId:830}],"917":[{duration:200,tileId:916},{duration:200,tileId:917},{duration:200,tileId:918}],"954":[{duration:150,tileId:953},{duration:150,tileId:954},{duration:150,tileId:955},{duration:150,tileId:956},{duration:150,tileId:957},{duration:150,tileId:958}],"981":[{duration:200,tileId:980},{duration:200,tileId:981},{duration:200,tileId:982}],"1018":[{duration:150,tileId:1017},{duration:150,tileId:1018},{duration:150,tileId:1019},{duration:150,tileId:1020},{duration:150,tileId:1021},{duration:150,tileId:1022}],"1178":[{duration:200,tileId:1177},{duration:200,tileId:1178},{duration:200,tileId:1179},{duration:200,tileId:1180},{duration:200,tileId:1181},{duration:200,tileId:1182}],"1210":[{duration:150,tileId:1209},{duration:150,tileId:1210},{duration:150,tileId:1211},{duration:150,tileId:1212},{duration:150,tileId:1213},{duration:150,tileId:1214}],"1274":[{duration:150,tileId:1273},{duration:150,tileId:1274},{duration:150,tileId:1275},{duration:150,tileId:1276},{duration:150,tileId:1277},{duration:150,tileId:1278}],"1621":[{duration:200,tileId:1620},{duration:200,tileId:1621},{duration:200,tileId:1622}],"1685":[{duration:200,tileId:1684},{duration:200,tileId:1685},{duration:200,tileId:1686}],"1691":[{duration:200,tileId:1690},{duration:200,tileId:1691},{duration:200,tileId:1692}],"1813":[{duration:100,tileId:1812},{duration:100,tileId:1813},{duration:100,tileId:1814},{duration:100,tileId:1815},{duration:100,tileId:1816},{duration:100,tileId:1817},{duration:100,tileId:1818},{duration:100,tileId:1819},{duration:100,tileId:1820},{duration:100,tileId:1821},{duration:100,tileId:1822},{duration:100,tileId:1823},{duration:100,tileId:1824},{duration:100,tileId:1825},{duration:100,tileId:1826},{duration:100,tileId:1827},{duration:100,tileId:1828},{duration:100,tileId:1829},{duration:100,tileId:1830}],"1877":[{duration:100,tileId:1876},{duration:100,tileId:1877},{duration:100,tileId:1878},{duration:100,tileId:1879},{duration:100,tileId:1880},{duration:100,tileId:1881},{duration:100,tileId:1882},{duration:100,tileId:1883},{duration:100,tileId:1884},{duration:100,tileId:1885},{duration:100,tileId:1886},{duration:100,tileId:1887},{duration:100,tileId:1888},{duration:100,tileId:1889},{duration:100,tileId:1890},{duration:100,tileId:1891},{duration:100,tileId:1892},{duration:100,tileId:1893},{duration:100,tileId:1894}],"1897":[{duration:200,tileId:1896},{duration:200,tileId:1897},{duration:200,tileId:1898}],"1926":[{duration:400,tileId:1925},{duration:400,tileId:1926},{duration:400,tileId:1927}],"1990":[{duration:400,tileId:1989},{duration:400,tileId:1990}],"2054":[{duration:400,tileId:2053},{duration:400,tileId:2054}],"2246":[{duration:200,tileId:2245},{duration:200,tileId:2246},{duration:200,tileId:2247},{duration:200,tileId:2248}],"2310":[{duration:200,tileId:2309},{duration:200,tileId:2310},{duration:200,tileId:2311},{duration:200,tileId:2312}],"2376":[{duration:300,tileId:2375},{duration:300,tileId:2376}],"2394":[{duration:400,tileId:2393},{duration:400,tileId:2394},{duration:400,tileId:2395}],"2458":[{duration:400,tileId:2457},{duration:400,tileId:2458}],"2522":[{duration:400,tileId:2521},{duration:400,tileId:2522}],"2665":[{duration:200,tileId:2664},{duration:200,tileId:2665},{duration:200,tileId:2666}],"2714":[{duration:100,tileId:2713},{duration:100,tileId:2714},{duration:100,tileId:2715},{duration:100,tileId:2716}],"2778":[{duration:200,tileId:2777},{duration:200,tileId:2778},{duration:200,tileId:2779},{duration:200,tileId:2780}],"2844":[{duration:300,tileId:2843},{duration:300,tileId:2844}],"3201":[{duration:200,tileId:3200},{duration:200,tileId:3201},{duration:200,tileId:3202},{duration:200,tileId:3203}],"3265":[{duration:200,tileId:3264},{duration:200,tileId:3265},{duration:200,tileId:3266},{duration:200,tileId:3267}],"3329":[{duration:200,tileId:3328},{duration:200,tileId:3329},{duration:200,tileId:3330},{duration:200,tileId:3331}],"3393":[{duration:200,tileId:3392},{duration:200,tileId:3393},{duration:200,tileId:3394},{duration:200,tileId:3395}],"3669":[{duration:100,tileId:3668},{duration:100,tileId:3669},{duration:100,tileId:3670},{duration:100,tileId:3671}],"3733":[{duration:100,tileId:3732},{duration:100,tileId:3733},{duration:100,tileId:3734},{duration:100,tileId:3735}],"3797":[{duration:100,tileId:3796},{duration:100,tileId:3797},{duration:100,tileId:3798},{duration:100,tileId:3799}],"3861":[{duration:100,tileId:3860},{duration:100,tileId:3861},{duration:100,tileId:3862},{duration:100,tileId:3863}],"3922":[{duration:200,tileId:3921},{duration:200,tileId:3922},{duration:200,tileId:3923}],"3947":[{duration:200,tileId:3946},{duration:200,tileId:3947},{duration:200,tileId:3948},{duration:200,tileId:3949},{duration:200,tileId:3950},{duration:200,tileId:3951}],"3954":[{duration:200,tileId:3953},{duration:200,tileId:3954},{duration:200,tileId:3955},{duration:200,tileId:3956},{duration:200,tileId:3957},{duration:200,tileId:3958}],"4011":[{duration:200,tileId:4010},{duration:200,tileId:4011},{duration:200,tileId:4012},{duration:200,tileId:4013},{duration:200,tileId:4014},{duration:200,tileId:4015}],"4018":[{duration:200,tileId:4017},{duration:200,tileId:4018},{duration:200,tileId:4019},{duration:200,tileId:4020},{duration:200,tileId:4021},{duration:200,tileId:4022}],"4555":[{duration:400,tileId:4554},{duration:400,tileId:4555},{duration:400,tileId:4556},{duration:400,tileId:4557},{duration:400,tileId:4558}],"4561":[{duration:200,tileId:4560},{duration:200,tileId:4561},{duration:200,tileId:4562},{duration:200,tileId:4563}],"4619":[{duration:400,tileId:4618},{duration:400,tileId:4619},{duration:400,tileId:4620},{duration:400,tileId:4621},{duration:400,tileId:4622},{duration:400,tileId:4623}],"4683":[{duration:400,tileId:4682},{duration:400,tileId:4683},{duration:400,tileId:4684},{duration:400,tileId:4685}],"4747":[{duration:400,tileId:4746},{duration:400,tileId:4747},{duration:400,tileId:4748},{duration:400,tileId:4749}],"4811":[{duration:400,tileId:4810},{duration:400,tileId:4811},{duration:400,tileId:4812},{duration:400,tileId:4813}],"5057":[{duration:200,tileId:5056},{duration:200,tileId:5057},{duration:200,tileId:5058},{duration:200,tileId:5059},{duration:200,tileId:5060},{duration:200,tileId:5061},{duration:200,tileId:5062},{duration:200,tileId:5063},{duration:200,tileId:5064},{duration:200,tileId:5065},{duration:200,tileId:5066},{duration:200,tileId:5067},{duration:200,tileId:5068},{duration:200,tileId:5069},{duration:200,tileId:5070},{duration:200,tileId:5071},{duration:200,tileId:5072}],"5121":[{duration:200,tileId:5120},{duration:200,tileId:5121},{duration:200,tileId:5122},{duration:200,tileId:5123},{duration:200,tileId:5124},{duration:200,tileId:5125},{duration:200,tileId:5126},{duration:200,tileId:5127},{duration:200,tileId:5128},{duration:200,tileId:5129},{duration:200,tileId:5130},{duration:200,tileId:5131},{duration:200,tileId:5132},{duration:200,tileId:5133},{duration:200,tileId:5134}],"5377":[{duration:200,tileId:5376},{duration:200,tileId:5377},{duration:200,tileId:5378}],"5441":[{duration:200,tileId:5440},{duration:200,tileId:5441},{duration:200,tileId:5442}],"5638":[{duration:200,tileId:5637},{duration:200,tileId:5638},{duration:200,tileId:5639},{duration:200,tileId:5640},{duration:200,tileId:5641},{duration:200,tileId:5642}],"6081":[{duration:200,tileId:6080},{duration:200,tileId:6081},{duration:200,tileId:6082}],"6145":[{duration:200,tileId:6144},{duration:200,tileId:6145},{duration:200,tileId:6146}],"6151":[{duration:200,tileId:6150},{duration:200,tileId:6151},{duration:200,tileId:6152}],"6273":[{duration:200,tileId:6272},{duration:200,tileId:6273},{duration:200,tileId:6274},{duration:200,tileId:6275},{duration:200,tileId:6276},{duration:200,tileId:6277},{duration:200,tileId:6278},{duration:200,tileId:6279},{duration:200,tileId:6280},{duration:200,tileId:6281},{duration:200,tileId:6282},{duration:200,tileId:6283},{duration:200,tileId:6284},{duration:200,tileId:6285},{duration:200,tileId:6286},{duration:200,tileId:6287},{duration:200,tileId:6288},{duration:200,tileId:6289},{duration:200,tileId:6290}],"6337":[{duration:200,tileId:6336},{duration:200,tileId:6337},{duration:200,tileId:6338},{duration:200,tileId:6339},{duration:200,tileId:6340},{duration:200,tileId:6341},{duration:200,tileId:6342},{duration:200,tileId:6343},{duration:200,tileId:6344},{duration:200,tileId:6345},{duration:200,tileId:6346},{duration:200,tileId:6347},{duration:200,tileId:6348},{duration:200,tileId:6349},{duration:200,tileId:6350},{duration:200,tileId:6351},{duration:200,tileId:6352},{duration:200,tileId:6353},{duration:200,tileId:6354}],"7621":[{duration:200,tileId:7620},{duration:200,tileId:7621},{duration:200,tileId:7622},{duration:200,tileId:7623}],"7685":[{duration:200,tileId:7684},{duration:200,tileId:7685},{duration:200,tileId:7686},{duration:200,tileId:7687}],"7693":[{duration:200,tileId:7692},{duration:200,tileId:7693},{duration:200,tileId:7694},{duration:200,tileId:7695},{duration:200,tileId:7696},{duration:200,tileId:7697},{duration:200,tileId:7698},{duration:200,tileId:7699}],"7749":[{duration:200,tileId:7748},{duration:200,tileId:7749},{duration:200,tileId:7750},{duration:200,tileId:7751}],"7757":[{duration:200,tileId:7756},{duration:200,tileId:7757},{duration:200,tileId:7758},{duration:200,tileId:7759},{duration:200,tileId:7760},{duration:200,tileId:7761},{duration:200,tileId:7762},{duration:200,tileId:7763}],"7813":[{duration:200,tileId:7812},{duration:200,tileId:7813},{duration:200,tileId:7814},{duration:200,tileId:7815}]};var ho={width:F2,height:q2,tileSize:H2,version:U2,high:W2,tilesets:$2,animations:G2};class Z2{constructor(t){this.game=t,this.width=ho.width,this.height=ho.height,this.tileSize=ho.tileSize,this.data=[],this.grid=[],this.high=ho.high,this.objects=[],this.lights=[],this.rawTilesets=ho.tilesets,this.tilesets={},this.cursorTiles={},this.animatedTiles=ho.animations,this.mapLoaded=!1,this.preloadedData=!1,this.tilesetsLoaded=!1,this.load()}ready(){var t;this.mapLoaded&&this.tilesetsLoaded?(t=this.readyCallback)==null||t.call(this):window.setTimeout(()=>this.ready(),100)}load(){se.debug("Parsing map with Web Workers...");let t=new Worker("/assets/mapworker.6517958e.js",{type:"classic"});t.postMessage([this.width,this.height]),t.addEventListener("message",e=>{e.data.data&&(this.data=e.data.data),e.data.grid&&(this.grid=e.data.grid),this.loadRegionData(),this.mapLoaded=!0}),this.loadTilesets(),this.ready()}loadRegions(t){vt.each(t,e=>this.loadRegion(e)),this.saveRegionData()}loadRegion(t){for(let e of t){let a=this.coordToIndex(e.x,e.y),l=this.objects.indexOf(a);this.data[a]=e.data,e.c&&!this.isColliding(e.x,e.y)&&(this.grid[e.y][e.x]=1),!e.c&&this.isColliding(e.x,e.y)&&(this.grid[e.y][e.x]=0),e.cur&&(this.cursorTiles[a]=e.cur),!e.cur&&a in this.cursorTiles&&(this.cursorTiles[a]=""),e.o&&l<0&&this.objects.push(a),!e.o&&l>-1&&this.objects.splice(l,1)}}loadTilesets(){vt.each(this.rawTilesets,(t,e)=>{this.loadTileset(t,parseInt(e),a=>{this.tilesets[e]=a,vt.size(this.tilesets)===vt.size(this.rawTilesets)&&(this.tilesetsLoaded=!0)})})}loadTileset(t,e,a){let l=new Image,g=`/img/tilesets/tilesheet-${e+1}.png`;l.crossOrigin="Anonymous",l.path=g,l.src=g,l.firstGID=t,l.loaded=!0,l.addEventListener("load",()=>{if(l.width%this.tileSize>0)throw new Error(`The tile size is malformed in the tile set: ${l.path}`);l.lastGID=t+l.width*l.height/this.tileSize**2,a(l)}),l.addEventListener("error",()=>{throw new Error(`Could not find tile set: ${l.path}`)})}loadRegionData(){let t=this.game.storage.getRegionData();t.regionData.length>0&&(this.data=t.regionData,this.grid=t.grid,this.objects=t.objects,this.cursorTiles=t.cursorTiles,this.preloadedData=!0)}saveRegionData(){this.game.storage.setRegionData(this.data,this.grid,this.objects,this.cursorTiles)}coordToIndex(t,e){return e*this.width+t}indexToCoord(t){return{x:t%this.width,y:Math.floor(t/this.width)}}isColliding(t,e){return this.isOutOfBounds(t,e)||this.data[this.coordToIndex(t,e)]<1?!0:this.grid[e][t]===1}isObject(t,e){let a=this.coordToIndex(t,e);return this.objects.includes(a)}getTileCursor(t,e){let a=this.coordToIndex(t,e);return this.cursorTiles[a]}isHighTile(t){return this.high.includes(t)}isLightTile(t){return this.lights.includes(t)}isAnimatedTile(t){return t in this.animatedTiles}isOutOfBounds(t,e){return Tu(t)&&Tu(e)&&(t<0||t>=this.width||e<0||e>=this.height)}getTileAnimation(t){return this.animatedTiles[t]}getTilesetFromId(t){for(let e in this.tilesets)if(t<this.tilesets[e].lastGID)return this.tilesets[e]}onReady(t){this.readyCallback=t}}/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */const V2=4,Du=0,Ou=1,j2=2;function vo(n){let t=n.length;for(;--t>=0;)n[t]=0}const K2=0,zg=1,J2=2,Q2=3,tk=258,Ad=29,Ra=256,xa=Ra+1+Ad,_o=30,Xd=19,Fg=2*xa+1,Sr=15,Gh=16,ek=7,Yd=256,qg=16,Hg=17,Ug=18,md=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),js=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ik=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Wg=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nk=512,yn=new Array((xa+2)*2);vo(yn);const ma=new Array(_o*2);vo(ma);const Sa=new Array(nk);vo(Sa);const Ca=new Array(tk-Q2+1);vo(Ca);const Ld=new Array(Ad);vo(Ld);const sl=new Array(_o);vo(sl);function Zh(n,t,e,a,l){this.static_tree=n,this.extra_bits=t,this.extra_base=e,this.elems=a,this.max_length=l,this.has_stree=n&&n.length}let $g,Gg,Zg;function Vh(n,t){this.dyn_tree=n,this.max_code=0,this.stat_desc=t}const Vg=n=>n<256?Sa[n]:Sa[256+(n>>>7)],Ia=(n,t)=>{n.pending_buf[n.pending++]=t&255,n.pending_buf[n.pending++]=t>>>8&255},oi=(n,t,e)=>{n.bi_valid>Gh-e?(n.bi_buf|=t<<n.bi_valid&65535,Ia(n,n.bi_buf),n.bi_buf=t>>Gh-n.bi_valid,n.bi_valid+=e-Gh):(n.bi_buf|=t<<n.bi_valid&65535,n.bi_valid+=e)},Vi=(n,t,e)=>{oi(n,e[t*2],e[t*2+1])},jg=(n,t)=>{let e=0;do e|=n&1,n>>>=1,e<<=1;while(--t>0);return e>>>1},rk=n=>{n.bi_valid===16?(Ia(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},ok=(n,t)=>{const e=t.dyn_tree,a=t.max_code,l=t.stat_desc.static_tree,g=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,x=t.stat_desc.extra_base,N=t.stat_desc.max_length;let b,I,U,z,q,G,et=0;for(z=0;z<=Sr;z++)n.bl_count[z]=0;for(e[n.heap[n.heap_max]*2+1]=0,b=n.heap_max+1;b<Fg;b++)I=n.heap[b],z=e[e[I*2+1]*2+1]+1,z>N&&(z=N,et++),e[I*2+1]=z,!(I>a)&&(n.bl_count[z]++,q=0,I>=x&&(q=p[I-x]),G=e[I*2],n.opt_len+=G*(z+q),g&&(n.static_len+=G*(l[I*2+1]+q)));if(et!==0){do{for(z=N-1;n.bl_count[z]===0;)z--;n.bl_count[z]--,n.bl_count[z+1]+=2,n.bl_count[N]--,et-=2}while(et>0);for(z=N;z!==0;z--)for(I=n.bl_count[z];I!==0;)U=n.heap[--b],!(U>a)&&(e[U*2+1]!==z&&(n.opt_len+=(z-e[U*2+1])*e[U*2],e[U*2+1]=z),I--)}},Kg=(n,t,e)=>{const a=new Array(Sr+1);let l=0,g,p;for(g=1;g<=Sr;g++)a[g]=l=l+e[g-1]<<1;for(p=0;p<=t;p++){let x=n[p*2+1];x!==0&&(n[p*2]=jg(a[x]++,x))}},ak=()=>{let n,t,e,a,l;const g=new Array(Sr+1);for(e=0,a=0;a<Ad-1;a++)for(Ld[a]=e,n=0;n<1<<md[a];n++)Ca[e++]=a;for(Ca[e-1]=a,l=0,a=0;a<16;a++)for(sl[a]=l,n=0;n<1<<js[a];n++)Sa[l++]=a;for(l>>=7;a<_o;a++)for(sl[a]=l<<7,n=0;n<1<<js[a]-7;n++)Sa[256+l++]=a;for(t=0;t<=Sr;t++)g[t]=0;for(n=0;n<=143;)yn[n*2+1]=8,n++,g[8]++;for(;n<=255;)yn[n*2+1]=9,n++,g[9]++;for(;n<=279;)yn[n*2+1]=7,n++,g[7]++;for(;n<=287;)yn[n*2+1]=8,n++,g[8]++;for(Kg(yn,xa+1,g),n=0;n<_o;n++)ma[n*2+1]=5,ma[n*2]=jg(n,5);$g=new Zh(yn,md,Ra+1,xa,Sr),Gg=new Zh(ma,js,0,_o,Sr),Zg=new Zh(new Array(0),ik,0,Xd,ek)},Jg=n=>{let t;for(t=0;t<xa;t++)n.dyn_ltree[t*2]=0;for(t=0;t<_o;t++)n.dyn_dtree[t*2]=0;for(t=0;t<Xd;t++)n.bl_tree[t*2]=0;n.dyn_ltree[Yd*2]=1,n.opt_len=n.static_len=0,n.last_lit=n.matches=0},Qg=n=>{n.bi_valid>8?Ia(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},sk=(n,t,e,a)=>{Qg(n),a&&(Ia(n,e),Ia(n,~e)),n.pending_buf.set(n.window.subarray(t,t+e),n.pending),n.pending+=e},Nu=(n,t,e,a)=>{const l=t*2,g=e*2;return n[l]<n[g]||n[l]===n[g]&&a[t]<=a[e]},jh=(n,t,e)=>{const a=n.heap[e];let l=e<<1;for(;l<=n.heap_len&&(l<n.heap_len&&Nu(t,n.heap[l+1],n.heap[l],n.depth)&&l++,!Nu(t,a,n.heap[l],n.depth));)n.heap[e]=n.heap[l],e=l,l<<=1;n.heap[e]=a},Pu=(n,t,e)=>{let a,l,g=0,p,x;if(n.last_lit!==0)do a=n.pending_buf[n.d_buf+g*2]<<8|n.pending_buf[n.d_buf+g*2+1],l=n.pending_buf[n.l_buf+g],g++,a===0?Vi(n,l,t):(p=Ca[l],Vi(n,p+Ra+1,t),x=md[p],x!==0&&(l-=Ld[p],oi(n,l,x)),a--,p=Vg(a),Vi(n,p,e),x=js[p],x!==0&&(a-=sl[p],oi(n,a,x)));while(g<n.last_lit);Vi(n,Yd,t)},kd=(n,t)=>{const e=t.dyn_tree,a=t.stat_desc.static_tree,l=t.stat_desc.has_stree,g=t.stat_desc.elems;let p,x,N=-1,b;for(n.heap_len=0,n.heap_max=Fg,p=0;p<g;p++)e[p*2]!==0?(n.heap[++n.heap_len]=N=p,n.depth[p]=0):e[p*2+1]=0;for(;n.heap_len<2;)b=n.heap[++n.heap_len]=N<2?++N:0,e[b*2]=1,n.depth[b]=0,n.opt_len--,l&&(n.static_len-=a[b*2+1]);for(t.max_code=N,p=n.heap_len>>1;p>=1;p--)jh(n,e,p);b=g;do p=n.heap[1],n.heap[1]=n.heap[n.heap_len--],jh(n,e,1),x=n.heap[1],n.heap[--n.heap_max]=p,n.heap[--n.heap_max]=x,e[b*2]=e[p*2]+e[x*2],n.depth[b]=(n.depth[p]>=n.depth[x]?n.depth[p]:n.depth[x])+1,e[p*2+1]=e[x*2+1]=b,n.heap[1]=b++,jh(n,e,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],ok(n,t),Kg(e,N,n.bl_count)},Mu=(n,t,e)=>{let a,l=-1,g,p=t[0*2+1],x=0,N=7,b=4;for(p===0&&(N=138,b=3),t[(e+1)*2+1]=65535,a=0;a<=e;a++)g=p,p=t[(a+1)*2+1],!(++x<N&&g===p)&&(x<b?n.bl_tree[g*2]+=x:g!==0?(g!==l&&n.bl_tree[g*2]++,n.bl_tree[qg*2]++):x<=10?n.bl_tree[Hg*2]++:n.bl_tree[Ug*2]++,x=0,l=g,p===0?(N=138,b=3):g===p?(N=6,b=3):(N=7,b=4))},Bu=(n,t,e)=>{let a,l=-1,g,p=t[0*2+1],x=0,N=7,b=4;for(p===0&&(N=138,b=3),a=0;a<=e;a++)if(g=p,p=t[(a+1)*2+1],!(++x<N&&g===p)){if(x<b)do Vi(n,g,n.bl_tree);while(--x!==0);else g!==0?(g!==l&&(Vi(n,g,n.bl_tree),x--),Vi(n,qg,n.bl_tree),oi(n,x-3,2)):x<=10?(Vi(n,Hg,n.bl_tree),oi(n,x-3,3)):(Vi(n,Ug,n.bl_tree),oi(n,x-11,7));x=0,l=g,p===0?(N=138,b=3):g===p?(N=6,b=3):(N=7,b=4)}},lk=n=>{let t;for(Mu(n,n.dyn_ltree,n.l_desc.max_code),Mu(n,n.dyn_dtree,n.d_desc.max_code),kd(n,n.bl_desc),t=Xd-1;t>=3&&n.bl_tree[Wg[t]*2+1]===0;t--);return n.opt_len+=3*(t+1)+5+5+4,t},hk=(n,t,e,a)=>{let l;for(oi(n,t-257,5),oi(n,e-1,5),oi(n,a-4,4),l=0;l<a;l++)oi(n,n.bl_tree[Wg[l]*2+1],3);Bu(n,n.dyn_ltree,t-1),Bu(n,n.dyn_dtree,e-1)},dk=n=>{let t=4093624447,e;for(e=0;e<=31;e++,t>>>=1)if(t&1&&n.dyn_ltree[e*2]!==0)return Du;if(n.dyn_ltree[9*2]!==0||n.dyn_ltree[10*2]!==0||n.dyn_ltree[13*2]!==0)return Ou;for(e=32;e<Ra;e++)if(n.dyn_ltree[e*2]!==0)return Ou;return Du};let zu=!1;const fk=n=>{zu||(ak(),zu=!0),n.l_desc=new Vh(n.dyn_ltree,$g),n.d_desc=new Vh(n.dyn_dtree,Gg),n.bl_desc=new Vh(n.bl_tree,Zg),n.bi_buf=0,n.bi_valid=0,Jg(n)},tw=(n,t,e,a)=>{oi(n,(K2<<1)+(a?1:0),3),sk(n,t,e,!0)},uk=n=>{oi(n,zg<<1,3),Vi(n,Yd,yn),rk(n)},gk=(n,t,e,a)=>{let l,g,p=0;n.level>0?(n.strm.data_type===j2&&(n.strm.data_type=dk(n)),kd(n,n.l_desc),kd(n,n.d_desc),p=lk(n),l=n.opt_len+3+7>>>3,g=n.static_len+3+7>>>3,g<=l&&(l=g)):l=g=e+5,e+4<=l&&t!==-1?tw(n,t,e,a):n.strategy===V2||g===l?(oi(n,(zg<<1)+(a?1:0),3),Pu(n,yn,ma)):(oi(n,(J2<<1)+(a?1:0),3),hk(n,n.l_desc.max_code+1,n.d_desc.max_code+1,p+1),Pu(n,n.dyn_ltree,n.dyn_dtree)),Jg(n),a&&Qg(n)},wk=(n,t,e)=>(n.pending_buf[n.d_buf+n.last_lit*2]=t>>>8&255,n.pending_buf[n.d_buf+n.last_lit*2+1]=t&255,n.pending_buf[n.l_buf+n.last_lit]=e&255,n.last_lit++,t===0?n.dyn_ltree[e*2]++:(n.matches++,t--,n.dyn_ltree[(Ca[e]+Ra+1)*2]++,n.dyn_dtree[Vg(t)*2]++),n.last_lit===n.lit_bufsize-1);var ck=fk,pk=tw,_k=gk,mk=wk,kk=uk,vk={_tr_init:ck,_tr_stored_block:pk,_tr_flush_block:_k,_tr_tally:mk,_tr_align:kk};const bk=(n,t,e,a)=>{let l=n&65535|0,g=n>>>16&65535|0,p=0;for(;e!==0;){p=e>2e3?2e3:e,e-=p;do l=l+t[a++]|0,g=g+l|0;while(--p);l%=65521,g%=65521}return l|g<<16|0};var Ea=bk;const yk=()=>{let n,t=[];for(var e=0;e<256;e++){n=e;for(var a=0;a<8;a++)n=n&1?3988292384^n>>>1:n>>>1;t[e]=n}return t},xk=new Uint32Array(yk()),Sk=(n,t,e,a)=>{const l=xk,g=a+e;n^=-1;for(let p=a;p<g;p++)n=n>>>8^l[(n^t[p])&255];return n^-1};var Ae=Sk,ko={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Da={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Ck,_tr_stored_block:Ik,_tr_flush_block:Ek,_tr_tally:jn,_tr_align:Tk}=vk,{Z_NO_FLUSH:Yr,Z_PARTIAL_FLUSH:Ak,Z_FULL_FLUSH:Xk,Z_FINISH:Kn,Z_BLOCK:Fu,Z_OK:ji,Z_STREAM_END:qu,Z_STREAM_ERROR:vi,Z_DATA_ERROR:Yk,Z_BUF_ERROR:Kh,Z_DEFAULT_COMPRESSION:Lk,Z_FILTERED:Rk,Z_HUFFMAN_ONLY:Fs,Z_RLE:Dk,Z_FIXED:Ok,Z_DEFAULT_STRATEGY:Nk,Z_UNKNOWN:Pk,Z_DEFLATED:ul}=Da,Mk=9,Bk=15,zk=8,Fk=29,qk=256,vd=qk+1+Fk,Hk=30,Uk=19,Wk=2*vd+1,$k=15,qt=3,$n=258,Ni=$n+qt+1,Gk=32,gl=42,bd=69,Ks=73,Js=91,Qs=103,Cr=113,ga=666,xe=1,Oa=2,Tr=3,bo=4,Zk=3,Gn=(n,t)=>(n.msg=ko[t],t),Hu=n=>(n<<1)-(n>4?9:0),Wn=n=>{let t=n.length;for(;--t>=0;)n[t]=0};let Vk=(n,t,e)=>(t<<n.hash_shift^e)&n.hash_mask,Jn=Vk;const Hn=n=>{const t=n.state;let e=t.pending;e>n.avail_out&&(e=n.avail_out),e!==0&&(n.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+e),n.next_out),n.next_out+=e,t.pending_out+=e,n.total_out+=e,n.avail_out-=e,t.pending-=e,t.pending===0&&(t.pending_out=0))},Ne=(n,t)=>{Ek(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,t),n.block_start=n.strstart,Hn(n.strm)},$t=(n,t)=>{n.pending_buf[n.pending++]=t},ha=(n,t)=>{n.pending_buf[n.pending++]=t>>>8&255,n.pending_buf[n.pending++]=t&255},jk=(n,t,e,a)=>{let l=n.avail_in;return l>a&&(l=a),l===0?0:(n.avail_in-=l,t.set(n.input.subarray(n.next_in,n.next_in+l),e),n.state.wrap===1?n.adler=Ea(n.adler,t,l,e):n.state.wrap===2&&(n.adler=Ae(n.adler,t,l,e)),n.next_in+=l,n.total_in+=l,l)},ew=(n,t)=>{let e=n.max_chain_length,a=n.strstart,l,g,p=n.prev_length,x=n.nice_match;const N=n.strstart>n.w_size-Ni?n.strstart-(n.w_size-Ni):0,b=n.window,I=n.w_mask,U=n.prev,z=n.strstart+$n;let q=b[a+p-1],G=b[a+p];n.prev_length>=n.good_match&&(e>>=2),x>n.lookahead&&(x=n.lookahead);do if(l=t,!(b[l+p]!==G||b[l+p-1]!==q||b[l]!==b[a]||b[++l]!==b[a+1])){a+=2,l++;do;while(b[++a]===b[++l]&&b[++a]===b[++l]&&b[++a]===b[++l]&&b[++a]===b[++l]&&b[++a]===b[++l]&&b[++a]===b[++l]&&b[++a]===b[++l]&&b[++a]===b[++l]&&a<z);if(g=$n-(z-a),a=z-$n,g>p){if(n.match_start=t,p=g,g>=x)break;q=b[a+p-1],G=b[a+p]}}while((t=U[t&I])>N&&--e!==0);return p<=n.lookahead?p:n.lookahead},Ar=n=>{const t=n.w_size;let e,a,l,g,p;do{if(g=n.window_size-n.lookahead-n.strstart,n.strstart>=t+(t-Ni)){n.window.set(n.window.subarray(t,t+t),0),n.match_start-=t,n.strstart-=t,n.block_start-=t,a=n.hash_size,e=a;do l=n.head[--e],n.head[e]=l>=t?l-t:0;while(--a);a=t,e=a;do l=n.prev[--e],n.prev[e]=l>=t?l-t:0;while(--a);g+=t}if(n.strm.avail_in===0)break;if(a=jk(n.strm,n.window,n.strstart+n.lookahead,g),n.lookahead+=a,n.lookahead+n.insert>=qt)for(p=n.strstart-n.insert,n.ins_h=n.window[p],n.ins_h=Jn(n,n.ins_h,n.window[p+1]);n.insert&&(n.ins_h=Jn(n,n.ins_h,n.window[p+qt-1]),n.prev[p&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=p,p++,n.insert--,!(n.lookahead+n.insert<qt)););}while(n.lookahead<Ni&&n.strm.avail_in!==0)},Kk=(n,t)=>{let e=65535;for(e>n.pending_buf_size-5&&(e=n.pending_buf_size-5);;){if(n.lookahead<=1){if(Ar(n),n.lookahead===0&&t===Yr)return xe;if(n.lookahead===0)break}n.strstart+=n.lookahead,n.lookahead=0;const a=n.block_start+e;if((n.strstart===0||n.strstart>=a)&&(n.lookahead=n.strstart-a,n.strstart=a,Ne(n,!1),n.strm.avail_out===0)||n.strstart-n.block_start>=n.w_size-Ni&&(Ne(n,!1),n.strm.avail_out===0))return xe}return n.insert=0,t===Kn?(Ne(n,!0),n.strm.avail_out===0?Tr:bo):(n.strstart>n.block_start&&(Ne(n,!1),n.strm.avail_out===0),xe)},Jh=(n,t)=>{let e,a;for(;;){if(n.lookahead<Ni){if(Ar(n),n.lookahead<Ni&&t===Yr)return xe;if(n.lookahead===0)break}if(e=0,n.lookahead>=qt&&(n.ins_h=Jn(n,n.ins_h,n.window[n.strstart+qt-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),e!==0&&n.strstart-e<=n.w_size-Ni&&(n.match_length=ew(n,e)),n.match_length>=qt)if(a=jn(n,n.strstart-n.match_start,n.match_length-qt),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=qt){n.match_length--;do n.strstart++,n.ins_h=Jn(n,n.ins_h,n.window[n.strstart+qt-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=Jn(n,n.ins_h,n.window[n.strstart+1]);else a=jn(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(a&&(Ne(n,!1),n.strm.avail_out===0))return xe}return n.insert=n.strstart<qt-1?n.strstart:qt-1,t===Kn?(Ne(n,!0),n.strm.avail_out===0?Tr:bo):n.last_lit&&(Ne(n,!1),n.strm.avail_out===0)?xe:Oa},fo=(n,t)=>{let e,a,l;for(;;){if(n.lookahead<Ni){if(Ar(n),n.lookahead<Ni&&t===Yr)return xe;if(n.lookahead===0)break}if(e=0,n.lookahead>=qt&&(n.ins_h=Jn(n,n.ins_h,n.window[n.strstart+qt-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=qt-1,e!==0&&n.prev_length<n.max_lazy_match&&n.strstart-e<=n.w_size-Ni&&(n.match_length=ew(n,e),n.match_length<=5&&(n.strategy===Rk||n.match_length===qt&&n.strstart-n.match_start>4096)&&(n.match_length=qt-1)),n.prev_length>=qt&&n.match_length<=n.prev_length){l=n.strstart+n.lookahead-qt,a=jn(n,n.strstart-1-n.prev_match,n.prev_length-qt),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=l&&(n.ins_h=Jn(n,n.ins_h,n.window[n.strstart+qt-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=qt-1,n.strstart++,a&&(Ne(n,!1),n.strm.avail_out===0))return xe}else if(n.match_available){if(a=jn(n,0,n.window[n.strstart-1]),a&&Ne(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return xe}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(a=jn(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<qt-1?n.strstart:qt-1,t===Kn?(Ne(n,!0),n.strm.avail_out===0?Tr:bo):n.last_lit&&(Ne(n,!1),n.strm.avail_out===0)?xe:Oa},Jk=(n,t)=>{let e,a,l,g;const p=n.window;for(;;){if(n.lookahead<=$n){if(Ar(n),n.lookahead<=$n&&t===Yr)return xe;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=qt&&n.strstart>0&&(l=n.strstart-1,a=p[l],a===p[++l]&&a===p[++l]&&a===p[++l])){g=n.strstart+$n;do;while(a===p[++l]&&a===p[++l]&&a===p[++l]&&a===p[++l]&&a===p[++l]&&a===p[++l]&&a===p[++l]&&a===p[++l]&&l<g);n.match_length=$n-(g-l),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=qt?(e=jn(n,1,n.match_length-qt),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(e=jn(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),e&&(Ne(n,!1),n.strm.avail_out===0))return xe}return n.insert=0,t===Kn?(Ne(n,!0),n.strm.avail_out===0?Tr:bo):n.last_lit&&(Ne(n,!1),n.strm.avail_out===0)?xe:Oa},Qk=(n,t)=>{let e;for(;;){if(n.lookahead===0&&(Ar(n),n.lookahead===0)){if(t===Yr)return xe;break}if(n.match_length=0,e=jn(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,e&&(Ne(n,!1),n.strm.avail_out===0))return xe}return n.insert=0,t===Kn?(Ne(n,!0),n.strm.avail_out===0?Tr:bo):n.last_lit&&(Ne(n,!1),n.strm.avail_out===0)?xe:Oa};function Gi(n,t,e,a,l){this.good_length=n,this.max_lazy=t,this.nice_length=e,this.max_chain=a,this.func=l}const wa=[new Gi(0,0,0,0,Kk),new Gi(4,4,8,4,Jh),new Gi(4,5,16,8,Jh),new Gi(4,6,32,32,Jh),new Gi(4,4,16,16,fo),new Gi(8,16,32,32,fo),new Gi(8,16,128,128,fo),new Gi(8,32,128,256,fo),new Gi(32,128,258,1024,fo),new Gi(32,258,258,4096,fo)],t4=n=>{n.window_size=2*n.w_size,Wn(n.head),n.max_lazy_match=wa[n.level].max_lazy,n.good_match=wa[n.level].good_length,n.nice_match=wa[n.level].nice_length,n.max_chain_length=wa[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=qt-1,n.match_available=0,n.ins_h=0};function e4(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ul,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Wk*2),this.dyn_dtree=new Uint16Array((2*Hk+1)*2),this.bl_tree=new Uint16Array((2*Uk+1)*2),Wn(this.dyn_ltree),Wn(this.dyn_dtree),Wn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array($k+1),this.heap=new Uint16Array(2*vd+1),Wn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*vd+1),Wn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const iw=n=>{if(!n||!n.state)return Gn(n,vi);n.total_in=n.total_out=0,n.data_type=Pk;const t=n.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?gl:Cr,n.adler=t.wrap===2?0:1,t.last_flush=Yr,Ck(t),ji},nw=n=>{const t=iw(n);return t===ji&&t4(n.state),t},i4=(n,t)=>!n||!n.state||n.state.wrap!==2?vi:(n.state.gzhead=t,ji),rw=(n,t,e,a,l,g)=>{if(!n)return vi;let p=1;if(t===Lk&&(t=6),a<0?(p=0,a=-a):a>15&&(p=2,a-=16),l<1||l>Mk||e!==ul||a<8||a>15||t<0||t>9||g<0||g>Ok)return Gn(n,vi);a===8&&(a=9);const x=new e4;return n.state=x,x.strm=n,x.wrap=p,x.gzhead=null,x.w_bits=a,x.w_size=1<<x.w_bits,x.w_mask=x.w_size-1,x.hash_bits=l+7,x.hash_size=1<<x.hash_bits,x.hash_mask=x.hash_size-1,x.hash_shift=~~((x.hash_bits+qt-1)/qt),x.window=new Uint8Array(x.w_size*2),x.head=new Uint16Array(x.hash_size),x.prev=new Uint16Array(x.w_size),x.lit_bufsize=1<<l+6,x.pending_buf_size=x.lit_bufsize*4,x.pending_buf=new Uint8Array(x.pending_buf_size),x.d_buf=1*x.lit_bufsize,x.l_buf=(1+2)*x.lit_bufsize,x.level=t,x.strategy=g,x.method=e,nw(n)},n4=(n,t)=>rw(n,t,ul,Bk,zk,Nk),r4=(n,t)=>{let e,a;if(!n||!n.state||t>Fu||t<0)return n?Gn(n,vi):vi;const l=n.state;if(!n.output||!n.input&&n.avail_in!==0||l.status===ga&&t!==Kn)return Gn(n,n.avail_out===0?Kh:vi);l.strm=n;const g=l.last_flush;if(l.last_flush=t,l.status===gl)if(l.wrap===2)n.adler=0,$t(l,31),$t(l,139),$t(l,8),l.gzhead?($t(l,(l.gzhead.text?1:0)+(l.gzhead.hcrc?2:0)+(l.gzhead.extra?4:0)+(l.gzhead.name?8:0)+(l.gzhead.comment?16:0)),$t(l,l.gzhead.time&255),$t(l,l.gzhead.time>>8&255),$t(l,l.gzhead.time>>16&255),$t(l,l.gzhead.time>>24&255),$t(l,l.level===9?2:l.strategy>=Fs||l.level<2?4:0),$t(l,l.gzhead.os&255),l.gzhead.extra&&l.gzhead.extra.length&&($t(l,l.gzhead.extra.length&255),$t(l,l.gzhead.extra.length>>8&255)),l.gzhead.hcrc&&(n.adler=Ae(n.adler,l.pending_buf,l.pending,0)),l.gzindex=0,l.status=bd):($t(l,0),$t(l,0),$t(l,0),$t(l,0),$t(l,0),$t(l,l.level===9?2:l.strategy>=Fs||l.level<2?4:0),$t(l,Zk),l.status=Cr);else{let p=ul+(l.w_bits-8<<4)<<8,x=-1;l.strategy>=Fs||l.level<2?x=0:l.level<6?x=1:l.level===6?x=2:x=3,p|=x<<6,l.strstart!==0&&(p|=Gk),p+=31-p%31,l.status=Cr,ha(l,p),l.strstart!==0&&(ha(l,n.adler>>>16),ha(l,n.adler&65535)),n.adler=1}if(l.status===bd)if(l.gzhead.extra){for(e=l.pending;l.gzindex<(l.gzhead.extra.length&65535)&&!(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>e&&(n.adler=Ae(n.adler,l.pending_buf,l.pending-e,e)),Hn(n),e=l.pending,l.pending===l.pending_buf_size));)$t(l,l.gzhead.extra[l.gzindex]&255),l.gzindex++;l.gzhead.hcrc&&l.pending>e&&(n.adler=Ae(n.adler,l.pending_buf,l.pending-e,e)),l.gzindex===l.gzhead.extra.length&&(l.gzindex=0,l.status=Ks)}else l.status=Ks;if(l.status===Ks)if(l.gzhead.name){e=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>e&&(n.adler=Ae(n.adler,l.pending_buf,l.pending-e,e)),Hn(n),e=l.pending,l.pending===l.pending_buf_size)){a=1;break}l.gzindex<l.gzhead.name.length?a=l.gzhead.name.charCodeAt(l.gzindex++)&255:a=0,$t(l,a)}while(a!==0);l.gzhead.hcrc&&l.pending>e&&(n.adler=Ae(n.adler,l.pending_buf,l.pending-e,e)),a===0&&(l.gzindex=0,l.status=Js)}else l.status=Js;if(l.status===Js)if(l.gzhead.comment){e=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>e&&(n.adler=Ae(n.adler,l.pending_buf,l.pending-e,e)),Hn(n),e=l.pending,l.pending===l.pending_buf_size)){a=1;break}l.gzindex<l.gzhead.comment.length?a=l.gzhead.comment.charCodeAt(l.gzindex++)&255:a=0,$t(l,a)}while(a!==0);l.gzhead.hcrc&&l.pending>e&&(n.adler=Ae(n.adler,l.pending_buf,l.pending-e,e)),a===0&&(l.status=Qs)}else l.status=Qs;if(l.status===Qs&&(l.gzhead.hcrc?(l.pending+2>l.pending_buf_size&&Hn(n),l.pending+2<=l.pending_buf_size&&($t(l,n.adler&255),$t(l,n.adler>>8&255),n.adler=0,l.status=Cr)):l.status=Cr),l.pending!==0){if(Hn(n),n.avail_out===0)return l.last_flush=-1,ji}else if(n.avail_in===0&&Hu(t)<=Hu(g)&&t!==Kn)return Gn(n,Kh);if(l.status===ga&&n.avail_in!==0)return Gn(n,Kh);if(n.avail_in!==0||l.lookahead!==0||t!==Yr&&l.status!==ga){let p=l.strategy===Fs?Qk(l,t):l.strategy===Dk?Jk(l,t):wa[l.level].func(l,t);if((p===Tr||p===bo)&&(l.status=ga),p===xe||p===Tr)return n.avail_out===0&&(l.last_flush=-1),ji;if(p===Oa&&(t===Ak?Tk(l):t!==Fu&&(Ik(l,0,0,!1),t===Xk&&(Wn(l.head),l.lookahead===0&&(l.strstart=0,l.block_start=0,l.insert=0))),Hn(n),n.avail_out===0))return l.last_flush=-1,ji}return t!==Kn?ji:l.wrap<=0?qu:(l.wrap===2?($t(l,n.adler&255),$t(l,n.adler>>8&255),$t(l,n.adler>>16&255),$t(l,n.adler>>24&255),$t(l,n.total_in&255),$t(l,n.total_in>>8&255),$t(l,n.total_in>>16&255),$t(l,n.total_in>>24&255)):(ha(l,n.adler>>>16),ha(l,n.adler&65535)),Hn(n),l.wrap>0&&(l.wrap=-l.wrap),l.pending!==0?ji:qu)},o4=n=>{if(!n||!n.state)return vi;const t=n.state.status;return t!==gl&&t!==bd&&t!==Ks&&t!==Js&&t!==Qs&&t!==Cr&&t!==ga?Gn(n,vi):(n.state=null,t===Cr?Gn(n,Yk):ji)},a4=(n,t)=>{let e=t.length;if(!n||!n.state)return vi;const a=n.state,l=a.wrap;if(l===2||l===1&&a.status!==gl||a.lookahead)return vi;if(l===1&&(n.adler=Ea(n.adler,t,e,0)),a.wrap=0,e>=a.w_size){l===0&&(Wn(a.head),a.strstart=0,a.block_start=0,a.insert=0);let N=new Uint8Array(a.w_size);N.set(t.subarray(e-a.w_size,e),0),t=N,e=a.w_size}const g=n.avail_in,p=n.next_in,x=n.input;for(n.avail_in=e,n.next_in=0,n.input=t,Ar(a);a.lookahead>=qt;){let N=a.strstart,b=a.lookahead-(qt-1);do a.ins_h=Jn(a,a.ins_h,a.window[N+qt-1]),a.prev[N&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=N,N++;while(--b);a.strstart=N,a.lookahead=qt-1,Ar(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=qt-1,a.match_available=0,n.next_in=p,n.input=x,n.avail_in=g,a.wrap=l,ji};var s4=n4,l4=rw,h4=nw,d4=iw,f4=i4,u4=r4,g4=o4,w4=a4,c4="pako deflate (from Nodeca project)",ka={deflateInit:s4,deflateInit2:l4,deflateReset:h4,deflateResetKeep:d4,deflateSetHeader:f4,deflate:u4,deflateEnd:g4,deflateSetDictionary:w4,deflateInfo:c4};const p4=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var _4=function(n){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(!!e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const a in e)p4(e,a)&&(n[a]=e[a])}}return n},m4=n=>{let t=0;for(let a=0,l=n.length;a<l;a++)t+=n[a].length;const e=new Uint8Array(t);for(let a=0,l=0,g=n.length;a<g;a++){let p=n[a];e.set(p,l),l+=p.length}return e},wl={assign:_4,flattenChunks:m4};let ow=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ow=!1}const Ta=new Uint8Array(256);for(let n=0;n<256;n++)Ta[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Ta[254]=Ta[254]=1;var k4=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let t,e,a,l,g,p=n.length,x=0;for(l=0;l<p;l++)e=n.charCodeAt(l),(e&64512)===55296&&l+1<p&&(a=n.charCodeAt(l+1),(a&64512)===56320&&(e=65536+(e-55296<<10)+(a-56320),l++)),x+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(x),g=0,l=0;g<x;l++)e=n.charCodeAt(l),(e&64512)===55296&&l+1<p&&(a=n.charCodeAt(l+1),(a&64512)===56320&&(e=65536+(e-55296<<10)+(a-56320),l++)),e<128?t[g++]=e:e<2048?(t[g++]=192|e>>>6,t[g++]=128|e&63):e<65536?(t[g++]=224|e>>>12,t[g++]=128|e>>>6&63,t[g++]=128|e&63):(t[g++]=240|e>>>18,t[g++]=128|e>>>12&63,t[g++]=128|e>>>6&63,t[g++]=128|e&63);return t};const v4=(n,t)=>{if(t<65534&&n.subarray&&ow)return String.fromCharCode.apply(null,n.length===t?n:n.subarray(0,t));let e="";for(let a=0;a<t;a++)e+=String.fromCharCode(n[a]);return e};var b4=(n,t)=>{const e=t||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,t));let a,l;const g=new Array(e*2);for(l=0,a=0;a<e;){let p=n[a++];if(p<128){g[l++]=p;continue}let x=Ta[p];if(x>4){g[l++]=65533,a+=x-1;continue}for(p&=x===2?31:x===3?15:7;x>1&&a<e;)p=p<<6|n[a++]&63,x--;if(x>1){g[l++]=65533;continue}p<65536?g[l++]=p:(p-=65536,g[l++]=55296|p>>10&1023,g[l++]=56320|p&1023)}return v4(g,l)},y4=(n,t)=>{t=t||n.length,t>n.length&&(t=n.length);let e=t-1;for(;e>=0&&(n[e]&192)===128;)e--;return e<0||e===0?t:e+Ta[n[e]]>t?e:t},Aa={string2buf:k4,buf2string:b4,utf8border:y4};function x4(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var aw=x4;const sw=Object.prototype.toString,{Z_NO_FLUSH:S4,Z_SYNC_FLUSH:C4,Z_FULL_FLUSH:I4,Z_FINISH:E4,Z_OK:ll,Z_STREAM_END:T4,Z_DEFAULT_COMPRESSION:A4,Z_DEFAULT_STRATEGY:X4,Z_DEFLATED:Y4}=Da;function Rd(n){this.options=wl.assign({level:A4,method:Y4,chunkSize:16384,windowBits:15,memLevel:8,strategy:X4},n||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new aw,this.strm.avail_out=0;let e=ka.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==ll)throw new Error(ko[e]);if(t.header&&ka.deflateSetHeader(this.strm,t.header),t.dictionary){let a;if(typeof t.dictionary=="string"?a=Aa.string2buf(t.dictionary):sw.call(t.dictionary)==="[object ArrayBuffer]"?a=new Uint8Array(t.dictionary):a=t.dictionary,e=ka.deflateSetDictionary(this.strm,a),e!==ll)throw new Error(ko[e]);this._dict_set=!0}}Rd.prototype.push=function(n,t){const e=this.strm,a=this.options.chunkSize;let l,g;if(this.ended)return!1;for(t===~~t?g=t:g=t===!0?E4:S4,typeof n=="string"?e.input=Aa.string2buf(n):sw.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){if(e.avail_out===0&&(e.output=new Uint8Array(a),e.next_out=0,e.avail_out=a),(g===C4||g===I4)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(l=ka.deflate(e,g),l===T4)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),l=ka.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===ll;if(e.avail_out===0){this.onData(e.output);continue}if(g>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(e.avail_in===0)break}return!0};Rd.prototype.onData=function(n){this.chunks.push(n)};Rd.prototype.onEnd=function(n){n===ll&&(this.result=wl.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};const qs=30,L4=12;var R4=function(t,e){let a,l,g,p,x,N,b,I,U,z,q,G,et,lt,it,Nt,ft,nt,gt,w,ht,Xt,Lt,Et;const Tt=t.state;a=t.next_in,Lt=t.input,l=a+(t.avail_in-5),g=t.next_out,Et=t.output,p=g-(e-t.avail_out),x=g+(t.avail_out-257),N=Tt.dmax,b=Tt.wsize,I=Tt.whave,U=Tt.wnext,z=Tt.window,q=Tt.hold,G=Tt.bits,et=Tt.lencode,lt=Tt.distcode,it=(1<<Tt.lenbits)-1,Nt=(1<<Tt.distbits)-1;t:do{G<15&&(q+=Lt[a++]<<G,G+=8,q+=Lt[a++]<<G,G+=8),ft=et[q&it];e:for(;;){if(nt=ft>>>24,q>>>=nt,G-=nt,nt=ft>>>16&255,nt===0)Et[g++]=ft&65535;else if(nt&16){gt=ft&65535,nt&=15,nt&&(G<nt&&(q+=Lt[a++]<<G,G+=8),gt+=q&(1<<nt)-1,q>>>=nt,G-=nt),G<15&&(q+=Lt[a++]<<G,G+=8,q+=Lt[a++]<<G,G+=8),ft=lt[q&Nt];i:for(;;){if(nt=ft>>>24,q>>>=nt,G-=nt,nt=ft>>>16&255,nt&16){if(w=ft&65535,nt&=15,G<nt&&(q+=Lt[a++]<<G,G+=8,G<nt&&(q+=Lt[a++]<<G,G+=8)),w+=q&(1<<nt)-1,w>N){t.msg="invalid distance too far back",Tt.mode=qs;break t}if(q>>>=nt,G-=nt,nt=g-p,w>nt){if(nt=w-nt,nt>I&&Tt.sane){t.msg="invalid distance too far back",Tt.mode=qs;break t}if(ht=0,Xt=z,U===0){if(ht+=b-nt,nt<gt){gt-=nt;do Et[g++]=z[ht++];while(--nt);ht=g-w,Xt=Et}}else if(U<nt){if(ht+=b+U-nt,nt-=U,nt<gt){gt-=nt;do Et[g++]=z[ht++];while(--nt);if(ht=0,U<gt){nt=U,gt-=nt;do Et[g++]=z[ht++];while(--nt);ht=g-w,Xt=Et}}}else if(ht+=U-nt,nt<gt){gt-=nt;do Et[g++]=z[ht++];while(--nt);ht=g-w,Xt=Et}for(;gt>2;)Et[g++]=Xt[ht++],Et[g++]=Xt[ht++],Et[g++]=Xt[ht++],gt-=3;gt&&(Et[g++]=Xt[ht++],gt>1&&(Et[g++]=Xt[ht++]))}else{ht=g-w;do Et[g++]=Et[ht++],Et[g++]=Et[ht++],Et[g++]=Et[ht++],gt-=3;while(gt>2);gt&&(Et[g++]=Et[ht++],gt>1&&(Et[g++]=Et[ht++]))}}else if((nt&64)===0){ft=lt[(ft&65535)+(q&(1<<nt)-1)];continue i}else{t.msg="invalid distance code",Tt.mode=qs;break t}break}}else if((nt&64)===0){ft=et[(ft&65535)+(q&(1<<nt)-1)];continue e}else if(nt&32){Tt.mode=L4;break t}else{t.msg="invalid literal/length code",Tt.mode=qs;break t}break}}while(a<l&&g<x);gt=G>>3,a-=gt,G-=gt<<3,q&=(1<<G)-1,t.next_in=a,t.next_out=g,t.avail_in=a<l?5+(l-a):5-(a-l),t.avail_out=g<x?257+(x-g):257-(g-x),Tt.hold=q,Tt.bits=G};const uo=15,Uu=852,Wu=592,$u=0,Qh=1,Gu=2,D4=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),O4=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),N4=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),P4=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),M4=(n,t,e,a,l,g,p,x)=>{const N=x.bits;let b=0,I=0,U=0,z=0,q=0,G=0,et=0,lt=0,it=0,Nt=0,ft,nt,gt,w,ht,Xt=null,Lt=0,Et;const Tt=new Uint16Array(uo+1),ue=new Uint16Array(uo+1);let Qi=null,tn=0,Qn,En,Ve;for(b=0;b<=uo;b++)Tt[b]=0;for(I=0;I<a;I++)Tt[t[e+I]]++;for(q=N,z=uo;z>=1&&Tt[z]===0;z--);if(q>z&&(q=z),z===0)return l[g++]=1<<24|64<<16|0,l[g++]=1<<24|64<<16|0,x.bits=1,0;for(U=1;U<z&&Tt[U]===0;U++);for(q<U&&(q=U),lt=1,b=1;b<=uo;b++)if(lt<<=1,lt-=Tt[b],lt<0)return-1;if(lt>0&&(n===$u||z!==1))return-1;for(ue[1]=0,b=1;b<uo;b++)ue[b+1]=ue[b]+Tt[b];for(I=0;I<a;I++)t[e+I]!==0&&(p[ue[t[e+I]]++]=I);if(n===$u?(Xt=Qi=p,Et=19):n===Qh?(Xt=D4,Lt-=257,Qi=O4,tn-=257,Et=256):(Xt=N4,Qi=P4,Et=-1),Nt=0,I=0,b=U,ht=g,G=q,et=0,gt=-1,it=1<<q,w=it-1,n===Qh&&it>Uu||n===Gu&&it>Wu)return 1;for(;;){Qn=b-et,p[I]<Et?(En=0,Ve=p[I]):p[I]>Et?(En=Qi[tn+p[I]],Ve=Xt[Lt+p[I]]):(En=32+64,Ve=0),ft=1<<b-et,nt=1<<G,U=nt;do nt-=ft,l[ht+(Nt>>et)+nt]=Qn<<24|En<<16|Ve|0;while(nt!==0);for(ft=1<<b-1;Nt&ft;)ft>>=1;if(ft!==0?(Nt&=ft-1,Nt+=ft):Nt=0,I++,--Tt[b]===0){if(b===z)break;b=t[e+p[I]]}if(b>q&&(Nt&w)!==gt){for(et===0&&(et=q),ht+=U,G=b-et,lt=1<<G;G+et<z&&(lt-=Tt[G+et],!(lt<=0));)G++,lt<<=1;if(it+=1<<G,n===Qh&&it>Uu||n===Gu&&it>Wu)return 1;gt=Nt&w,l[gt]=q<<24|G<<16|ht-g|0}}return Nt!==0&&(l[ht+Nt]=b-et<<24|64<<16|0),x.bits=q,0};var va=M4;const B4=0,lw=1,hw=2,{Z_FINISH:Zu,Z_BLOCK:z4,Z_TREES:Hs,Z_OK:Xr,Z_STREAM_END:F4,Z_NEED_DICT:q4,Z_STREAM_ERROR:bi,Z_DATA_ERROR:dw,Z_MEM_ERROR:fw,Z_BUF_ERROR:H4,Z_DEFLATED:Vu}=Da,uw=1,ju=2,Ku=3,Ju=4,Qu=5,tg=6,eg=7,ig=8,ng=9,rg=10,hl=11,kn=12,td=13,og=14,ed=15,ag=16,sg=17,lg=18,hg=19,Us=20,Ws=21,dg=22,fg=23,ug=24,gg=25,wg=26,id=27,cg=28,pg=29,ae=30,gw=31,U4=32,W4=852,$4=592,G4=15,Z4=G4,_g=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function V4(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ww=n=>{if(!n||!n.state)return bi;const t=n.state;return n.total_in=n.total_out=t.total=0,n.msg="",t.wrap&&(n.adler=t.wrap&1),t.mode=uw,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(W4),t.distcode=t.distdyn=new Int32Array($4),t.sane=1,t.back=-1,Xr},cw=n=>{if(!n||!n.state)return bi;const t=n.state;return t.wsize=0,t.whave=0,t.wnext=0,ww(n)},pw=(n,t)=>{let e;if(!n||!n.state)return bi;const a=n.state;return t<0?(e=0,t=-t):(e=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?bi:(a.window!==null&&a.wbits!==t&&(a.window=null),a.wrap=e,a.wbits=t,cw(n))},_w=(n,t)=>{if(!n)return bi;const e=new V4;n.state=e,e.window=null;const a=pw(n,t);return a!==Xr&&(n.state=null),a},j4=n=>_w(n,Z4);let mg=!0,nd,rd;const K4=n=>{if(mg){nd=new Int32Array(512),rd=new Int32Array(32);let t=0;for(;t<144;)n.lens[t++]=8;for(;t<256;)n.lens[t++]=9;for(;t<280;)n.lens[t++]=7;for(;t<288;)n.lens[t++]=8;for(va(lw,n.lens,0,288,nd,0,n.work,{bits:9}),t=0;t<32;)n.lens[t++]=5;va(hw,n.lens,0,32,rd,0,n.work,{bits:5}),mg=!1}n.lencode=nd,n.lenbits=9,n.distcode=rd,n.distbits=5},mw=(n,t,e,a)=>{let l;const g=n.state;return g.window===null&&(g.wsize=1<<g.wbits,g.wnext=0,g.whave=0,g.window=new Uint8Array(g.wsize)),a>=g.wsize?(g.window.set(t.subarray(e-g.wsize,e),0),g.wnext=0,g.whave=g.wsize):(l=g.wsize-g.wnext,l>a&&(l=a),g.window.set(t.subarray(e-a,e-a+l),g.wnext),a-=l,a?(g.window.set(t.subarray(e-a,e),0),g.wnext=a,g.whave=g.wsize):(g.wnext+=l,g.wnext===g.wsize&&(g.wnext=0),g.whave<g.wsize&&(g.whave+=l))),0},J4=(n,t)=>{let e,a,l,g,p,x,N,b,I,U,z,q,G,et,lt=0,it,Nt,ft,nt,gt,w,ht,Xt;const Lt=new Uint8Array(4);let Et,Tt;const ue=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!n||!n.state||!n.output||!n.input&&n.avail_in!==0)return bi;e=n.state,e.mode===kn&&(e.mode=td),p=n.next_out,l=n.output,N=n.avail_out,g=n.next_in,a=n.input,x=n.avail_in,b=e.hold,I=e.bits,U=x,z=N,Xt=Xr;t:for(;;)switch(e.mode){case uw:if(e.wrap===0){e.mode=td;break}for(;I<16;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}if(e.wrap&2&&b===35615){e.check=0,Lt[0]=b&255,Lt[1]=b>>>8&255,e.check=Ae(e.check,Lt,2,0),b=0,I=0,e.mode=ju;break}if(e.flags=0,e.head&&(e.head.done=!1),!(e.wrap&1)||(((b&255)<<8)+(b>>8))%31){n.msg="incorrect header check",e.mode=ae;break}if((b&15)!==Vu){n.msg="unknown compression method",e.mode=ae;break}if(b>>>=4,I-=4,ht=(b&15)+8,e.wbits===0)e.wbits=ht;else if(ht>e.wbits){n.msg="invalid window size",e.mode=ae;break}e.dmax=1<<e.wbits,n.adler=e.check=1,e.mode=b&512?rg:kn,b=0,I=0;break;case ju:for(;I<16;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}if(e.flags=b,(e.flags&255)!==Vu){n.msg="unknown compression method",e.mode=ae;break}if(e.flags&57344){n.msg="unknown header flags set",e.mode=ae;break}e.head&&(e.head.text=b>>8&1),e.flags&512&&(Lt[0]=b&255,Lt[1]=b>>>8&255,e.check=Ae(e.check,Lt,2,0)),b=0,I=0,e.mode=Ku;case Ku:for(;I<32;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}e.head&&(e.head.time=b),e.flags&512&&(Lt[0]=b&255,Lt[1]=b>>>8&255,Lt[2]=b>>>16&255,Lt[3]=b>>>24&255,e.check=Ae(e.check,Lt,4,0)),b=0,I=0,e.mode=Ju;case Ju:for(;I<16;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}e.head&&(e.head.xflags=b&255,e.head.os=b>>8),e.flags&512&&(Lt[0]=b&255,Lt[1]=b>>>8&255,e.check=Ae(e.check,Lt,2,0)),b=0,I=0,e.mode=Qu;case Qu:if(e.flags&1024){for(;I<16;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}e.length=b,e.head&&(e.head.extra_len=b),e.flags&512&&(Lt[0]=b&255,Lt[1]=b>>>8&255,e.check=Ae(e.check,Lt,2,0)),b=0,I=0}else e.head&&(e.head.extra=null);e.mode=tg;case tg:if(e.flags&1024&&(q=e.length,q>x&&(q=x),q&&(e.head&&(ht=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(a.subarray(g,g+q),ht)),e.flags&512&&(e.check=Ae(e.check,a,q,g)),x-=q,g+=q,e.length-=q),e.length))break t;e.length=0,e.mode=eg;case eg:if(e.flags&2048){if(x===0)break t;q=0;do ht=a[g+q++],e.head&&ht&&e.length<65536&&(e.head.name+=String.fromCharCode(ht));while(ht&&q<x);if(e.flags&512&&(e.check=Ae(e.check,a,q,g)),x-=q,g+=q,ht)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=ig;case ig:if(e.flags&4096){if(x===0)break t;q=0;do ht=a[g+q++],e.head&&ht&&e.length<65536&&(e.head.comment+=String.fromCharCode(ht));while(ht&&q<x);if(e.flags&512&&(e.check=Ae(e.check,a,q,g)),x-=q,g+=q,ht)break t}else e.head&&(e.head.comment=null);e.mode=ng;case ng:if(e.flags&512){for(;I<16;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}if(b!==(e.check&65535)){n.msg="header crc mismatch",e.mode=ae;break}b=0,I=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),n.adler=e.check=0,e.mode=kn;break;case rg:for(;I<32;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}n.adler=e.check=_g(b),b=0,I=0,e.mode=hl;case hl:if(e.havedict===0)return n.next_out=p,n.avail_out=N,n.next_in=g,n.avail_in=x,e.hold=b,e.bits=I,q4;n.adler=e.check=1,e.mode=kn;case kn:if(t===z4||t===Hs)break t;case td:if(e.last){b>>>=I&7,I-=I&7,e.mode=id;break}for(;I<3;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}switch(e.last=b&1,b>>>=1,I-=1,b&3){case 0:e.mode=og;break;case 1:if(K4(e),e.mode=Us,t===Hs){b>>>=2,I-=2;break t}break;case 2:e.mode=sg;break;case 3:n.msg="invalid block type",e.mode=ae}b>>>=2,I-=2;break;case og:for(b>>>=I&7,I-=I&7;I<32;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}if((b&65535)!==(b>>>16^65535)){n.msg="invalid stored block lengths",e.mode=ae;break}if(e.length=b&65535,b=0,I=0,e.mode=ed,t===Hs)break t;case ed:e.mode=ag;case ag:if(q=e.length,q){if(q>x&&(q=x),q>N&&(q=N),q===0)break t;l.set(a.subarray(g,g+q),p),x-=q,g+=q,N-=q,p+=q,e.length-=q;break}e.mode=kn;break;case sg:for(;I<14;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}if(e.nlen=(b&31)+257,b>>>=5,I-=5,e.ndist=(b&31)+1,b>>>=5,I-=5,e.ncode=(b&15)+4,b>>>=4,I-=4,e.nlen>286||e.ndist>30){n.msg="too many length or distance symbols",e.mode=ae;break}e.have=0,e.mode=lg;case lg:for(;e.have<e.ncode;){for(;I<3;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}e.lens[ue[e.have++]]=b&7,b>>>=3,I-=3}for(;e.have<19;)e.lens[ue[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,Et={bits:e.lenbits},Xt=va(B4,e.lens,0,19,e.lencode,0,e.work,Et),e.lenbits=Et.bits,Xt){n.msg="invalid code lengths set",e.mode=ae;break}e.have=0,e.mode=hg;case hg:for(;e.have<e.nlen+e.ndist;){for(;lt=e.lencode[b&(1<<e.lenbits)-1],it=lt>>>24,Nt=lt>>>16&255,ft=lt&65535,!(it<=I);){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}if(ft<16)b>>>=it,I-=it,e.lens[e.have++]=ft;else{if(ft===16){for(Tt=it+2;I<Tt;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}if(b>>>=it,I-=it,e.have===0){n.msg="invalid bit length repeat",e.mode=ae;break}ht=e.lens[e.have-1],q=3+(b&3),b>>>=2,I-=2}else if(ft===17){for(Tt=it+3;I<Tt;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}b>>>=it,I-=it,ht=0,q=3+(b&7),b>>>=3,I-=3}else{for(Tt=it+7;I<Tt;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}b>>>=it,I-=it,ht=0,q=11+(b&127),b>>>=7,I-=7}if(e.have+q>e.nlen+e.ndist){n.msg="invalid bit length repeat",e.mode=ae;break}for(;q--;)e.lens[e.have++]=ht}}if(e.mode===ae)break;if(e.lens[256]===0){n.msg="invalid code -- missing end-of-block",e.mode=ae;break}if(e.lenbits=9,Et={bits:e.lenbits},Xt=va(lw,e.lens,0,e.nlen,e.lencode,0,e.work,Et),e.lenbits=Et.bits,Xt){n.msg="invalid literal/lengths set",e.mode=ae;break}if(e.distbits=6,e.distcode=e.distdyn,Et={bits:e.distbits},Xt=va(hw,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,Et),e.distbits=Et.bits,Xt){n.msg="invalid distances set",e.mode=ae;break}if(e.mode=Us,t===Hs)break t;case Us:e.mode=Ws;case Ws:if(x>=6&&N>=258){n.next_out=p,n.avail_out=N,n.next_in=g,n.avail_in=x,e.hold=b,e.bits=I,R4(n,z),p=n.next_out,l=n.output,N=n.avail_out,g=n.next_in,a=n.input,x=n.avail_in,b=e.hold,I=e.bits,e.mode===kn&&(e.back=-1);break}for(e.back=0;lt=e.lencode[b&(1<<e.lenbits)-1],it=lt>>>24,Nt=lt>>>16&255,ft=lt&65535,!(it<=I);){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}if(Nt&&(Nt&240)===0){for(nt=it,gt=Nt,w=ft;lt=e.lencode[w+((b&(1<<nt+gt)-1)>>nt)],it=lt>>>24,Nt=lt>>>16&255,ft=lt&65535,!(nt+it<=I);){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}b>>>=nt,I-=nt,e.back+=nt}if(b>>>=it,I-=it,e.back+=it,e.length=ft,Nt===0){e.mode=wg;break}if(Nt&32){e.back=-1,e.mode=kn;break}if(Nt&64){n.msg="invalid literal/length code",e.mode=ae;break}e.extra=Nt&15,e.mode=dg;case dg:if(e.extra){for(Tt=e.extra;I<Tt;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}e.length+=b&(1<<e.extra)-1,b>>>=e.extra,I-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=fg;case fg:for(;lt=e.distcode[b&(1<<e.distbits)-1],it=lt>>>24,Nt=lt>>>16&255,ft=lt&65535,!(it<=I);){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}if((Nt&240)===0){for(nt=it,gt=Nt,w=ft;lt=e.distcode[w+((b&(1<<nt+gt)-1)>>nt)],it=lt>>>24,Nt=lt>>>16&255,ft=lt&65535,!(nt+it<=I);){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}b>>>=nt,I-=nt,e.back+=nt}if(b>>>=it,I-=it,e.back+=it,Nt&64){n.msg="invalid distance code",e.mode=ae;break}e.offset=ft,e.extra=Nt&15,e.mode=ug;case ug:if(e.extra){for(Tt=e.extra;I<Tt;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}e.offset+=b&(1<<e.extra)-1,b>>>=e.extra,I-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){n.msg="invalid distance too far back",e.mode=ae;break}e.mode=gg;case gg:if(N===0)break t;if(q=z-N,e.offset>q){if(q=e.offset-q,q>e.whave&&e.sane){n.msg="invalid distance too far back",e.mode=ae;break}q>e.wnext?(q-=e.wnext,G=e.wsize-q):G=e.wnext-q,q>e.length&&(q=e.length),et=e.window}else et=l,G=p-e.offset,q=e.length;q>N&&(q=N),N-=q,e.length-=q;do l[p++]=et[G++];while(--q);e.length===0&&(e.mode=Ws);break;case wg:if(N===0)break t;l[p++]=e.length,N--,e.mode=Ws;break;case id:if(e.wrap){for(;I<32;){if(x===0)break t;x--,b|=a[g++]<<I,I+=8}if(z-=N,n.total_out+=z,e.total+=z,z&&(n.adler=e.check=e.flags?Ae(e.check,l,z,p-z):Ea(e.check,l,z,p-z)),z=N,(e.flags?b:_g(b))!==e.check){n.msg="incorrect data check",e.mode=ae;break}b=0,I=0}e.mode=cg;case cg:if(e.wrap&&e.flags){for(;I<32;){if(x===0)break t;x--,b+=a[g++]<<I,I+=8}if(b!==(e.total&4294967295)){n.msg="incorrect length check",e.mode=ae;break}b=0,I=0}e.mode=pg;case pg:Xt=F4;break t;case ae:Xt=dw;break t;case gw:return fw;case U4:default:return bi}return n.next_out=p,n.avail_out=N,n.next_in=g,n.avail_in=x,e.hold=b,e.bits=I,(e.wsize||z!==n.avail_out&&e.mode<ae&&(e.mode<id||t!==Zu))&&mw(n,n.output,n.next_out,z-n.avail_out),U-=n.avail_in,z-=n.avail_out,n.total_in+=U,n.total_out+=z,e.total+=z,e.wrap&&z&&(n.adler=e.check=e.flags?Ae(e.check,l,z,n.next_out-z):Ea(e.check,l,z,n.next_out-z)),n.data_type=e.bits+(e.last?64:0)+(e.mode===kn?128:0)+(e.mode===Us||e.mode===ed?256:0),(U===0&&z===0||t===Zu)&&Xt===Xr&&(Xt=H4),Xt},Q4=n=>{if(!n||!n.state)return bi;let t=n.state;return t.window&&(t.window=null),n.state=null,Xr},tv=(n,t)=>{if(!n||!n.state)return bi;const e=n.state;return(e.wrap&2)===0?bi:(e.head=t,t.done=!1,Xr)},ev=(n,t)=>{const e=t.length;let a,l,g;return!n||!n.state||(a=n.state,a.wrap!==0&&a.mode!==hl)?bi:a.mode===hl&&(l=1,l=Ea(l,t,e,0),l!==a.check)?dw:(g=mw(n,t,e,e),g?(a.mode=gw,fw):(a.havedict=1,Xr))};var iv=cw,nv=pw,rv=ww,ov=j4,av=_w,sv=J4,lv=Q4,hv=tv,dv=ev,fv="pako inflate (from Nodeca project)",xn={inflateReset:iv,inflateReset2:nv,inflateResetKeep:rv,inflateInit:ov,inflateInit2:av,inflate:sv,inflateEnd:lv,inflateGetHeader:hv,inflateSetDictionary:dv,inflateInfo:fv};function uv(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gv=uv;const kw=Object.prototype.toString,{Z_NO_FLUSH:wv,Z_FINISH:cv,Z_OK:Xa,Z_STREAM_END:od,Z_NEED_DICT:ad,Z_STREAM_ERROR:pv,Z_DATA_ERROR:kg,Z_MEM_ERROR:_v}=Da;function Na(n){this.options=wl.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(n&&n.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new aw,this.strm.avail_out=0;let e=xn.inflateInit2(this.strm,t.windowBits);if(e!==Xa)throw new Error(ko[e]);if(this.header=new gv,xn.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Aa.string2buf(t.dictionary):kw.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=xn.inflateSetDictionary(this.strm,t.dictionary),e!==Xa)))throw new Error(ko[e])}Na.prototype.push=function(n,t){const e=this.strm,a=this.options.chunkSize,l=this.options.dictionary;let g,p,x;if(this.ended)return!1;for(t===~~t?p=t:p=t===!0?cv:wv,kw.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(a),e.next_out=0,e.avail_out=a),g=xn.inflate(e,p),g===ad&&l&&(g=xn.inflateSetDictionary(e,l),g===Xa?g=xn.inflate(e,p):g===kg&&(g=ad));e.avail_in>0&&g===od&&e.state.wrap>0&&n[e.next_in]!==0;)xn.inflateReset(e),g=xn.inflate(e,p);switch(g){case pv:case kg:case ad:case _v:return this.onEnd(g),this.ended=!0,!1}if(x=e.avail_out,e.next_out&&(e.avail_out===0||g===od))if(this.options.to==="string"){let N=Aa.utf8border(e.output,e.next_out),b=e.next_out-N,I=Aa.buf2string(e.output,N);e.next_out=b,e.avail_out=a-b,b&&e.output.set(e.output.subarray(N,N+b),0),this.onData(I)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(g===Xa&&x===0)){if(g===od)return g=xn.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};Na.prototype.onData=function(n){this.chunks.push(n)};Na.prototype.onEnd=function(n){n===Xa&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=wl.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function Dd(n,t){const e=new Na(t);if(e.push(n),e.err)throw e.msg||ko[e.err];return e.result}function mv(n,t){return t=t||{},t.raw=!0,Dd(n,t)}var kv=Na,vv=Dd,bv=mv,yv=Dd,xv=Da,Sv={Inflate:kv,inflate:vv,inflateRaw:bv,ungzip:yv,constants:xv};const{Inflate:Pb,inflate:Cv,inflateRaw:Mb,ungzip:Bb}=Sv;var Iv=Cv;class Ev{constructor(t){this.game=t,this.app=this.game.app,this.overlays=this.game.overlays,this.info=this.game.info,this.map=this.game.map,this.camera=this.game.camera,this.renderer=this.game.renderer,this.input=this.game.input,this.socket=this.game.socket,this.pointer=this.game.pointer,this.audio=this.game.audio,this.entities=this.game.entities,this.bubble=this.game.bubble,this.menu=this.game.menu,this.sprites=this.game.sprites,this.messages=this.socket.messages,this.messages.onHandshake(this.handleHandshake.bind(this)),this.messages.onWelcome(this.handleWelcome.bind(this)),this.messages.onMap(this.handleMap.bind(this)),this.messages.onEquipment(this.handleEquipment.bind(this)),this.messages.onSpawn(this.entities.create.bind(this.entities)),this.messages.onEntityList(this.handleEntityList.bind(this)),this.messages.onSync(this.handleSync.bind(this)),this.messages.onMovement(this.handleMovement.bind(this)),this.messages.onTeleport(this.handleTeleport.bind(this)),this.messages.onDespawn(this.handleDespawn.bind(this)),this.messages.onCombat(this.handleCombat.bind(this)),this.messages.onAnimation(this.handleAnimation.bind(this)),this.messages.onPoints(this.handlePoints.bind(this)),this.messages.onNetwork(this.handleNetwork.bind(this)),this.messages.onChat(this.handleChat.bind(this)),this.messages.onCommand(this.handleCommand.bind(this)),this.messages.onContainer(this.handleContainer.bind(this)),this.messages.onAbility(this.handleAbility.bind(this)),this.messages.onQuest(this.handleQuest.bind(this)),this.messages.onAchievement(this.handleAchievement.bind(this)),this.messages.onNotification(this.handleNotification.bind(this)),this.messages.onBlink(this.handleBlink.bind(this)),this.messages.onHeal(this.handleHeal.bind(this)),this.messages.onExperience(this.handleExperience.bind(this)),this.messages.onDeath(this.handleDeath.bind(this)),this.messages.onAudio(this.handleAudio.bind(this)),this.messages.onNPC(this.handleNPC.bind(this)),this.messages.onRespawn(this.handleRespawn.bind(this)),this.messages.onEnchant(this.handleEnchant.bind(this)),this.messages.onGuild(this.handleGuild.bind(this)),this.messages.onPointer(this.handlePointer.bind(this)),this.messages.onPVP(this.handlePVP.bind(this)),this.messages.onStore(this.handleStore.bind(this)),this.messages.onOverlay(this.handleOverlay.bind(this)),this.messages.onCamera(this.handleCamera.bind(this)),this.messages.onBubble(this.handleBubble.bind(this)),this.messages.onSkill(this.handleSkill.bind(this)),this.messages.onUpdate(this.handleUpdate.bind(this))}handleHandshake(){if(this.app.updateLoader("Connecting to server"),this.app.isGuest())return this.socket.send(dt.Login,{opcode:Gs.Guest});let t=this.app.getUsername(),e=this.app.getPassword(),a=this.app.getEmail();if(this.app.isRegistering())return this.socket.send(dt.Login,{opcode:Gs.Register,username:t,password:e,email:a});this.socket.send(dt.Login,{opcode:Gs.Login,username:t,password:e})}handleWelcome(t){this.game.player.load(t),this.game.start(),this.game.postLoad()}handleMap(t){let e=window.atob(t).split("").map(g=>g.charCodeAt(0)),a=Iv(new Uint8Array(e),{to:"string"}),l=JSON.parse(a);this.map.loadRegions(l),this.renderer.forceRendering=!0,this.renderer.updateAnimatedTiles()}handleEquipment(t,e){switch(t){case _a.Batch:vt.each(e.data.equipments,a=>this.game.player.equip(a));break;case _a.Equip:this.game.player.equip(e.data);break;case _a.Unequip:this.game.player.unequip(e.type);break}this.game.player.sync()}handleEntityList(t){let e=vt.map(this.entities.getAll(),"instance"),a=vt.intersection(e,t),l=vt.difference(t,a);this.entities.decrepit=vt.reject(this.entities.getAll(),g=>vt.includes(a,g.instance)||g.instance===this.game.player.instance),this.entities.clean(),this.socket.send(dt.Who,l)}handleSync(t){let e=this.entities.get(t.instance);!e||(e.load(t),e.setSprite(this.game.sprites.get(e.getSpriteName())))}handleMovement(t,e){let a=this.entities.get(e.instance),l;if(!!a)switch(t){case gi.Move:e.forced&&a.stop(!0),a.go(e.x,e.y);break;case gi.Follow:l=this.entities.get(e.target),l&&a.follow(l);break;case gi.Stop:e.forced&&a.stop(!0);break;case gi.Freeze:e.state&&a.stop(!1),a.frozen=!!e.state;break;case gi.Stunned:e.state&&a.stop(!1),a.stunned=!!e.state;break;case gi.Orientate:a.performAction(e.orientation,ni.Orientate);break}}handleTeleport(t){let e=this.entities.get(t.instance);if(!e)return;let a=e.instance===this.game.player.instance;if(e.stop(!0),e.frozen=!0,a?this.bubble.clean():this.bubble.clear(e.instance),!t.withAnimation)return this.game.teleport(e,t.x,t.y);let l=e.sprite;e.teleporting=!0,e.setSprite(this.sprites.getDeath()),e.animateDeath(()=>{this.game.teleport(e,t.x,t.y),e.animation=null,e.setSprite(l),e.idle(),e.teleporting=!1},240)}handleDespawn(t){let e=this.entities.get(t);if(!!e){if(e.isItem())return this.entities.removeItem(e);if(e.isChest())return this.entities.removeChest(e);e.despawn(),this.bubble.clear(e.instance),this.game.player.hasTarget(e)&&this.game.player.removeTarget(),this.game.player.getDistance(e)<=7&&this.audio.playKill(),e.sprite.hasDeathAnimation||e.setSprite(this.sprites.getDeath()),e.animateDeath(()=>this.entities.removeEntity(e))}}handleCombat(t,e){let a=this.entities.get(e.instance),l=this.entities.get(e.target);if(!a||!l||t!==Rg.Hit)return;let g=l.instance===this.game.player.instance,p=a.instance===this.game.player.instance;e.hit.terror&&(l.terror=!0),e.hit.type===Xe.Critical&&(l.critical=!0),!e.hit.aoe&&!e.hit.poison&&(a.lookAt(l),a.performAction(a.orientation,ni.Attack)),p&&e.hit.damage>0&&this.audio.playHit(),g&&e.hit.damage>0&&this.audio.playHurt(),this.info.create(e.hit.type,e.hit.damage,l.x,l.y,g),l.hurtSprite&&l.toggleHurt(),a.triggerHealthBar(),l.triggerHealthBar()}handleAnimation(t){let e=this.entities.get(t.instance);!e||e.performAction(e.orientation,t.action)}handlePoints(t){var a,l;let e=this.entities.get(t.instance);!e||(t.mana&&e.setMana(t.mana,t.maxMana),t.hitPoints&&(e.setHitPoints(t.hitPoints,t.maxHitPoints),(l=(a=this.input.hud).updateCallback)==null||l.call(a,t.instance,t.hitPoints)))}handleNetwork(){this.socket.send(dt.Network,[Og.Pong])}handleChat(t){if(t.source)return this.input.chatHandler.add(t.source,t.message,t.colour,!0);let e=this.entities.get(t.instance);!e||(this.input.chatHandler.add(e.name,t.message,t.colour),t.withBubble&&(this.bubble.create(t.instance,t.message),this.bubble.setTo(t.instance,e.x,e.y),this.audio.play(Zi.SFX,"npctalk")))}handleCommand(t){switch(t.command){case"debug":this.renderer.debugging=!this.renderer.debugging;return;case"toggleheal":this.game.player.healing=!0;break;case"toggleterror":this.game.player.terror=!0;break}}handleContainer(t,e){let a=e.type===Er.Inventory?this.menu.getInventory():this.menu.getBank();switch(t){case Cn.Batch:return a.batch(e.data.slots);case Cn.Add:a.add(e.slot);break;case Cn.Remove:a.remove(e.slot);break}this.menu.synchronize()}handleAbility(){se.debug("Unhandled ability packet.")}handleQuest(t,e){switch(t){case fd.Batch:this.game.player.loadQuests(e.quests);break;case fd.Progress:this.game.player.setQuest(e.key,e.stage,e.subStage);break}this.menu.synchronize()}handleAchievement(t,e){switch(t){case ud.Batch:this.game.player.loadAchievements(e.achievements);break;case ud.Progress:this.game.player.setAchievement(e.key,e.stage,e.name);break}this.menu.synchronize()}handleNotification(t,e){switch(t){case gd.Text:return this.input.chatHandler.add("WORLD",e.message,e.colour,!0);case gd.Popup:return this.menu.getNotification().show(e.title,e.message,e.colour)}}handleBlink(t){let e=this.entities.get(t);e==null||e.blink()}handleHeal(t){let e=this.entities.get(t.instance);if(!!e){switch(t.type){case"health":this.info.create(Xe.Heal,t.amount,e.x,e.y),this.game.player.healing=!0;break;case"mana":this.info.create(Xe.Mana,t.amount,e.x,e.y);break}e.triggerHealthBar()}}handleExperience(t,e){let a=this.entities.get(e.instance);if(!a)return;let l=a.instance===this.game.player.instance;switch(t){case wd.Combat:{a.level!==e.level&&(a.level=e.level,this.info.create(Xe.LevelUp,0,a.x,a.y)),console.log(e),l&&(this.game.player.setExperience(e.experience,e.nextExperience,e.prevExperience),this.info.create(Xe.Experience,e.amount,a.x,a.y));break}case wd.Skill:l&&this.info.create(Xe.Profession,e.amount,a.x,a.y);break}}handleDeath(){this.audio.stop(),this.game.player.despawn(),this.app.body.classList.add("death")}handleAudio(t){mo()||(this.audio.newSong=t,this.audio.update())}handleNPC(t,e){let a,l;switch(t){case Zs.Talk:if(a=this.entities.get(e.instance),!a)return;if(l=e.text?"npc":"npc-end",this.audio.play(Zi.SFX,l),this.game.player.disableAction=!0,!e.text)return this.bubble.clear(a.instance);this.bubble.create(a.instance,e.text),this.bubble.setTo(a.instance,a.x,a.y);break;case Zs.Bank:return this.menu.getBank().show(e.slots);case Zs.Enchant:break}}handleRespawn(t){this.game.player.setGridPosition(t.x,t.y),this.entities.registerPosition(this.game.player),this.camera.centreOn(this.game.player),this.game.player.animation=null,this.game.player.setSprite(this.game.sprites.get(this.game.player.getSpriteName())),this.game.player.idle(),this.entities.addEntity(this.game.player),this.game.player.dead=!1}handleEnchant(t,e){switch(t){case cd.Select:break;case cd.Remove:break}}handleGuild(t){se.debug(`Guild Opcode: ${t}`)}handlePointer(t,e){let a;switch(t){case ri.Entity:if(a=this.entities.get(e.instance),!a)return;this.pointer.create(a.instance,t),this.pointer.setToEntity(a);break;case ri.Location:this.pointer.create(e.instance,t),this.pointer.setToPosition(e.instance,e.x*16,e.y*16);break;case ri.Relative:this.pointer.create(e.instance,t),this.pointer.setRelative(e.instance,e.x,e.y);break;case ri.Remove:this.pointer.clean();break;case ri.Button:this.pointer.create(e.instance,t,e.button);break}}handlePVP(t,e){if(t===this.game.player.instance){this.game.pvp=e;return}let a=this.entities.get(t);a&&(a.pvp=e)}handleStore(t,e){switch(t){case Ir.Open:return this.menu.getStore().show(e);case Ir.Update:return this.menu.getStore().update(e);case Ir.Select:return this.menu.getStore().move(e)}}handleOverlay(t,e){switch(console.log(`Overlay Opcode: ${t}`),console.log(e),t){case Vs.Set:this.overlays.update(e.image),this.renderer.updateDarkMask(e.colour);break;case Vs.Remove:this.renderer.removeAllLights(),this.overlays.update();break;case Vs.Lamp:return this.renderer.addLight(e.light)}}handleCamera(t){}handleBubble(t){if(!t.text)return this.bubble.clear(t.instance);this.bubble.create(t.instance,t.text,t.duration),this.bubble.setTo(t.instance,t.x,t.y)}handleSkill(t,e){switch(t){case pd.Batch:this.game.player.loadSkills(e.skills);break;case pd.Update:this.game.player.setSkill(e);break}this.game.menu.synchronize()}handleUpdate(t){this.entities.cleanDisplayInfo(),vt.each(t,e=>{let a=this.entities.get(e.instance);!a||(e.colour&&(a.nameColour=e.colour),e.scale&&(a.customScale=e.scale))})}}var Tv=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Av=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],yd=function(t){var e=t,a=t.indexOf("["),l=t.indexOf("]");a!=-1&&l!=-1&&(t=t.substring(0,a)+t.substring(a,l).replace(/:/g,";")+t.substring(l,t.length));for(var g=Tv.exec(t||""),p={},x=14;x--;)p[Av[x]]=g[x]||"";return a!=-1&&l!=-1&&(p.source=e,p.host=p.host.substring(1,p.host.length-1).replace(/;/g,":"),p.authority=p.authority.replace("[","").replace("]","").replace(/;/g,":"),p.ipv6uri=!0),p.pathNames=Xv(p,p.path),p.queryKey=Yv(p,p.query),p};function Xv(n,t){var e=/\/{2,9}/g,a=t.replace(e,"/").split("/");return(t.substr(0,1)=="/"||t.length===0)&&a.splice(0,1),t.substr(t.length-1,1)=="/"&&a.splice(a.length-1,1),a}function Yv(n,t){var e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,l,g){l&&(e[l]=g)}),e}function Lv(n,t="",e){let a=n;e=e||typeof location!="undefined"&&location,n==null&&(n=e.protocol+"//"+e.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=e.protocol+n:n=e.host+n),/^(https?|wss?):\/\//.test(n)||(typeof e!="undefined"?n=e.protocol+"//"+n:n="https://"+n),a=yd(n)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const g=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+g+":"+a.port+t,a.href=a.protocol+"://"+g+(e&&e.port===a.port?"":":"+a.port),a}var xd={exports:{}};try{xd.exports=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{xd.exports=!1}var Rv=xd.exports,Zn=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function vw(n){const t=n.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!t||Rv))return new XMLHttpRequest}catch{}if(!t)try{return new Zn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function bw(n,...t){return t.reduce((e,a)=>(n.hasOwnProperty(a)&&(e[a]=n[a]),e),{})}const Dv=setTimeout,Ov=clearTimeout;function cl(n,t){t.useNativeTimers?(n.setTimeoutFn=Dv.bind(Zn),n.clearTimeoutFn=Ov.bind(Zn)):(n.setTimeoutFn=setTimeout.bind(Zn),n.clearTimeoutFn=clearTimeout.bind(Zn))}var yo=Ze;function Ze(n){if(n)return Nv(n)}function Nv(n){for(var t in Ze.prototype)n[t]=Ze.prototype[t];return n}Ze.prototype.on=Ze.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(t),this};Ze.prototype.once=function(n,t){function e(){this.off(n,e),t.apply(this,arguments)}return e.fn=t,this.on(n,e),this};Ze.prototype.off=Ze.prototype.removeListener=Ze.prototype.removeAllListeners=Ze.prototype.removeEventListener=function(n,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+n];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var a,l=0;l<e.length;l++)if(a=e[l],a===t||a.fn===t){e.splice(l,1);break}return e.length===0&&delete this._callbacks["$"+n],this};Ze.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+n],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(e){e=e.slice(0);for(var a=0,l=e.length;a<l;++a)e[a].apply(this,t)}return this};Ze.prototype.emitReserved=Ze.prototype.emit;Ze.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};Ze.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Ji=Object.create(null);Ji.open="0";Ji.close="1";Ji.ping="2";Ji.pong="3";Ji.message="4";Ji.upgrade="5";Ji.noop="6";const tl=Object.create(null);Object.keys(Ji).forEach(n=>{tl[Ji[n]]=n});const Pv={type:"error",data:"parser error"},Mv=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Bv=typeof ArrayBuffer=="function",zv=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,yw=({type:n,data:t},e,a)=>Mv&&t instanceof Blob?e?a(t):vg(t,a):Bv&&(t instanceof ArrayBuffer||zv(t))?e?a(t):vg(new Blob([t]),a):a(Ji[n]+(t||"")),vg=(n,t)=>{const e=new FileReader;return e.onload=function(){const a=e.result.split(",")[1];t("b"+a)},e.readAsDataURL(n)};var bg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ca=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(var $s=0;$s<bg.length;$s++)ca[bg.charCodeAt($s)]=$s;var Fv=function(n){var t=n.length*.75,e=n.length,a,l=0,g,p,x,N;n[n.length-1]==="="&&(t--,n[n.length-2]==="="&&t--);var b=new ArrayBuffer(t),I=new Uint8Array(b);for(a=0;a<e;a+=4)g=ca[n.charCodeAt(a)],p=ca[n.charCodeAt(a+1)],x=ca[n.charCodeAt(a+2)],N=ca[n.charCodeAt(a+3)],I[l++]=g<<2|p>>4,I[l++]=(p&15)<<4|x>>2,I[l++]=(x&3)<<6|N&63;return b};const qv=typeof ArrayBuffer=="function",xw=(n,t)=>{if(typeof n!="string")return{type:"message",data:Sw(n,t)};const e=n.charAt(0);return e==="b"?{type:"message",data:Hv(n.substring(1),t)}:tl[e]?n.length>1?{type:tl[e],data:n.substring(1)}:{type:tl[e]}:Pv},Hv=(n,t)=>{if(qv){const e=Fv(n);return Sw(e,t)}else return{base64:!0,data:n}},Sw=(n,t)=>{switch(t){case"blob":return n instanceof ArrayBuffer?new Blob([n]):n;case"arraybuffer":default:return n}},Cw=String.fromCharCode(30),Uv=(n,t)=>{const e=n.length,a=new Array(e);let l=0;n.forEach((g,p)=>{yw(g,!1,x=>{a[p]=x,++l===e&&t(a.join(Cw))})})},Wv=(n,t)=>{const e=n.split(Cw),a=[];for(let l=0;l<e.length;l++){const g=xw(e[l],t);if(a.push(g),g.type==="error")break}return a},Iw=4;class Ew extends yo{constructor(t){super();this.writable=!1,cl(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e){const a=new Error(t);return a.type="TransportError",a.description=e,super.emit("error",a),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(t){const e=xw(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emit("packet",t)}onClose(){this.readyState="closed",super.emit("close")}}var Tw="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),dl=64,Aw={},yg=0,Vn=0,xg;function Sd(n){var t="";do t=Tw[n%dl]+t,n=Math.floor(n/dl);while(n>0);return t}function $v(n){var t=0;for(Vn=0;Vn<n.length;Vn++)t=t*dl+Aw[n.charAt(Vn)];return t}function Od(){var n=Sd(+new Date);return n!==xg?(yg=0,xg=n):n+"."+Sd(yg++)}for(;Vn<dl;Vn++)Aw[Tw[Vn]]=Vn;Od.encode=Sd;Od.decode=$v;var Xw=Od,Pa={};Pa.encode=function(n){var t="";for(var e in n)n.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(n[e]));return t};Pa.decode=function(n){for(var t={},e=n.split("&"),a=0,l=e.length;a<l;a++){var g=e[a].split("=");t[decodeURIComponent(g[0])]=decodeURIComponent(g[1])}return t};class Gv extends Ew{constructor(){super(...arguments);this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let a=0;this.polling&&(a++,this.once("pollComplete",function(){--a||e()})),this.writable||(a++,this.once("drain",function(){--a||e()}))}else e()}poll(){this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){const e=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose(),!1;this.onPacket(a)};Wv(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Uv(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emit("drain")})})}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let a="";this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Xw()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.opts.port&&(e==="https"&&Number(this.opts.port)!==443||e==="http"&&Number(this.opts.port)!==80)&&(a=":"+this.opts.port);const l=Pa.encode(t),g=this.opts.hostname.indexOf(":")!==-1;return e+"://"+(g?"["+this.opts.hostname+"]":this.opts.hostname)+a+this.opts.path+(l.length?"?"+l:"")}}function Zv(){}const Vv=function(){return new vw({xdomain:!1}).responseType!=null}();class jv extends Gv{constructor(t){super(t);if(typeof location!="undefined"){const a=location.protocol==="https:";let l=location.port;l||(l=a?"443":"80"),this.xd=typeof location!="undefined"&&t.hostname!==location.hostname||l!==t.port,this.xs=t.secure!==a}const e=t&&t.forceBase64;this.supportsBinary=Vv&&!e}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new Ki(this.uri(),t)}doWrite(t,e){const a=this.request({method:"POST",data:t});a.on("success",e),a.on("error",l=>{this.onError("xhr post error",l)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",e=>{this.onError("xhr poll error",e)}),this.pollXhr=t}}class Ki extends yo{constructor(t,e){super();cl(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=e.async!==!1,this.data=e.data!==void 0?e.data:null,this.create()}create(){const t=bw(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new vw(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let a in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(a)&&e.setRequestHeader(a,this.opts.extraHeaders[a])}}catch{}if(this.method==="POST")try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{e.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{e.readyState===4&&(e.status===200||e.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof e.status=="number"?e.status:0)},0))},e.send(this.data)}catch(a){this.setTimeoutFn(()=>{this.onError(a)},0);return}typeof document!="undefined"&&(this.index=Ki.requestsCount++,Ki.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(t){this.emit("data",t),this.onSuccess()}onError(t){this.emit("error",t),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=Zv,t)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete Ki.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&this.onData(t)}abort(){this.cleanup()}}Ki.requestsCount=0;Ki.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",Sg);else if(typeof addEventListener=="function"){const n="onpagehide"in Zn?"pagehide":"unload";addEventListener(n,Sg,!1)}}function Sg(){for(let n in Ki.requests)Ki.requests.hasOwnProperty(n)&&Ki.requests[n].abort()}const Kv=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0))(),da=Zn.WebSocket||Zn.MozWebSocket,Cg=!0,Jv="arraybuffer",Ig=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Nd extends Ew{constructor(t){super(t);this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,a=Ig?{}:bw(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=Cg&&!Ig?e?new da(t,e):new da(t):new da(t,e,a)}catch(l){return this.emit("error",l)}this.ws.binaryType=this.socket.binaryType||Jv,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const a=t[e],l=e===t.length-1;yw(a,this.supportsBinary,g=>{const p={};try{Cg&&this.ws.send(g)}catch{}l&&Kv(()=>{this.writable=!0,this.emit("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let a="";this.opts.port&&(e==="wss"&&Number(this.opts.port)!==443||e==="ws"&&Number(this.opts.port)!==80)&&(a=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=Xw()),this.supportsBinary||(t.b64=1);const l=Pa.encode(t),g=this.opts.hostname.indexOf(":")!==-1;return e+"://"+(g?"["+this.opts.hostname+"]":this.opts.hostname)+a+this.opts.path+(l.length?"?"+l:"")}check(){return!!da&&!("__initialize"in da&&this.name===Nd.prototype.name)}}const Qv={websocket:Nd,polling:jv};class Sn extends yo{constructor(t,e={}){super();t&&typeof t=="object"&&(e=t,t=null),t?(t=yd(t),e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=yd(e.host).host),cl(this,e),this.secure=e.secure!=null?e.secure:typeof location!="undefined"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=e.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=Pa.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=tb(this.opts.query);e.EIO=Iw,e.transport=t,this.id&&(e.sid=this.id);const a=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Qv[t](a)}open(){let t;if(this.opts.rememberUpgrade&&Sn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(t){let e=this.createTransport(t),a=!1;Sn.priorWebsocketSuccess=!1;const l=()=>{a||(e.send([{type:"ping",data:"probe"}]),e.once("packet",U=>{if(!a)if(U.type==="pong"&&U.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Sn.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(I(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const z=new Error("probe error");z.transport=e.name,this.emitReserved("upgradeError",z)}}))};function g(){a||(a=!0,I(),e.close(),e=null)}const p=U=>{const z=new Error("probe error: "+U);z.transport=e.name,g(),this.emitReserved("upgradeError",z)};function x(){p("transport closed")}function N(){p("socket closed")}function b(U){e&&U.name!==e.name&&g()}const I=()=>{e.removeListener("open",l),e.removeListener("error",p),e.removeListener("close",x),this.off("close",N),this.off("upgrading",b)};e.once("open",l),e.once("error",p),e.once("close",x),this.once("close",N),this.once("upgrading",b),e.open()}onOpen(){if(this.readyState="open",Sn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(t,e,a){return this.sendPacket("message",t,e,a),this}send(t,e,a){return this.sendPacket("message",t,e,a),this}sendPacket(t,e,a,l){if(typeof e=="function"&&(l=e,e=void 0),typeof a=="function"&&(l=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const g={type:t,data:e,options:a};this.emitReserved("packetCreate",g),this.writeBuffer.push(g),l&&this.once("flush",l),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},a=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():t()}):this.upgrading?a():t()),this}onError(t){Sn.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let a=0;const l=t.length;for(;a<l;a++)~this.transports.indexOf(t[a])&&e.push(t[a]);return e}}Sn.protocol=Iw;function tb(n){const t={};for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}Sn.protocol;const eb=typeof ArrayBuffer=="function",ib=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,Yw=Object.prototype.toString,nb=typeof Blob=="function"||typeof Blob!="undefined"&&Yw.call(Blob)==="[object BlobConstructor]",rb=typeof File=="function"||typeof File!="undefined"&&Yw.call(File)==="[object FileConstructor]";function Pd(n){return eb&&(n instanceof ArrayBuffer||ib(n))||nb&&n instanceof Blob||rb&&n instanceof File}function el(n,t){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let e=0,a=n.length;e<a;e++)if(el(n[e]))return!0;return!1}if(Pd(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return el(n.toJSON(),!0);for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&el(n[e]))return!0;return!1}function ob(n){const t=[],e=n.data,a=n;return a.data=Cd(e,t),a.attachments=t.length,{packet:a,buffers:t}}function Cd(n,t){if(!n)return n;if(Pd(n)){const e={_placeholder:!0,num:t.length};return t.push(n),e}else if(Array.isArray(n)){const e=new Array(n.length);for(let a=0;a<n.length;a++)e[a]=Cd(n[a],t);return e}else if(typeof n=="object"&&!(n instanceof Date)){const e={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=Cd(n[a],t));return e}return n}function ab(n,t){return n.data=Id(n.data,t),n.attachments=void 0,n}function Id(n,t){if(!n)return n;if(n&&n._placeholder)return t[n.num];if(Array.isArray(n))for(let e=0;e<n.length;e++)n[e]=Id(n[e],t);else if(typeof n=="object")for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(n[e]=Id(n[e],t));return n}const sb=5;var Ht;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(Ht||(Ht={}));class lb{encode(t){return(t.type===Ht.EVENT||t.type===Ht.ACK)&&el(t)?(t.type=t.type===Ht.EVENT?Ht.BINARY_EVENT:Ht.BINARY_ACK,this.encodeAsBinary(t)):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===Ht.BINARY_EVENT||t.type===Ht.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data)),e}encodeAsBinary(t){const e=ob(t),a=this.encodeAsString(e.packet),l=e.buffers;return l.unshift(a),l}}class Md extends yo{constructor(){super()}add(t){let e;if(typeof t=="string")e=this.decodeString(t),e.type===Ht.BINARY_EVENT||e.type===Ht.BINARY_ACK?(this.reconstructor=new db(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e);else if(Pd(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const a={type:Number(t.charAt(0))};if(Ht[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===Ht.BINARY_EVENT||a.type===Ht.BINARY_ACK){const g=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const p=t.substring(g,e);if(p!=Number(p)||t.charAt(e)!=="-")throw new Error("Illegal attachments");a.attachments=Number(p)}if(t.charAt(e+1)==="/"){const g=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););a.nsp=t.substring(g,e)}else a.nsp="/";const l=t.charAt(e+1);if(l!==""&&Number(l)==l){const g=e+1;for(;++e;){const p=t.charAt(e);if(p==null||Number(p)!=p){--e;break}if(e===t.length)break}a.id=Number(t.substring(g,e+1))}if(t.charAt(++e)){const g=hb(t.substr(e));if(Md.isPayloadValid(a.type,g))a.data=g;else throw new Error("invalid payload")}return a}static isPayloadValid(t,e){switch(t){case Ht.CONNECT:return typeof e=="object";case Ht.DISCONNECT:return e===void 0;case Ht.CONNECT_ERROR:return typeof e=="string"||typeof e=="object";case Ht.EVENT:case Ht.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case Ht.ACK:case Ht.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}function hb(n){try{return JSON.parse(n)}catch{return!1}}class db{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=ab(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var fb=Object.freeze(Object.defineProperty({__proto__:null,protocol:sb,get PacketType(){return Ht},Encoder:lb,Decoder:Md},Symbol.toStringTag,{value:"Module"}));function Di(n,t,e){return n.on(t,e),function(){n.off(t,e)}}const ub=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Lw extends yo{constructor(t,e,a){super();this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,a&&a.auth&&(this.auth=a.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Di(t,"open",this.onopen.bind(this)),Di(t,"packet",this.onpacket.bind(this)),Di(t,"error",this.onerror.bind(this)),Di(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(ub.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const a={type:Ht.EVENT,data:e};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const p=this.ids++,x=e.pop();this._registerAckCallback(p,x),a.id=p}const l=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!l||!this.connected)||(this.connected?this.packet(a):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(t,e){const a=this.flags.timeout;if(a===void 0){this.acks[t]=e;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let g=0;g<this.sendBuffer.length;g++)this.sendBuffer[g].id===t&&this.sendBuffer.splice(g,1);e.call(this,new Error("operation has timed out"))},a);this.acks[t]=(...g)=>{this.io.clearTimeoutFn(l),e.apply(this,[null,...g])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this.packet({type:Ht.CONNECT,data:t})}):this.packet({type:Ht.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Ht.CONNECT:if(t.data&&t.data.sid){const l=t.data.sid;this.onconnect(l)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ht.EVENT:this.onevent(t);break;case Ht.BINARY_EVENT:this.onevent(t);break;case Ht.ACK:this.onack(t);break;case Ht.BINARY_ACK:this.onack(t);break;case Ht.DISCONNECT:this.ondisconnect();break;case Ht.CONNECT_ERROR:this.destroy();const a=new Error(t.data.message);a.data=t.data.data,this.emitReserved("connect_error",a);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const a of e)a.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let a=!1;return function(...l){a||(a=!0,e.packet({type:Ht.ACK,id:t,data:l}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>this.packet(t)),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ht.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let a=0;a<e.length;a++)if(t===e[a])return e.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}var gb=xo;function xo(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}xo.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*n);n=(Math.floor(t*10)&1)==0?n-e:n+e}return Math.min(n,this.max)|0};xo.prototype.reset=function(){this.attempts=0};xo.prototype.setMin=function(n){this.ms=n};xo.prototype.setMax=function(n){this.max=n};xo.prototype.setJitter=function(n){this.jitter=n};class Ed extends yo{constructor(t,e){var a;super();this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,cl(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((a=e.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new gb({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const l=e.parser||fb;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Sn(this.uri,this.opts);const e=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const l=Di(e,"open",function(){a.onopen(),t&&t()}),g=Di(e,"error",p=>{a.cleanup(),a._readyState="closed",this.emitReserved("error",p),t?t(p):a.maybeReconnectOnOpen()});if(this._timeout!==!1){const p=this._timeout;p===0&&l();const x=this.setTimeoutFn(()=>{l(),e.close(),e.emit("error",new Error("timeout"))},p);this.opts.autoUnref&&x.unref(),this.subs.push(function(){clearTimeout(x)})}return this.subs.push(l),this.subs.push(g),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Di(t,"ping",this.onping.bind(this)),Di(t,"data",this.ondata.bind(this)),Di(t,"error",this.onerror.bind(this)),Di(t,"close",this.onclose.bind(this)),Di(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,e){let a=this.nsps[t];return a||(a=new Lw(this,t,e),this.nsps[t]=a),a}_destroy(t){const e=Object.keys(this.nsps);for(const a of e)if(this.nsps[a].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let a=0;a<e.length;a++)this.engine.write(e[a],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(l=>{l?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",l)):t.onreconnect()}))},e);this.opts.autoUnref&&a.unref(),this.subs.push(function(){clearTimeout(a)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const fa={};function il(n,t){typeof n=="object"&&(t=n,n=void 0),t=t||{};const e=Lv(n,t.path||"/socket.io"),a=e.source,l=e.id,g=e.path,p=fa[l]&&g in fa[l].nsps,x=t.forceNew||t["force new connection"]||t.multiplex===!1||p;let N;return x?N=new Ed(a,t):(fa[l]||(fa[l]=new Ed(a,t)),N=fa[l]),e.query&&!t.query&&(t.query=e.queryKey),N.socket(e.path,t)}Object.assign(il,{Manager:Ed,Socket:Lw,io:il,connect:il});class wb{constructor(t){this.game=t,this.app=this.game.app;let e=[];e[dt.Handshake]=()=>this.handshakeCallback,e[dt.Welcome]=()=>this.welcomeCallback,e[dt.Spawn]=()=>this.spawnCallback,e[dt.Equipment]=()=>this.equipmentCallback,e[dt.List]=()=>this.entityListCallback,e[dt.Sync]=()=>this.syncCallback,e[dt.Movement]=()=>this.movementCallback,e[dt.Teleport]=()=>this.teleportCallback,e[dt.Despawn]=()=>this.despawnCallback,e[dt.Combat]=()=>this.combatCallback,e[dt.Animation]=()=>this.animationCallback,e[dt.Points]=()=>this.pointsCallback,e[dt.Network]=()=>this.networkCallback,e[dt.Chat]=()=>this.chatCallback,e[dt.Command]=()=>this.commandCallback,e[dt.Container]=()=>this.containerCallback,e[dt.Ability]=()=>this.abilityCallback,e[dt.Quest]=()=>this.questCallback,e[dt.Achievement]=()=>this.achievementCallback,e[dt.Notification]=()=>this.notificationCallback,e[dt.Blink]=()=>this.blinkCallback,e[dt.Heal]=()=>this.healCallback,e[dt.Experience]=()=>this.experienceCallback,e[dt.Death]=()=>this.deathCallback,e[dt.Audio]=()=>this.audioCallback,e[dt.NPC]=()=>this.npcCallback,e[dt.Respawn]=()=>this.respawnCallback,e[dt.Enchant]=()=>this.enchantCallback,e[dt.Guild]=()=>this.guildCallback,e[dt.Pointer]=()=>this.pointerCallback,e[dt.PVP]=()=>this.pvpCallback,e[dt.Store]=()=>this.storeCallback,e[dt.Map]=()=>this.mapCallback,e[dt.Overlay]=()=>this.overlayCallback,e[dt.Camera]=()=>this.cameraCallback,e[dt.Bubble]=()=>this.bubbleCallback,e[dt.Skill]=()=>this.skillCallback,e[dt.Update]=()=>this.updateCallback,this.messages=e}handleData(t){let e=t.shift(),a=this.messages[e]();a&&vt.isFunction(a)&&a.call(this,...t)}handleBulkData(t){vt.each(t,this.handleData.bind(this))}handleUTF8(t){switch(this.app.toggleLogin(!1),t){case"full":this.app.sendError("The servers are currently full!");break;case"error":this.app.sendError("The server has responded with an error!");break;case"development":this.app.sendError("The game is currently in development mode.");break;case"disallowed":this.app.sendError("The server is currently not accepting connections!");break;case"maintenance":this.app.sendError("Kaetram is currently under maintenance.");break;case"userexists":this.app.sendError("The username you have chosen already exists.");break;case"emailexists":this.app.sendError("The email you have chosen is not available.");break;case"invalidinput":this.app.sendError("The input you have provided is invalid.");break;case"loggedin":this.app.sendError("The player is already logged in!");break;case"invalidlogin":this.app.sendError("You have entered the wrong username or password.");break;case"toofast":this.app.sendError("You are trying to log in too fast from the same connection.");break;case"timeout":this.app.sendError("You have been disconnected for being inactive for too long.");break;default:this.app.sendError("An unknown error has occurred, please submit a bug report.");break}}onHandshake(t){this.handshakeCallback=t}onWelcome(t){this.welcomeCallback=t}onSpawn(t){this.spawnCallback=t}onEquipment(t){this.equipmentCallback=t}onEntityList(t){this.entityListCallback=t}onSync(t){this.syncCallback=t}onMovement(t){this.movementCallback=t}onTeleport(t){this.teleportCallback=t}onDespawn(t){this.despawnCallback=t}onCombat(t){this.combatCallback=t}onAnimation(t){this.animationCallback=t}onPoints(t){this.pointsCallback=t}onNetwork(t){this.networkCallback=t}onChat(t){this.chatCallback=t}onCommand(t){this.commandCallback=t}onContainer(t){this.containerCallback=t}onAbility(t){this.abilityCallback=t}onQuest(t){this.questCallback=t}onAchievement(t){this.achievementCallback=t}onNotification(t){this.notificationCallback=t}onBlink(t){this.blinkCallback=t}onHeal(t){this.healCallback=t}onExperience(t){this.experienceCallback=t}onDeath(t){this.deathCallback=t}onAudio(t){this.audioCallback=t}onNPC(t){this.npcCallback=t}onRespawn(t){this.respawnCallback=t}onEnchant(t){this.enchantCallback=t}onGuild(t){this.guildCallback=t}onPointer(t){this.pointerCallback=t}onPVP(t){this.pvpCallback=t}onStore(t){this.storeCallback=t}onMap(t){this.mapCallback=t}onOverlay(t){this.overlayCallback=t}onCamera(t){this.cameraCallback=t}onBubble(t){this.bubbleCallback=t}onSkill(t){this.skillCallback=t}onUpdate(t){this.updateCallback=t}}class cb{constructor(t){this.game=t,this.listening=!1,this.config=t.app.config,this.messages=new wb(t)}getServer(t){if(!this.config.hub)return t();try{Oe.get(`${this.config.hub}/server`,e=>{console.log(e),t(e.status==="error"?void 0:e)})}catch{t()}}connect(){this.getServer(t=>{let{host:e,port:a}=t||this.config,l=this.config.ssl?`wss://${e}`:`ws://${e}:${a}`;this.connection=il(l,{forceNew:!0,reconnection:!1}),this.connection.on("connect",this.handleConnection.bind(this)),this.connection.on("connect_error",()=>this.handleConnectionError(e,a)),this.connection.on("message",g=>this.receive(g.message||g)),this.connection.on("disconnect",()=>this.game.handleDisconnection())})}receive(t){if(!!this.listening)if(t.startsWith("[")){let e=JSON.parse(t);e.length>1?this.messages.handleBulkData(e):this.messages.handleData(e.shift())}else this.messages.handleUTF8(t)}send(t,e){var l;let a=JSON.stringify([t,e]);(l=this.connection)!=null&&l.connected&&this.connection.send(a)}handleConnection(){this.listening=!0,se.info("Connection established..."),this.game.app.updateLoader("Preparing Handshake"),this.connection.emit("client",{gVer:this.config.version,cType:"HTML5"})}handleConnectionError(t,e){se.info(`Failed to connect to: ${t}`),this.listening=!1,this.game.app.toggleLogin(!1),this.game.app.sendError("Could not connect to the game server.")}}const Eg=6,Tg=2.6;class pb{constructor(t,e,a=16){this.width=t,this.height=e,this.tileSize=a,this.border=Oe("#border"),this.x=0,this.y=0,this.gridX=0,this.gridY=0,this.gridWidth=0,this.gridHeight=0,this.borderX=0,this.borderY=0,this.zoomFactor=3,this.centered=!0,this.lockX=!1,this.lockY=!1,this.update()}update(){let t=this.border.width(),e=this.border.height();this.gridWidth=Math.ceil(t/this.tileSize/this.zoomFactor),this.gridHeight=Math.ceil(e/this.tileSize/this.zoomFactor),this.borderX=(this.width-this.gridWidth)*this.tileSize,this.borderY=(this.height-this.gridHeight)*this.tileSize}setGridPosition(t,e){this.gridX=t,this.gridY=e,this.x=t*this.tileSize,this.y=e*this.tileSize}clip(){this.setGridPosition(Math.round(this.x/this.tileSize),Math.round(this.y/this.tileSize))}center(){this.centered=!0}decenter(){this.centered=!1,this.clip()}centreOn(t){let e=Math.floor(this.gridWidth/2),a=Math.floor(this.gridHeight/2),l=t.x-e*this.tileSize,g=t.y-a*this.tileSize;l>=0&&l<=this.borderX&&!this.lockX?(this.x=l,this.gridX=Math.round(t.x/this.tileSize)-e):this.offsetX(l),g>=0&&g<=this.borderY&&!this.lockY?(this.y=g,this.gridY=Math.round(t.y/this.tileSize)-a):this.offsetY(g)}offsetX(t){t<=this.tileSize?(this.x=0,this.gridX=0):t>=this.borderX&&(this.x=this.borderX,this.gridX=Math.round(this.borderX/this.tileSize))}offsetY(t){t<=this.tileSize?(this.y=0,this.gridY=0):t>=this.borderY&&(this.y=this.borderY,this.gridY=Math.round(this.borderY/this.tileSize))}zone(t){switch(t){case Gt.Up:this.setGridPosition(this.gridX,this.gridY-this.gridHeight+3);break;case Gt.Down:this.setGridPosition(this.gridX,this.gridY+this.gridHeight-3);break;case Gt.Right:this.setGridPosition(this.gridX+this.gridWidth-3,this.gridY);break;case Gt.Left:this.setGridPosition(this.gridX-this.gridWidth+3,this.gridY);break}this.zoneClip()}zoneClip(){this.gridX<0&&this.setGridPosition(0,this.gridY),this.gridX>this.width&&this.setGridPosition(this.width,this.gridY),this.gridY<0&&this.setGridPosition(this.gridX,0),this.gridY>this.height&&this.setGridPosition(this.gridX,this.height)}zoom(t){this.zoomFactor+=t,this.zoomFactor>Eg&&(this.zoomFactor=Eg),this.zoomFactor<Tg&&(this.zoomFactor=Tg),this.zoomFactor=parseFloat(this.zoomFactor.toFixed(1))}isCentered(){return this.centered}isVisible(t,e,a,l){return t>this.gridX-a&&t<this.gridX+this.gridWidth&&e>this.gridY-a&&e<this.gridY+this.gridHeight+l}forEachVisiblePosition(t,e=1){for(let a=this.gridY-e,l=a+this.gridHeight+e*2;a<l;a++)for(let g=this.gridX-e,p=g+this.gridWidth+e*2;g<p;g++)t(g,a)}}class _b{constructor(){this.currentOverlay="",this.overlays={fog:this.load("fog")}}load(t){let e=new Image,a=`/img/overlays/${t}.png`;return e.crossOrigin="Anonymous",e.src=a,e.addEventListener("load",()=>se.debug(`Loaded ${t}`)),e}hasOverlay(){return this.currentOverlay!==""}get(){return this.overlays[this.currentOverlay]}update(t=""){this.currentOverlay=t}}class mb{constructor(t,e,a){this.id=t,this.index=e,this.animationInfo=a,this.x=-1,this.y=-1,this.animationIndex=0,this.lastTime=0}animate(t){t-this.lastTime>this.animationInfo[this.animationIndex].duration&&(this.id=this.animationInfo[this.animationIndex].tileId,this.lastTime=t,this.animationIndex>=Object.keys(this.animationInfo).length-1?this.animationIndex=0:this.animationIndex++)}setPosition(t){this.x=t.x,this.y=t.y}}class Ye{constructor(t=0,e=0){this.x=t,this.y=e}copy(){return new Ye(this.x,this.y)}dot(t){return t.x*this.x+t.y*this.y}sub(t){return new Ye(this.x-t.x,this.y-t.y)}add(t){return new Ye(this.x+t.x,this.y+t.y)}mul(t){return new Ye(this.x*t,this.y*t)}inv(){return this.mul(-1)}dist2(t){return(this.x-t.x)**2+(this.y-t.y)**2}normalize(){var t=Math.sqrt(this.length2());return new Ye(this.x/t||0,this.y/t||0)}length2(){return this.x**2+this.y**2}toString(){return`${this.x},${this.y}`}inBound(t,e){return t.x<this.x&&this.x<e.x&&t.y<this.y&&this.y<e.y}}function Ya(n,t,e){var a=`illuminated-${n}`,l=document.querySelector(`#${a}`);l||((l=document.createElement("canvas")).id=a,l.width=t,l.height=e,l.style.display="none",document.body.append(l));var g=l.getContext("2d");return g.clearRect(0,0,l.width,l.height),l.width=t,l.height=e,{canvas:l,ctx:g,w:t,h:e}}var kb=(()=>{var n=document.createElement("canvas");n.width=1,n.height=1;var t=n.getContext("2d");return(e,a=1)=>{t.clearRect(0,0,1,1),t.fillStyle=e,t.fillRect(0,0,1,1);var[l,g,p]=t.getImageData(0,0,1,1).data;return`rgba(${[l,g,p,a]})`}})();(()=>{var n=document.createElement("canvas");n.width=1,n.height=1;var t=n.getContext("2d");function e(a){var l=a.toString(16);return l.length===1&&(l=`0${l}`),l}return a=>{t.clearRect(0,0,1,1),t.fillStyle=a,t.fillRect(0,0,1,1);var[l,g,p,x]=t.getImageData(0,0,1,1).data;return{color:`#${e(l)}${e(g)}${e(p)}`,alpha:Math.round(1e3*x/255)/1e3}}})();var vn,Rw=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)},go=(n,t,e)=>(Rw(n,t,"read from private field"),e?e.call(n):t.get(n));class vb{constructor(t={}){((l,g,p)=>{if(g.has(l))throw TypeError("Cannot add the same private member more than once");g instanceof WeakSet?g.add(l):g.set(l,p)})(this,vn,void 0);var{lights:e,color:a}=t;this.lights=e!=null?e:[],this.color=a!=null?a:"rgba(0,0,0,0.9)"}compute(t,e){var a,l,g;go(this,vn)&&go(this,vn).w===t&&go(this,vn).h===e||(a=this,l=vn,g=Ya("dm",t,e),Rw(a,l,"write to private field"),l.set(a,g));var{ctx:p}=go(this,vn);for(var x of(p.save(),p.clearRect(0,0,t,e),p.fillStyle=this.color,p.fillRect(0,0,t,e),p.globalCompositeOperation="destination-out",this.lights))x.mask(p);p.restore()}render(t){t.drawImage(go(this,vn).canvas,0,0)}getCanvas(){return go(this,vn).canvas}}vn=new WeakMap;var bb=Math.PI*(3-Math.sqrt(5)),nl,pa,Dw=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)},sd=(n,t,e)=>(Dw(n,t,"read from private field"),e?e.call(n):t.get(n)),Ag=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},Xg=(n,t,e,a)=>(Dw(n,t,"write to private field"),a?a.call(n,e):t.set(n,e),e);class Ow{constructor(t={}){Ag(this,nl,void 0),Ag(this,pa,void 0);var{position:e,distance:a,diffuse:l}=t;this.position=e!=null?e:new Ye,this.distance=a!=null?a:100,this.diffuse=l!=null?l:.8}render(t){}mask(t){var e=this.getVisibleMaskCache(),{x:a,y:l}=this.position;t.drawImage(e.canvas,Math.round(a-e.w/2),Math.round(l-e.h/2))}bounds(){var{position:t,distance:e}=this,{x:a,y:l}=t;return{topLeft:new Ye(a-e,l-e),bottomRight:new Ye(a+e,l+e)}}center(){var{distance:t}=this;return new Ye(t,t)}forEachSample(t){t(this.position)}getVisibleMaskCache(){var t=Math.floor(1.4*this.distance),e=`${t}`;if(sd(this,nl)!==e){Xg(this,nl,e),Xg(this,pa,Ya(`vm${this.id}`,2*t,2*t));var{ctx:a,w:l,h:g}=sd(this,pa),p=a.createRadialGradient(t,t,0,t,t,t);p.addColorStop(0,"rgba(0,0,0,1)"),p.addColorStop(1,"rgba(0,0,0,0)"),a.fillStyle=p,a.fillRect(0,0,l,g)}return sd(this,pa)}getHashCache(){return[this.distance,this.diffuse].toString()}}nl=new WeakMap,pa=new WeakMap;var Td,rl,ol,Nw=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)},ld=(n,t,e)=>(Nw(n,t,"read from private field"),e?e.call(n):t.get(n)),hd=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},dd=(n,t,e,a)=>(Nw(n,t,"write to private field"),a?a.call(n,e):t.set(n,e),e);class yb extends Ow{constructor(t={}){super(t),hd(this,Td,0),hd(this,rl,void 0),hd(this,ol,void 0);var e,a,l,g,{id:p,color:x,radius:N,samples:b,angle:I,roughness:U}=t;this.id=p!=null?p:0,this.color=x!=null?x:"rgba(250,220,150,0.8)",this.radius=N!=null?N:0,this.samples=b!=null?b:1,this.angle=I!=null?I:0,this.roughness=U!=null?U:0,this.id===0&&(this.id=++(e=this,a=Td,{set _(z){dd(e,a,z,l)},get _(){return ld(e,a,g)}})._)}getHashCache(){return[this.color,this.distance,this.diffuse,this.angle,this.roughness,this.samples,this.radius].toString()}center(){var{angle:t,roughness:e,distance:a}=this;return new Ye((1-Math.cos(t)*e)*a,(1+Math.sin(t)*e)*a)}bounds(){var{angle:t,roughness:e,distance:a,position:l}=this,{x:g,y:p}=new Ye(Math.cos(t),-Math.sin(t)).mul(e*a);return{topLeft:new Ye(l.x+g-a,l.y+p-a),bottomRight:new Ye(l.x+g+a,l.y+p+a)}}mask(t){var{angle:e,roughness:a,distance:l,position:g}=this,{canvas:p,w:x,h:N}=this.getVisibleMaskCache(),{x:b,y:I}=new Ye(Math.cos(e),-Math.sin(e)).mul(a*l);t.drawImage(p,Math.round(g.x+b-x/2),Math.round(g.y+I-N/2))}getGradientCache(t){var e=this.getHashCache();if(ld(this,rl)===e)return ld(this,ol);dd(this,rl,e);var{distance:a,id:l,radius:g,color:p}=this,x=Math.round(a),N=2*x,b=Ya(`gc${l}`,N,N),{ctx:I,w:U,h:z}=b,q=I.createRadialGradient(t.x,t.y,0,x,x,x);return q.addColorStop(Math.min(1,g/a),p),q.addColorStop(1,kb(p,0)),I.fillStyle=q,I.fillRect(0,0,U,z),dd(this,ol,b),b}render(t){var{x:e,y:a}=this.position,l=this.center(),{canvas:g}=this.getGradientCache(l);t.drawImage(g,Math.round(e-l.x),Math.round(a-l.y))}forEachSample(t){for(var{samples:e,radius:a,position:l}=this,g=0,p=e;g<p;++g){var x=g*bb,N=Math.sqrt(g/e)*a,b=new Ye(Math.cos(x)*N,Math.sin(x)*N);t(l.add(b))}}}Td=new WeakMap,rl=new WeakMap,ol=new WeakMap;var bn,al,Pw=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)},yr=(n,t,e)=>(Pw(n,t,"read from private field"),e?e.call(n):t.get(n)),Yg=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},Lg=(n,t,e,a)=>(Pw(n,t,"write to private field"),a?a.call(n,e):t.set(n,e),e);class xb{constructor(t={}){Yg(this,bn,void 0),Yg(this,al,void 0);var{light:e,objects:a}=t;this.light=e!=null?e:new Ow,this.objects=a!=null?a:[]}createCache(t,e){Lg(this,bn,Ya("lc",t,e)),Lg(this,al,Ya("lcc",t,e))}compute(t,e){yr(this,bn)&&yr(this,bn).w===t&&yr(this,bn).h===e||this.createCache(t,e);var{ctx:a}=yr(this,bn);a.save(),a.clearRect(0,0,a.canvas.width,a.canvas.height),this.light.render(a),a.globalCompositeOperation="destination-out",this.cast(a),a.restore()}cast(t){var{ctx:e,w:a,h:l,canvas:g}=yr(this,al),{light:p}=this,x=p.samples;e.clearRect(0,0,a,l),e.fillStyle=`rgba(0,0,0,${Math.round(100/x)/100})`;var N=p.bounds(),{topLeft:b,bottomRight:I}=N,{objects:U}=this;for(var z of(p.forEachSample(G=>{for(var et=0,lt=U.length;et<lt;++et)if(U[et].contains(G))return void e.fillRect(b.x,b.y,I.x-b.x,I.y-b.y);for(var it of U)it.cast(e,G,N)}),U)){var{diffuse:q}=z;q*=p.diffuse,e.fillStyle=`rgba(0,0,0,${1-q})`,e.beginPath(),z.path(e),e.fill()}t.drawImage(g,0,0)}render(t){t.drawImage(yr(this,bn).canvas,0,0)}getCanvas(){return yr(this,bn).canvas}}bn=new WeakMap,al=new WeakMap;class Sb{constructor(t){this.game=t,this.background=document.querySelector("#background"),this.foreground=document.querySelector("#foreground"),this.overlay=document.querySelector("#overlay"),this.textCanvas=document.querySelector("#text-canvas"),this.entitiesCanvas=document.querySelector("#entities"),this.cursor=document.querySelector("#cursor"),this.canvases=[this.background,this.entitiesCanvas,this.foreground,this.overlay,this.textCanvas,this.cursor],this.lightings=[],this.map=this.game.map,this.camera=this.game.camera,this.tileSize=this.game.map.tileSize,this.actualTileSize=this.tileSize*this.camera.zoomFactor,this.fontSize=10,this.screenWidth=0,this.screenHeight=0,this.canvasHeight=0,this.canvasWidth=0,this.time=Date.now(),this.fps=0,this.frameCount=0,this.renderedFrame=[0,0],this.animatedTiles={},this.stopRendering=!1,this.animateTiles=!0,this.debugging=!1,this.autoCentre=!1,this.drawNames=!0,this.drawLevels=!0,this.transitioning=!1,this.mobile=mo(),this.tablet=Q1(),this.forceRendering=(this.mobile||this.tablet)&&this.camera.isCentered(),this.tiles={},this.cells={},this.darkMask=new vb({lights:[],color:"rgba(0, 0, 0, 0.84)"}),this.entitiesContext=this.entitiesCanvas.getContext("2d"),this.backContext=this.background.getContext("2d"),this.foreContext=this.foreground.getContext("2d"),this.overlayContext=this.overlay.getContext("2d"),this.textContext=this.textCanvas.getContext("2d"),this.cursorContext=this.cursor.getContext("2d"),this.allContexts=[this.entitiesContext,this.backContext,this.foreContext,this.overlayContext,this.textContext,this.cursorContext],this.contexts=[this.entitiesContext,this.textContext,this.overlayContext],this.drawingContexts=[this.backContext,this.foreContext],this.darkMask.compute(this.overlay.width,this.overlay.height),this.loadSizes()}loadSizes(){this.actualTileSize=this.tileSize*this.camera.zoomFactor,this.screenWidth=this.camera.gridWidth*this.tileSize,this.screenHeight=this.camera.gridHeight*this.tileSize,this.canvasWidth=this.screenWidth*this.camera.zoomFactor,this.canvasHeight=this.screenHeight*this.camera.zoomFactor,this.forEachCanvas(t=>{t.width=this.canvasWidth,t.height=this.canvasHeight})}loadStaticSprites(){this.shadowSprite=this.game.sprites.get("shadow16"),this.shadowSprite.loaded||this.shadowSprite.load(),this.sparksSprite=this.game.sprites.get("sparks"),this.sparksSprite.loaded||this.sparksSprite.load()}resize(){this.cells={},this.mobile=mo(),this.camera.update(),this.loadSizes(),this.updateAnimatedTiles(),this.clearScreen(this.cursorContext),this.camera.centreOn(this.game.player),this.forceRendering=!0}stop(){this.stopRendering=!0,this.forEachContext(t=>{t.fillStyle="rgba(18, 16, 13, 1)",t.fillRect(0,0,t.canvas.width,t.canvas.height)})}removeSmoothing(){this.forAllContexts(t=>{t.imageSmoothingQuality="low",t.imageSmoothingEnabled=!1})}render(){this.stopRendering||(this.clear(),this.save(),this.removeSmoothing(),this.draw(),this.drawAnimatedTiles(),this.drawDebugging(),this.drawOverlays(),this.drawHoveringCell(),this.drawSelectedCell(),this.drawEntities(),this.drawInfos(),this.drawCursor(),this.restore())}draw(){this.hasRenderedFrame()||(this.clearDrawing(),this.saveDrawing(),this.updateDrawingView(),this.forEachVisibleTile((t,e)=>{let a=this.map.isHighTile(t),l=a?this.foreContext:this.backContext;this.game.overlays.hasOverlay()&&(l=this.map.isLightTile(t)?this.overlayContext:l);let g=this.getFlipped(t);g.length>0&&(t=t.tileId),(!this.map.isAnimatedTile(t)||!this.animateTiles)&&this.drawTile(l,t-1,e,g)}),this.restoreDrawing(),this.saveFrame())}drawAnimatedTiles(){!this.animateTiles||(this.entitiesContext.save(),this.setCameraView(this.entitiesContext),this.forEachAnimatedTile(t=>{!this.camera.isVisible(t.x,t.y,3,2)||(t.animate(this.game.time),this.drawTile(this.entitiesContext,t.id,t.index))}),this.entitiesContext.restore())}drawDebugging(){!this.debugging||(this.drawFPS(),this.drawPathing(),!this.mobile&&(this.drawPosition(),this.drawCollisions()))}drawOverlays(){if(!this.game.overlays.hasOverlay())return;let t=this.game.overlays.get();t&&(this.overlayContext.fillStyle=this.overlayContext.createPattern(t,"repeat"),this.overlayContext.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.overlayContext.fill()),this.overlayContext.globalCompositeOperation="lighter",this.forEachLighting(e=>{this.inRadius(e)&&this.drawLighting(e)}),this.overlayContext.globalCompositeOperation="source-over",this.darkMask.render(this.overlayContext)}drawHoveringCell(){if(this.mobile)return;let{input:t}=this.game,e=t.getCoords();if(this.isSelectedCell(e.x,e.y))return;let a=this.map.isColliding(e.x,e.y);this.drawCellHighlight(e.x,e.y,a?"rgba(230, 0, 0, 0.7)":t.targetColour)}drawSelectedCell(){if(!this.game.input.selectedCellVisible||this.game.input.keyMovement)return;let t=this.game.input.getTargetData();t&&(this.entitiesContext.save(),this.setCameraView(this.entitiesContext),this.entitiesContext.drawImage(t.sprite.image,t.x,t.y,t.width,t.height,t.dx,t.dy,t.dw,t.dh),this.entitiesContext.restore())}drawEntities(){this.game.player.dead||(this.setCameraView(this.entitiesContext),this.forEachVisibleEntity(t=>{!t.spriteLoaded||!t.sprite||!t.animation||!t.isVisible()||this.drawEntity(t)}))}drawInfos(){this.game.info.isEmpty()||this.game.info.forEachInfo(t=>{this.textContext.save(),this.setCameraView(this.textContext),this.textContext.globalAlpha=t.opacity,this.drawText(`${t.getText()}`,Math.floor(t.x+8),Math.floor(t.y),!0,t.fill,t.stroke,26),this.textContext.restore()})}drawCursor(){if(this.tablet||this.mobile||this.game.input.isMouseRendered())return;let{cursor:t,mouse:e}=this.game.input;!t||!e||(this.clearScreen(this.cursorContext),this.cursorContext.save(),t.loaded?this.cursorContext.drawImage(t.image,0,0,this.tileSize,this.tileSize,e.x,e.y,this.actualTileSize,this.actualTileSize):t.load(),this.cursorContext.restore(),this.game.input.saveMouse())}drawFPS(){this.calculateFPS(),this.drawText(`FPS: ${this.fps}`,10,31,!1,"white")}calculateFPS(){let t=Date.now();t-this.time>=1e3&&(this.fps=this.frameCount,this.frameCount=0,this.time=t),this.frameCount++}drawPosition(){let{player:t,input:e}=this.game;this.drawText(`x: ${t.gridX} y: ${t.gridY} tileIndex: ${this.map.coordToIndex(t.gridX,t.gridY)}`,10,51,!1,"white"),e.hovering&&e.entity&&(this.drawText(`x: ${e.entity.gridX} y: ${e.entity.gridY} instance: ${e.entity.instance}`,10,71,!1,"white"),e.entity.attackRange&&this.drawText(`att range: ${e.entity.attackRange}`,10,91,!1,"white"))}drawCollisions(){this.camera.forEachVisiblePosition((t,e)=>{this.map.isOutOfBounds(t,e)||this.map.grid[e][t]!==0&&this.drawCellHighlight(t,e,"rgba(50, 50, 255, 0.5)")})}drawPathing(){!this.game.player.hasPath()||vt.each(this.game.player.path,t=>this.drawCellHighlight(t[0],t[1],"rgba(50, 255, 50, 0.5)"))}drawEntity(t){var x;let e=(x=t.animation)==null?void 0:x.currentFrame,a=t.x*this.camera.zoomFactor,l=t.y*this.camera.zoomFactor,g=a+this.actualTileSize,p=l+t.sprite.height;this.entitiesContext.save(),t.angled&&!t.isProjectile()&&(t.angle*=Math.PI/180),t.fading&&(this.entitiesContext.globalAlpha=t.fadingAlpha),t.spriteFlipX?(this.entitiesContext.translate(g,l),this.entitiesContext.scale(-1,1)):t.spriteFlipY?(this.entitiesContext.translate(a,p),this.entitiesContext.scale(1,-1)):this.entitiesContext.translate(a,l),this.entitiesContext.scale(this.camera.zoomFactor,this.camera.zoomFactor),t.customScale&&this.entitiesContext.scale(t.customScale,t.customScale),t.angled&&this.entitiesContext.rotate(t.isProjectile()?t.getAngle():t.angle),t.hasShadow()&&(this.entitiesContext.globalCompositeOperation="source-over",this.entitiesContext.drawImage(this.shadowSprite.image,0,0,this.shadowSprite.width,this.shadowSprite.height,0,t.shadowOffsetY,this.shadowSprite.width,this.shadowSprite.height)),this.entitiesContext.drawImage(t.sprite.image,e.x,e.y,t.sprite.width,t.sprite.height,t.sprite.offsetX,t.sprite.offsetY,t.sprite.width,t.sprite.height),this.drawEntityFore(t),this.entitiesContext.restore(),this.drawHealth(t),this.game.overlays.hasOverlay()||this.drawName(t)}drawEntityFore(t){if(t.isItem())return this.drawSparks();t instanceof In&&(t.isPlayer()&&this.drawWeapon(t),t.hasEffect()&&this.drawEffect(t))}drawWeapon(t){if(!t.hasWeapon()||t.dead||t.teleporting)return;let e=this.game.sprites.get(t.getWeapon().key);if(!e)return;e.loaded||e.load();let a=t.animation,l=e.animationData[a.name],g=a.currentFrame,p=g.index<l.length?g.index:g.index%l.length,x=e.width*p,N=e.height*a.row,b=e.width,I=e.height;this.entitiesContext.drawImage(e.image,x,N,b,I,e.offsetX,e.offsetY,b,I)}drawEffect(t){let e=this.game.sprites.get(t.getActiveEffect());if(!e)return;e.loaded||e.load();let a=t.getEffectAnimation(),{index:l}=a.currentFrame,g=e.width*l,p=e.height*a.row;this.entitiesContext.drawImage(e.image,g,p,e.width,e.height,e.offsetX,e.offsetY,e.width,e.height),a.update(this.game.time)}drawSparks(){let{sparksAnimation:t}=this.game.entities.sprites,e=t.currentFrame;this.entitiesContext.drawImage(this.sparksSprite.image,this.sparksSprite.width*e.index,this.sparksSprite.height*t.row,this.sparksSprite.width,this.sparksSprite.height,0,0,this.sparksSprite.width,this.sparksSprite.height)}drawHealth(t){if(!t.hitPoints||t.hitPoints<0||!t.healthBarVisible)return;let e=16,a=t.x*this.camera.zoomFactor-e/2+8,l=(t.y-t.sprite.height/4)*this.camera.zoomFactor,g=Math.round(t.hitPoints/t.maxHitPoints*e*this.camera.zoomFactor),p=2*this.camera.zoomFactor;this.textContext.save(),this.setCameraView(this.textContext),this.textContext.strokeStyle="rbga(0, 0, 0, 1)",this.textContext.lineWidth=1,this.textContext.strokeRect(a,l,e*this.camera.zoomFactor,p),this.textContext.fillStyle="rgba(253, 0, 0, 1)",this.textContext.fillRect(a,l,g,p),this.textContext.restore()}drawName(t){if(t.hidden||!t.drawNames()||!this.drawNames&&!this.drawLevels)return;let e=t.wanted?"red":"white";if(t.rights>1?e="rgba(186,20,20, 1)":t.rights>0&&(e="rgba(165, 154, 154, 1)"),t.instance===this.game.player.instance&&(e="rgba(252,218,92, 1)"),t.nameColour&&(e=t.nameColour),this.textContext.save(),this.setCameraView(this.textContext),this.textContext.font="11px AdvoCut",t.hasCounter)this.game.time-t.countdownTime>1e3&&(t.countdownTime=this.game.time,t.counter--),t.counter<=0&&(t.hasCounter=!1),this.drawText(t.counter.toString(),t.x+8,t.y-10,!0,e);else{let a=t.x+8,l=t.y-Math.floor(t.sprite.height/3);this.drawNames&&t instanceof In&&this.drawText(t.name,a,this.drawLevels&&!t.isNPC()?l-8:l,!0,e,"rbga(0, 0, 0, 1)"),this.drawLevels&&(t.isMob()||t.isPlayer())&&this.drawText(`Level ${t.level}`,a,l,!0,e,"rbga(0, 0, 0, 1)"),t.isItem()&&(t.count>1&&this.drawText(t.count.toString(),a,l,!0,e),t.ability>-1&&this.drawText(`${V1[t.ability]} [+${t.abilityLevel}]`,a,t.y+20,!0,e))}this.textContext.restore()}drawLighting(t){if(t.relative){let e=(t.light.origX-this.camera.x/this.tileSize)*this.actualTileSize,a=(t.light.origY-this.camera.y/this.tileSize)*this.actualTileSize;t.light.position=new Ye(e,a),t.compute(this.overlay.width,this.overlay.height),this.darkMask.compute(this.overlay.width,this.overlay.height)}else t.computed||(t.compute(this.overlay.width,this.overlay.height),t.computed=!0);t.render(this.overlayContext)}drawTile(t,e,a,l=[]){if(e<0)return;let g=this.map.getTilesetFromId(e);if(!!g){if(!(e in this.tiles)){let p=g.width/this.tileSize,x=e-g.firstGID;this.tiles[e]={relativeTileId:x,setWidth:p,x:this.getX(x+1,p)*this.tileSize,y:Math.floor(x/p)*this.tileSize,width:this.tileSize,height:this.tileSize}}(!(a in this.cells)||l.length>0)&&(this.cells[a]={dx:this.getX(a+1,this.map.width)*this.actualTileSize,dy:Math.floor(a/this.map.width)*this.actualTileSize,width:this.actualTileSize,height:this.actualTileSize,flips:l}),this.drawImage(t,g,this.tiles[e],this.cells[a])}}drawImage(t,e,a,l){let g=0,p=0,x=l.flips.length>0;if(!!t){if(x){({dx:g,dy:p}=l),t.save();let N=g;for(let b of l.flips)switch(b){case 0:g=-g-l.width,t.scale(-1,1);break;case 1:p=-p-l.height,t.scale(1,-1);break;case 2:t.rotate(Math.PI/2),t.translate(0,-l.height),g=p,p=-N,l.flips.push(0);break}}t.drawImage(e,a.x,a.y,a.width,a.height,g||l.dx,p||l.dy,l.width,l.height),x&&t.restore()}}drawText(t,e,a,l,g,p,x=this.fontSize){let N=3,b=this.textContext;b.save(),l&&(b.textAlign="center"),x+=this.camera.zoomFactor*2,b.strokeStyle=p||"rgba(55, 55, 55, 1)",b.lineWidth=N,b.font=`${x}px AdvoCut`,b.strokeText(t,e*this.camera.zoomFactor,a*this.camera.zoomFactor),b.fillStyle=g||"white",b.fillText(t,e*this.camera.zoomFactor,a*this.camera.zoomFactor),b.restore()}updateAnimatedTiles(){!this.animateTiles||this.forEachVisibleTile((t,e)=>{if(!!this.map.isAnimatedTile(t)&&!(e in this.animatedTiles)){let a=new mb(t,e,this.map.getTileAnimation(t)),l=this.map.indexToCoord(a.index);a.setPosition(l),this.animatedTiles[e]=a}},2)}resetAnimatedTiles(){vt.each(this.animatedTiles,t=>{t.animationIndex=0})}drawCellRect(t,e,a){this.entitiesContext.save(),this.setCameraView(this.entitiesContext),this.entitiesContext.lineWidth=2*this.camera.zoomFactor,this.entitiesContext.translate(t+2,e+2),this.entitiesContext.strokeStyle=a,this.entitiesContext.strokeRect(0,0,this.actualTileSize-4,this.actualTileSize-4),this.entitiesContext.restore()}drawCellHighlight(t,e,a){this.drawCellRect(t*this.actualTileSize,e*this.actualTileSize,a)}updateDarkMask(t="rgba(0, 0, 0, 0.5)"){this.darkMask.color=t,this.darkMask.compute(this.overlay.width,this.overlay.height)}addLight(t){let e=new yb(this.getLightData(t.x,t.y,t.distance,t.diffuse,t.colour)),a=new xb({light:e});e.origX=e.position.x,e.origY=e.position.y,e.diff=Math.round(e.distance/16),!this.hasLighting(a)&&(a.relative=!0,this.lightings.push(a),this.darkMask.lights.push(e),this.drawLighting(a),this.darkMask.compute(this.overlay.width,this.overlay.height))}removeAllLights(){this.lightings=[],this.darkMask.lights=[],this.darkMask.compute(this.overlay.width,this.overlay.height)}removeNonRelativeLights(){vt.each(this.lightings,(t,e)=>{t.light.relative||(this.lightings.splice(e,1),this.darkMask.lights.splice(e,1))}),this.darkMask.compute(this.overlay.width,this.overlay.height)}hasLighting(t){for(let e=0;e<this.lightings.length;e++){let{light:a}=this.lightings[e];if(t.light.origX===a.origX&&t.light.origY===a.origY&&t.light.distance===a.distance)return!0}return!1}clear(){this.forEachContext(t=>t.clearRect(0,0,t.canvas.width,t.canvas.height))}clearDrawing(){this.forEachDrawingContext(t=>t.clearRect(0,0,t.canvas.width,t.canvas.height))}restore(){this.forEachContext(t=>t.restore())}restoreDrawing(){this.forEachDrawingContext(t=>t.restore())}hasRenderedFrame(){return this.forceRendering||this.mobile&&this.camera.isCentered()?!1:this.stopRendering?!0:this.renderedFrame[0]===this.camera.x&&this.renderedFrame[1]===this.camera.y}save(){this.forEachContext(t=>t.save())}saveDrawing(){this.forEachDrawingContext(t=>t.save())}saveFrame(){this.mobile&&this.camera.isCentered()||(this.renderedFrame[0]=this.camera.x,this.renderedFrame[1]=this.camera.y,this.forceRendering=!1)}updateDrawingView(){this.forEachDrawingContext(t=>this.setCameraView(t))}setCameraView(t){!this.camera||this.stopRendering||t.translate(-this.camera.x*this.camera.zoomFactor,-this.camera.y*this.camera.zoomFactor)}clearScreen(t){t.clearRect(0,0,this.entitiesContext.canvas.width,this.entitiesContext.canvas.height)}setBrightness(t){t<0||t>100||this.forEachCanvas(e=>{e.style.background=`rgba(0,0,0,${.25-t/200})`})}getX(t,e){return t===0?0:t%e===0?e-1:t%e-1}isFlipped(t){return t.v||t.h||t.d}isSelectedCell(t,e){return this.game.input.selectedX===t&&this.game.input.selectedY===e}inRadius(t){let e={x:t.light.origX,y:t.light.origY,diff:t.light.diff};return e.x>this.camera.gridX-e.diff&&e.x<this.camera.gridX+this.camera.gridWidth+e.diff&&e.y>this.camera.gridY-e.diff&&e.y<this.camera.gridY+this.camera.gridHeight+e.diff}getMiddle(){return{x:this.overlay.width/2,y:this.overlay.height/2}}getFlipped(t){let e=[];return this.isFlipped(t)&&(t.d&&e.push(2),t.v&&e.push(1),t.h&&e.push(0)),e}getLightData(t,e,a,l,g){return{position:new Ye(t,e),distance:a,diffuse:l,color:g,radius:0,samples:2,roughness:0,angle:0}}forAllContexts(t){vt.each(this.allContexts,t)}forEachContext(t){vt.each(this.contexts,t)}forEachDrawingContext(t){vt.each(this.drawingContexts,t)}forEachCanvas(t){vt.each(this.canvases,t)}forEachLighting(t){vt.each(this.lightings,t)}forEachAnimatedTile(t){vt.each(this.animatedTiles,t)}forEachVisibleIndex(t,e){this.camera.forEachVisiblePosition((a,l)=>{this.map.isOutOfBounds(a,l)||t(this.map.coordToIndex(a,l))},e)}forEachVisibleTile(t,e){!this.map||!this.map.mapLoaded||this.forEachVisibleIndex(a=>{let l=this.map.data[a];if(Array.isArray(l))for(let g of l)t(g,a);else this.map.data[a]&&t(this.map.data[a],a)},e)}forEachVisibleEntity(t){let{grids:e}=this.game.entities;this.camera.forEachVisiblePosition((a,l)=>{!this.map.isOutOfBounds(a,l)&&e.renderingGrid[l][a]&&vt.each(e.renderingGrid[l][a],g=>t(g))})}}class Cb{constructor(t){this.game=t,this.tileSize=this.game.map.tileSize,this.sprites=null}update(){this.updateEntities(),this.updateKeyboard(),this.updateAnimations(),this.updateInfos(),this.updateBubbles()}updateEntities(){this.game.entities.forEachEntity(t=>{var p;if(!t.spriteLoaded)return;if(this.updateFading(t),(p=t.animation)==null||p.update(this.game.time),t instanceof Bg){let x=t.speed*t.getTimeDiff(),N=t.target.x-t.x,b=t.target.y-t.y,I=Math.sqrt(N*N+b*b),U=x/I;t.updateAngle(),U>1&&(U=1),t.x+=N*U,t.y+=b*U,I<5&&t.impact(),t.lastUpdate=this.game.time;return}if(!(t instanceof In))return;if(t.movement.inProgress)return t.movement.step(this.game.time);if(!t.hasPath())return;let e=t.orientation===Gt.Left||t.orientation===Gt.Right,a=t.orientation===Gt.Up||t.orientation===Gt.Down,l,g;e&&(l=t.orientation===Gt.Left),a&&(g=t.orientation===Gt.Up),t.movement.start(this.game.time,e?t.x+(l?-1:1):t.y+(g?-1:1),e?t.x+(l?-this.tileSize:this.tileSize):t.y+(g?-this.tileSize:this.tileSize),t.movementSpeed,x=>{e&&(t.x=x),a&&(t.y=x),t.moved()},()=>{e&&(t.x=t.movement.endValue),a&&(t.y=t.movement.endValue),t.moved(),t.nextStep()})})}updateFading(t){if(!t.fading)return;let{time:e}=this.game,a=e-t.fadingTime;a>t.fadingDuration?(t.fading=!1,t.fadingAlpha=1):t.fadingAlpha=a/t.fadingDuration}updateKeyboard(){let{player:t,input:e}=this.game,a={x:t.gridX,y:t.gridY};t.frozen||!t.hasKeyboardMovement()||(t.moveUp?a.y--:t.moveDown?a.y++:t.moveRight?a.x++:t.moveLeft&&a.x--,e.keyMove(a))}updateAnimations(){let t=this.game.input.targetAnimation;if(t&&this.game.input.selectedCellVisible&&t.update(this.game.time),!this.sprites)return;let e=this.sprites.sparksAnimation;e==null||e.update(this.game.time)}updateInfos(){this.game.info.update(this.game.time)}updateBubbles(){var t,e;(t=this.game.bubble)==null||t.update(this.game.time),(e=this.game.pointer)==null||e.update()}setSprites(t){this.sprites=t}}/**
 * A* (A-Star) algorithm for a path finder
 * @author  Andrea Giammarchi
 * @license Mit Style License
 */function Ib(n,t,e,a){let l=n[0].length,g=n.length,p=l*g,x=Math.max,N={},b=[],I=[{x:t[0],y:t[1],f:0,g:0,v:t[0]+t[1]*l}],U=1,z,q,G,et,lt={x:e[0],y:e[1],v:e[0]+e[1]*l};switch(a){case"Diagonal":case"Euclidean":q=Eb;case"DiagonalFree":z=Yb;break;case"EuclideanFree":x=Math.sqrt,z=Lb;break;default:z=Rb,q=Ab;break}q||(q=Tb);do{if(U>100)return[];let it=p,Nt=0;for(let ft=0;ft<U;++ft){let nt=I[ft].f;nt<it&&(it=nt,Nt=ft)}if([G]=I.splice(Nt,1),G.v!==lt.v){--U,et=Xb(q,G.x,G.y,n,g,l);for(let ft=0,nt=et.length;ft<nt;++ft){let gt=et[ft];gt.p=G,gt.f=gt.g=0,gt.v=gt.x+gt.y*l,gt.v in N||(gt.f=(gt.g=G.g+z(gt,G,Math.abs,x))+z(gt,lt,Math.abs,x),I[U++]=gt,N[gt.v]=1)}}else{let ft=U=0;do b[ft++]=[G.x,G.y];while(G=G.p);b.reverse()}}while(U);return b}let Eb=(n,t,e,a,l,g,p,x,N,b,I,U,z)=>(n&&(e&&!N[l][p]&&(U[z++]={x:p,y:l}),a&&!N[l][x]&&(U[z++]={x,y:l})),t&&(e&&!N[g][p]&&(U[z++]={x:p,y:g}),a&&!N[g][x]&&(U[z++]={x,y:g})),U),Tb=(n,t,e,a,l,g,p,x,N,b,I,U,z)=>(n=l>-1,t=g<b,e=p<I,a=x>-1,e&&(n&&!N[l][p]&&(U[z++]={x:p,y:l}),t&&!N[g][p]&&(U[z++]={x:p,y:g})),a&&(n&&!N[l][x]&&(U[z++]={x,y:l}),t&&!N[g][x]&&(U[z++]={x,y:g})),U),Ab=(n,t,e,a,l,g,p,x,N,b,I,U)=>U;function Xb(n,t,e,a,l,g){let p=e-1,x=e+1,N=t+1,b=t-1,I=p>-1&&!a[p][t],U=x<l&&!a[x][t],z=N<g&&!a[e][N],q=b>-1&&!a[e][b],G=[],et=0;return I&&(G[et++]={x:t,y:p}),z&&(G[et++]={x:N,y:e}),U&&(G[et++]={x:t,y:x}),q&&(G[et++]={x:b,y:e}),n(I,U,z,q,p,x,N,b,a,l,g,G,et)}let Yb=(n,t,e,a)=>a(e(n.x-t.x),e(n.y-t.y)),Lb=(n,t,e,a)=>{let l=n.x-t.x,g=n.y-t.y;return a(l*l+g*g)},Rb=(n,t,e)=>e(n.x-t.x)+e(n.y-t.y);class Db{constructor(){this.mode="DEFAULT",this.ignores=[]}find(t,e,a,l,g){return this.handleIgnore(t,!0),Ib(t,[e,a],[l,g],this.mode)}handleIgnore(t,e){vt.each(this.ignores,a=>{let l=a.hasPath()?a.nextGridX:a.gridX,g=a.hasPath()?a.nextGridY:a.gridY;l>=0&&g>=0&&(t[g][l]=e?0:1)})}addIgnore(t){!t||this.ignores.push(t)}clearIgnores(t){this.handleIgnore(t,!1),this.ignores=[]}}class Ob{constructor(t){this.app=t,this.storage=this.app.storage,this.player=new Mg(""),this.zoning=new B2,this.overlays=new _b,this.pathfinder=new Db,this.info=new _2,this.sprites=new P2,this.map=new Z2(this),this.camera=new pb(this.map.width,this.map.height,this.map.tileSize),this.renderer=new Sb(this),this.input=new v2(this),this.socket=new cb(this),this.pointer=new M2(this),this.updater=new Cb(this),this.audio=new e2(this),this.entities=new c2(this),this.bubble=new r2(this),this.menu=new D2(this),this.connection=new Ev(this),this.time=Date.now(),this.lastTime=Date.now(),this.started=!1,this.ready=!1,this.pvp=!1,this.app.sendStatus("Loading game"),this.map.onReady(()=>this.app.ready()),this.app.onLogin(this.socket.connect.bind(this.socket)),this.app.onResize(this.resize.bind(this)),this.app.onRespawn(this.respawn.bind(this)),this.player.onSync(this.handlePlayerSync.bind(this))}start(){this.started||(this.started=!0,this.app.fadeMenu(),this.tick())}tick(){this.time=Date.now(),this.renderer.render(),this.updater.update(),this.started&&requestAnimationFrame(()=>this.tick())}handleDisconnection(){!this.app.isMenuHidden()||location.reload()}handlePlayerSync(){this.menu.synchronize(),this.player.setSprite(this.sprites.get(this.player.getSpriteName()))}postLoad(){this.renderer.loadStaticSprites(),this.entities.addEntity(this.player),this.player.setSprite(this.sprites.get(this.player.getSpriteName())),this.storage&&this.player.setOrientation(this.storage.data.player.orientation),this.player.idle(),this.camera.centreOn(this.player),this.map&&this.socket.send(dt.Ready,{hasMapData:this.map.preloadedData,userAgent:ya}),new z2(this,this.player),this.renderer.updateAnimatedTiles(),this.updater.setSprites(this.entities.sprites),this.storage.data.new&&(this.storage.data.new=!1,this.storage.save())}findPath(t,e,a,l=[],g=!1){let p=[];return this.map.isColliding(e,a)&&!this.map.isObject(e,a)||(l&&vt.each(l,x=>this.pathfinder.addIgnore(x)),p=this.pathfinder.find(this.map.grid,t.gridX,t.gridY,e,a),l&&this.pathfinder.clearIgnores(this.map.grid),g&&p.pop()),p}respawn(){this.audio.play(Zi.SFX,"revive"),this.app.body.classList.remove("death"),this.socket.send(dt.Respawn,[])}resize(){this.renderer.resize(),this.pointer.resize(),this.menu.resize()}getEntityAt(t,e){if(!this.entities)return;let a=this.entities.grids.renderingGrid[e][t],l=vt.keys(a),g=l.indexOf(this.player.instance);return g!==-1&&l.splice(g,1),a[l[0]]}teleport(t,e,a){this.entities.unregisterPosition(t),t.setGridPosition(e,a),this.entities.registerPosition(t),t.frozen=!1,t.instance===this.player.instance&&(t.clearHealthBar(),this.camera.centreOn(t),this.renderer.updateAnimatedTiles())}}new Ob(new t2);export{Nb as __vite_legacy_guard};
